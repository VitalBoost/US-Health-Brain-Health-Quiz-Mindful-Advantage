(function(){try{
"use strict";(()=>{function aa(){return a.TAG_SRC||"JS"}function v(){return aa()==="ShopifyAppExtension"}function Z(t,e,r,o){function n(i){typeof o=="function"&&o(i)}try{fetch(t,e).then(i=>{if(i.ok)typeof r=="function"&&r(i);else if(e?.mode!=="no-cors"){let c=`${i.status} ${i.statusText}`;try{i.json().then(s=>{let u=s.errors[0];c=`${u.error_type}: ${u.error_message}`,n(new Error(c))}).catch(()=>{n(new Error(c))})}catch{n(new Error(c))}}}).catch(n)}catch(i){n(i)}}function lm(){try{return window.location!==window.top.location}catch{return!0}}function Lo(){return v()?window.location.hostname:window.top.location.hostname}function bu(){return v()?window.location:lm()?window.top.location:window.location}function $e(){return bu()?.pathname}function O(){return bu().href}function Ee(){return window?.navigator?.userAgent}function Kt(t){return performance&&typeof performance.getEntriesByType=="function"&&performance.getEntriesByType(t)||[]}function On(){return performance&&typeof performance.now=="function"&&performance.now()||0}function Kr(t,e){let r=globalThis.browser;if(v()&&r){Z(t,{method:"POST",keepalive:!0,mode:"no-cors",body:e},()=>{},o=>{o.message=`${o.message} - ${t}`,o.status="warn",a.error(o)});return}window?.navigator?.sendBeacon(t,e)}var mm=["clicktripz","example","partner"],gm=[".shopifypreview.","localhost.","demo.","staging.","development-","development.","dev-","dev.","devstore-","devstore.","development2","sandbox-","sandbox.","-sandbox"],hm=["localhost","127.0.0.1"];function ym(){let t=Lo();return t===""||hm.includes(t)}function vm(){let t=Lo().toLocaleLowerCase();return gm.some(e=>t.indexOf(e.toLocaleLowerCase())!==-1)}function Lt(t){return mm.indexOf(t.toLowerCase())!==-1||ym()||vm()}function he(t,e={},r="info"){if(Lt(f))return;let o="https://monitor-api.blackcrow.ai/",n=!1,i=parseInt("15641",10)||0,c=JSON.stringify({message:t,status:r,service:"javascript-api",version:i,ddsource:"browser",ddtags:`env:${n?"dev":"production"},version:${i}`,"logger.name":"monitor-api","http.useragent":Ee(),"view.site":f,...e});Kr(o,c)}function Cn(t){let e=Math.random();(t.overrideSampling||e>=.3&&e<.4)&&he(t.message,{status:t.status||"error","error.kind":t.name,"error.message":t.message,"error.stack":t.stack,"view.url":O(),"view.referrer":document.referrer})}var Nn=`
`;function ie(t,e){if(typeof t=="string"){let r=t.split(Nn);return r.splice(1,e),r.join(Nn)}return""}function Su(t){return typeof t=="string"?t.split(Nn).filter(o=>{o=o.toLowerCase();let n=p.toLowerCase(),i="mindfuladvantage.js".toLowerCase();return!(o.includes(n)&&o.includes(i))}).join(Nn):t}function T(t){let e=new Error(t);return e.name="GlobalInterfaceError",e.status="warn",e.stack=ie(e.stack,1),e}var d=window.IntentProperties?window.IntentProperties.namespace||"intent":"blackcrow",a=window.blackcrow||window.intent||{},l=[];Array.isArray(a)&&(l=a,a={});a.TAG_SRC=window.blackcrowTagSrc||"JS";function _m(){try{if(window?.blackcrowBundleName)return window.blackcrowBundleName;if(document?.currentScript instanceof HTMLScriptElement)return new URL(document.currentScript.src)?.pathname?.split("/")?.pop()?.split(".")[0]||"";throw new Error("Failed to obtain bundle name from current script or window")}catch(t){return Cn(T(`Error determining bundle name dynamically: ${t}`)),"blackcrow"}}var m=_m();a.BUNDLE_NAME=m;a.BUILD_NUMBER="15641";window.blackcrow=a;window.intent=a;var f=a.SITE_NAME||"mindfuladvantage",sa="init.blackcrow.ai";if(document.currentScript&&document.currentScript instanceof HTMLElement){let e=document.currentScript.src.split("/")[2];if(!e)throw new Error("Failed to extract CDN host from tag");sa=e}else a.TAG_SRC==="ShopifyAppExtension"&&(sa="shopify-init.blackcrow.ai");var p=`https://${sa}/`;function wm(t){let e=!0;return t.skipNotify&&(e=!1),t.message.indexOf("com.gargoylesoftware.htmlunit")!==-1&&(e=!1),e}function Em(t,e){let o=`BlackCrow${e?` ${e}`:""} ${t.stack}`;globalThis.console&&(globalThis.console.error?globalThis.console.error(o):globalThis.console.log(o))}function bm(t){let e=new Error(t);return ie(e.stack,1)}function Rn(t,e={}){if(!t)return;t.stack||(t.stack=bm(t.msg)),!1&&Em(t,e.appName),wm(t)&&typeof Rn.sendErrorToServer=="function"&&Rn.sendErrorToServer(t)}Rn.sendErrorToServer=Cn;a.error=Rn;function Ln(t,e){let r=document.createElement("link");r.rel=e,r.href=t,document.head.appendChild(r)}a.TAG_SRC!=="ShopifyAppExtension"&&!window.blackcrowpreconnected&&(Ln("https://api.blackcrow.ai/","preconnect"),Ln("https://api.blackcrow.ai/","dns-prefetch"),Ln(p,"preconnect"),Ln(p,"dns-prefetch"),window.blackcrowpreconnected=1);function P(t,e,r){if(t)if(typeof t.length<"u"){for(let o=0,n=t.length;o<n;o+=1)if(e.call(r,t[o],o,t)===!1)return}else{let o=Object.keys(t);for(let n=0,i=o.length;n<i;n+=1)if(e.call(r,t[o[n]],o[n],t)===!1)return}}var Sm="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var Pu=(t=21)=>{let e="",r=t;for(;r--;)e+=Sm[Math.random()*64|0];return e};var xu=Pu;function vt(t,e){if(v())return window.blackcrow.cookie.get(t);e=e||document.cookie;let r={};return P(e.split(/\s?;\s?/),o=>{let n=o.split(/\s?=\s?/);r[n.shift().trim()]=n.join("=").trim()}),r[t]}async function I(t,e){try{return v()?await globalThis.browser.cookie.get(t):vt(t,e)}catch{}return null}var ca="_bcai_h",Do="_bcai_i",ua="_bcai_e",Dn="_bcai_t",Tu="_bcai_up",da="_bcai_lpi",fa="_bcai_vn",pa="_bcai_vs",Fn="_bcai_v",Fo="_bcai_pu",la="_bcai_lpv",ma="_bcai_spv",$n="_bcai_em",ga="_bcai_fn",ha="_bcai_ln",Mn="_bcai_ph",Au="_bcai_koc",Iu="_bcai_khs",ku="_bcai_kps",ya="_bcai_kid",Ou="_bcai_pwo_ebc",$o="_bcai_isn",va="_bcai_fcpes",Bn="_bcai_fbcapi",_a="_bcai_aos_pes",Yr="_bcai_urr",Cu="fbclid",Yt="_fbc",_t="_fbp",Un="__kla_id";var Mo;function wa(){if(Mo)return Mo;let t=document.location.hostname.split("."),e,r=t.length;if(r===1)Mo="";else{for(;r>2;){r-=1,e=t.slice(1).join("."),document.cookie=`${Dn}=1; domain=${e}`;let o=vt(Dn);if(document.cookie=`${Dn}=1; expires=Thu, 01 Jan 1970 00:00:00 GMT; domain=${e}`,!o)break;t.shift()}Mo=t.join(".")}return Mo}function X(t,e,r){try{let o;if(r){let i=new Date;i.setTime(i.getTime()+r*60*1e3),o=`;expires=${i.toUTCString()}`}else o="";let n=`${t}=${e}${o};domain=${wa()};path=/`;v()?(browser.cookie.set(n),window.blackcrow.cookie.set(t,e)):document.cookie=n}catch{}}var _r;function Dt(){return _r||(_r=vt(Do),_r||(_r=xu(),X(Do,_r,1051200)),_r)}function Pm(t,e){var r,o,n,i,c,s,u,g,h,S;for(r=t.length&3,o=t.length-r,n=e,c=3432918353,u=461845907,S=0;S<o;)h=t.charCodeAt(S)&255|(t.charCodeAt(++S)&255)<<8|(t.charCodeAt(++S)&255)<<16|(t.charCodeAt(++S)&255)<<24,++S,h=(h&65535)*c+(((h>>>16)*c&65535)<<16)&4294967295,h=h<<15|h>>>17,h=(h&65535)*u+(((h>>>16)*u&65535)<<16)&4294967295,n^=h,n=n<<13|n>>>19,i=(n&65535)*5+(((n>>>16)*5&65535)<<16)&4294967295,n=(i&65535)+27492+(((i>>>16)+58964&65535)<<16);switch(h=0,r){case 3:h^=(t.charCodeAt(S+2)&255)<<16;case 2:h^=(t.charCodeAt(S+1)&255)<<8;case 1:h^=t.charCodeAt(S)&255,h=(h&65535)*c+(((h>>>16)*c&65535)<<16)&4294967295,h=h<<15|h>>>17,h=(h&65535)*u+(((h>>>16)*u&65535)<<16)&4294967295,n^=h}return n^=t.length,n^=n>>>16,n=(n&65535)*2246822507+(((n>>>16)*2246822507&65535)<<16)&4294967295,n^=n>>>13,n=(n&65535)*3266489909+(((n>>>16)*3266489909&65535)<<16)&4294967295,n^=n>>>16,n>>>0}var xm=4294967295,Tm=108;function Ea(t){return Pm(t||"",Tm)/xm}function oe(t={}){let e=vt("_shopify_y")||Dt(),r=t.name||"",{force:o,allocations:n}=t,i=Ea(`${e}${r}`);if(o)return n.find(g=>g.name===o)?.value;let c=0,s=[];P(t.allocations,g=>{if(s.push({min:c,max:c+g.percent,value:g.value}),c+=g.percent,c>1)throw new Error("Bucket allocation exceeds 100%")});let u;return P(s,g=>i>=g.min&&i<g.max?(u=g.value,!1):!0),u}function Oe(){return document.referrer}function Xr(){return document.title}function Am(t,e){let r=e.split("[");return r.length>1?t&&t[r[0]]&&t[r[0]][parseInt(r[1],10)]:t&&t[e]}function E(t,e){if(!(!t||!e||typeof e!="string"))return e.split(".").reduce(Am,t)}function wr(t,e,r,o,n){!t||!e||typeof e!="string"||(e.indexOf(".")!==-1?(e=e.split("."),wr(t,e.shift(),r,e,n)):!o||o.length===0?(!n||!Object.prototype.hasOwnProperty.call(t,e))&&(t[e]=r):((!n||!Object.prototype.hasOwnProperty.call(t,e))&&(t[e]=t[e]||{}),wr(t[e],o.shift(),r,o,n)))}a.storage=a.storage||{};function Im(t,e){let r=a.storage[t].audience;typeof r=="object"&&e?.audience===!1?a.storage[t]={audience:r}:a.storage[t]={}}function ae(t){t&&(a.storage[t]=a.storage[t]||{});function e(){return a.storage[t]}return{clear:r=>{t==="bound_events"&&r?Im(t,r):a.storage[t]={}},getAll:()=>e()||{},get:r=>E(e(),r),set:(r,o)=>{let n=e();typeof r=="string"?wr(n,r,o):P(r,(i,c)=>{wr(n,c,i)})},push:(r,o)=>{let n=e(),i=E(n,r);Array.isArray(i)?i.push(o):wr(n,r,[o])}}}var ba=ae("page"),Sa="history";function km(t,e){return typeof e=="function"?e.toString().replace(/\s+/g," "):e}function Nu(){return console.group(`${d} history`),P(ba.get(Sa),t=>{console.groupCollapsed(t.name),console.log("data",JSON.stringify(t.data,km,4)),console.log(t.source),console.groupEnd()}),console.groupEnd(),""}function Ru(){return ba.get(Sa)}function se(t,e){let r=new Error("");r.name="source",r.stack=ie(r.stack,1),ba.push(Sa,{name:t,data:e,source:r})}var Om=Object.prototype.toString,Pa=Array.prototype.slice;function b(t,...e){return t=t||{},P(e,r=>{P(r,(o,n)=>{let i=Om.call(o).split(" ").pop();if(i!=="Undefined]"){if(!o||o===o.window||o.nodeType||o._isVue){t[n]=o;return}if(i==="Object]"){t[n]=t[n]||{},b(t[n],o);return}if(i==="Array]"){t[n]=t[n]||[],t[n]=Pa.call(t[n]).concat(o);return}if(i==="NodeList]"||i==="HTMLCollection]"){t[n]=t[n]||[],t[n]=Pa.call(t[n]).concat(Pa.call(o));return}t[n]=o}})},this),t}window.blackcrow.pushedData=window.blackcrow.pushedData||{};function xa(){let t=window.blackcrow.pushedData;t&&t.winLocation!==O()&&(window.blackcrow.pushedData={})}function Vn(t){b(window.blackcrow.pushedData,t,{winLocation:O()})}function Wn(t){window.blackcrow.pushedData={...t,winLocation:O()}}function R(t){return E(window.blackcrow.pushedData,t)}var Ta=ae("events_api_response"),Aa=ae("api_config");function Qr(t){let e=new Error(t);return e.name="SequencingError",e.status="warn",e.stack=ie(e.stack,1),e}var Lu=!1,Du=!1;function Fu(t,e){if(t){let r=e.get(`data.${t}`);if(typeof r=="string"){let o=r.toLowerCase();return o==="off"||o==="false"?!1:r}return r}return e.get("data")}function Ia(t){Aa.set("data",t),Du=!0}function M(t){return Du===!1&&a.error(new Qr("Attempting to access apiConfig before it has been set!")),Fu(t,Aa)}function Bo(t){Ta.set("data",t),Lu=!0}function ka(t){return Lu===!1&&a.error(new Qr("Attempting to access events api response before it has been set!")),Fu(t,Ta)}function Oa(){return!!ka("history_id")}function Cm(t){let e=new Error(t);return e.name="URIDecodingError",e.status="warn",e.stack=ie(e.stack,1),e}function be(t){let e={};if(typeof t=="string"&&t.length){let r=t.split("?");r.shift(),r=r.join("?"),r=r.split("#")[0],P(r.split("&"),o=>{let n=o;try{n=decodeURIComponent(n)}catch{a.error(new Cm(`Unable to decode URI component: ${n}`))}let i=n.indexOf("="),c=i>0?[n.slice(0,i),n.slice(i+1)]:[n];typeof c[1]<"u"&&(e[c[0]]=c[1])})}return e}function ce(t,e){let r=e?be(e):be(O()),o=Object.keys(r).find(n=>n?.toLowerCase()===t?.toLowerCase());return r[o]}var $u="config.visitor.query_string";function Nm(t){let e=t?E(t,$u):M($u);return e?{param:e.param,separator:e.separator,index:e.index}:{}}function Rm(t){let e=t.param;if(e)return ce(e)}function Lm(t,e){let r=e.separator,o=e.index;return r&&o?t.split(r)[o]||void 0:t}function Mu(t){let e=Nm(t),r=Rm(e);if(r)return Lm(r,e)}var Ca,Na;function Dm(){let t,e=window.GoogleAnalyticsObject?window[window.GoogleAnalyticsObject]:window.ga;return e&&typeof e.getAll=="function"&&P(e.getAll(),r=>{try{let o=r.get("clientId");if(o)return t=o,!1}catch{}}),t}async function Fm(){try{if(typeof Na<"u")return Na;let t,e=await I("_ga");if(e){let r=e.split(".");r.shift(),r.shift(),t=r.join(".")}return Na=t,t}catch(t){a.error(t);return}}async function Xt(t){try{if(Ca)return Ca;let e=R("google_id")||Mu(t)||window.gaGlobal&&window.gaGlobal.vid||Dm()||await Fm();return Ca=e,e}catch(e){a.error(e);return}}var Bu="blackcrow",Uu="cookie",Vu="global",Wu="google",Ra="pushed_data";var Er,Qe=Bu.toUpperCase(),et=Fn,qn=!1;function qu(t,e,r){X(Fn,t,1051200),X(pa,e,1051200),X(fa,r,1051200)}async function tt(){if(Er)return{id:Er,source:Qe,name:et,fallback:qn};if(Er=await I(Fn),Er)return Qe=await I(pa)||Qe,et=await I(fa)||et,qu(Er,Qe,et),{id:Er,source:Qe,name:et,fallback:qn};let t=M("config.visitor.id_source"),e=M("config.visitor.id_name"),r=R("visitor_id");if(r&&(Qe=Ra.toUpperCase(),et="visitor_id"),t===Uu){let o=await I(e);o&&(r=o,Qe=t.toUpperCase(),et=e)}else if(t===Vu){let o=E(window,e);o&&(r=o,Qe=t.toUpperCase(),et=e)}else if(t===Ra){let o=R(e);o&&(r=o,Qe=t.toUpperCase(),et=e)}else if(t===Wu){let o=await Xt();o&&(r=o,Qe=t.toUpperCase(),et=e)}return r||(r=Dt(),qn=!0),Er=r,qu(r,Qe,et),{id:r,source:Qe,name:et,fallback:qn}}async function $m(t){try{if(t.overrideSampling||oe({name:"error_sampling",allocations:[{percent:.1,value:!0}]})){let r=await tt();he(t.message,{status:t.status||"error","error.kind":t.name,"error.message":t.message,"error.stack":t.stack,"usr.id":r.id,"view.url":R("page_url")||O(),"view.referrer":R("page_referrer_url")||Oe()})}se(t.name,t)}catch{}}function Gu(){a.error.sendErrorToServer=$m}function Mm(t){let e={name:"other",major:0,minor:0};if(/googlebot/.test(t)||/adsbot/.test(t)||/bingbot/.test(t)||/bingpreview/.test(t)||/slurp/.test(t)||/storebot/.test(t)||/spider/.test(t)||/crawler/.test(t)||/yandexbot/.test(t)||/ptst[ \/]/.test(t)||/externalhit/.test(t))return e.name="bot",e;let o=/(msie) ([\w.]+)/.exec(t)||/(ucbrowser)[ \/]([\w.]+)/.exec(t)||/(miuibrowser)[ \/]([\w.]+)/.exec(t)||/(opera mini)[ \/]([\w.]+)/.exec(t)||/(opr)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(t)||/(firefox)[ \/]([\w.]+)/.exec(t)||/(trident)(?:.*? rv:([\w.]+))?/.exec(t)||/(edg)[ \/]([\w.]+)/.exec(t)||/(edge)[ \/]([\w.]+)/.exec(t);if(o){o[1]==="opr"?o[1]="opera":o[1]==="trident"?o[1]="msie":o[1]==="edg"&&(o[1]="edge"),e.name=o[1].replace(/\s+/,"");let n=(o[2]||"").split(/\.|-|_/);e.major=parseInt(n[0],10)||0,e.minor=parseInt(n[1],10)||0}return e}function Bm(t){return!!(t.match(/ipad/)||t.match(/android/)&&!t.match(/mobi|mini|fennec/)||t.match(/macintosh/)&&window.navigator.maxTouchPoints>1)}function Um(t){return!!t.match(/ip(hone|od)|android.+mobile|windows (ce|phone)|blackberry|bb10|symbian|webos|firefox.+fennec|opera m(ob|in)i|tizen.+mobile|polaris|iemobile|lgtelecom|nokia|sonyericsson|dolfin|uzard|natebrowser|ktf;|skt;/)}function Vm(t){return Um(t)?"mobile":Bm(t)?"tablet":"desktop"}function br(t){t=t||"";let e=t.toLowerCase();return{browser:Mm(e),deviceType:Vm(e)}}function wt(t){let e=new Error(t);return e.name="NotSupportedError",e.status="warn",e.stack=ie(e.stack,1),e}function Wm(){try{return!new Error("")}catch(t){return t}}function qm(){let t=Wm();if(t)throw t.name="NotSupportedError",t.status="warn",t.message="Missing feature: errorConstructor",t}function Gm(){let{browser:t}=br(Ee());if(typeof t=="object"){let e=t.name,r=t.major;if(e==="bot"||e==="msie"||e==="edge"&&r<15||e==="firefox"&&r<54||e==="chrome"&&r<42||e==="safari"&&r<10||e==="ucbrowser"||e==="miuibrowser"||e==="opera"&&r<38||e==="operamini")return!1}return!0}function ju(){return ce("bcai-bypass")==="true"}function Hu(){if(!Gm())throw new wt("Browser not supported");qm()}function Me(){return!!E(window,"Shopify")}function La(){return Me()&&$e()?.includes("products")}function zu(){return Me()&&$e()?.includes("/search")}function jm(){return Me()&&$e()==="/"}function Ju(){return Me()&&$e()?.includes("/cart")}function Zu(){return!!E(window,"Shopify.Checkout")}function Da(){let t=O();return t&&t.includes("/checkouts")}function Fa(){let t=O();return t&&(t.includes("/thank_you")||t.includes("/purchase/thanks")||t.includes("/thank-you"))}function Hm(){let t=E(window,"Shopify.Checkout.isOrderStatusPage"),e=E(window,"Shopify.checkout");return t!==void 0||e!==void 0}function eo(){return E(window,"Shopify.Checkout.currency")||E(window,"cart_json.currency")||E(window,"Shopify.currency.active")||E(window,"afterpay_shop_currency")}function Gn(){return E(window,"Shopify.Checkout.totalPrice")?.toString()}function jn(){if(!Me())return;let t=E(window,"Shopify.Checkout.step");if(t)switch(t){case"payment_method":return"payment";case"shipping_method":return"shipping";case"contact_information":return"contact";case"thank_you":return"confirmation";default:return t}return Hm()?"order_status":La()?"products":jm()?"index":$e()}function Uo(){return globalThis?.Shopify?.routes?.root}function $a(){return v()&&E(window,"shopifyEvent.name")==="checkout_completed"}function Ma(){return v()&&E(window,"shopifyEvent.name")==="payment_info_submitted"}function Ku(){return v()&&E(window,"shopifyEvent.name")==="page_viewed"}function Hn(){return $a()||Ma()?window?.shopifyCheckout:{}}var zm="https://init.blackcrow.ai/",Jm="https://shopify-init.blackcrow.ai/";function Ba(){let t="mindfuladvantage.js"?.replace(".js",""),e=p;e?.includes("init.blackcrow.ai")||(e=Me()?Jm:zm,a.error(T(`mindfuladvantage.js is not hosted on the blackcrow CDN but on ${p}.`)));let r="";try{v()&&window?.blackcrowBundleName?r=window?.blackcrowBundleName||"":document?.currentScript instanceof HTMLScriptElement&&(r=new URL(document.currentScript.src)?.pathname?.split("/")?.pop()?.split(".")[0]||""),t!==r&&a.error(T(`Dynamic bundle name does not match actual: ${t} vs ${r}`))}catch(o){a.error(T(`Error determining bundle name dynamically: ${o}`))}return`${e}config/${t}.json`}async function Yu(){let t=await fetch(Ba(),{method:"GET"});if(!t.ok)throw new Error(`${t.status} ${t.statusText}`);let e=await t.json(),r=atob(e.data);return JSON.parse(r)}function Vo(t,e,r){if(t){let n=(t.options||{}).origEvent||{};if(clearTimeout(n.timeout),typeof t.callback=="function"&&!n.timeoutReached){try{t.callback(e)}catch(i){a.error(i)}typeof r=="function"&&r()}}}var Zm=ae("bound_events"),Km=ae("triggered_events");function q(t,e,r,o={}){let n={appName:t,eventName:e,callback:r,options:o};Zm.push(`${t}.${e}`,n),P(Km.get(`${t}.${e}`),i=>{Vo(n,i.data,i.onExec)})}function Be(t,e,r=!0,o="error"){let n=new Error(t);return n.name=`${e||""}RequestError`,n.status=o,n.skipNotify=r,n.stack=ie(n.stack,1),n}function ue(t,...e){return new Promise(r=>{setTimeout(r,t,[...e])}).catch(r=>a.error(r))}function zn(t,e,r){return function(...n){try{return t.apply({},n)}catch(i){r&&r.interval&&clearInterval(r.interval),a.error(i,{appName:e})}}}function Ym(t,e,...r){return setTimeout.apply(globalThis,[zn(t,this.appName),e].concat(r))}function Xm(t,e,...r){let o={},n=setInterval.apply(globalThis,[zn(t,this.appName,o),e].concat(r));return o.interval=n,n}var Ua=class{constructor(e,r){this.asyncFn=e,this.interval=r,this.running=!1}start(){this.running||(this.running=!0,this.cycle())}stop(){this.running&&(this.running=!1)}async cycle(){try{await this.asyncFn()}catch{}try{await ue(this.interval),this.running&&this.cycle()}catch(e){a.error(e),this.stop()}}};function Qm(t,e,r,o){let n=r.wrapped||zn(r,this.appName);r.wrapped=n,t.addEventListener?t.addEventListener(e,n,o):t.attachEvent&&t.attachEvent(e,n)}function eg(t,e,r,o){r?t.removeEventListener(e,r.wrapped,o):t.removeEventListener(e)}var _={fn:zn,addListener:Qm,removeListener:eg,setInterval:Xm,SafeAsyncInterval:Ua,setTimeout:Ym};function Ge(t,e,r,o){function n(s){let u=new Be(s.message,e.servletName);a.error(u,{customDimensions:{url:t}}),typeof o=="function"&&_.fn(o)(u)}function i(s){if(typeof s!="object"){n(new Error("JSON is not an object"));return}typeof r=="function"&&_.fn(r)(s||{})}function c(s){s.json().then(_.fn(i)).catch(u=>{n(new Error(`Invalid JSON ${u.message}`))})}Z(t,e,c,n)}function Va(){let t=Math.round(On());if(!t||t<1)return"0";if(t<10)return"10";let e="0";return P(`${t}`,(r,o)=>{o===0?e=r:e+="0"}),e}var Wa=document.documentElement,Xu=window.screen,Qu=Math.max;function ed(){let t=window?.innerHeight+window?.scrollY||0;return Qu(Wa?.offsetHeight,Wa?.scrollHeight,t)}function td(){return v()?window.outerHeight:Xu?.height}function rd(){return v()?window.outerWidth:Xu?.width}function Jn(){return Qu(window.pageYOffset,Wa?.scrollTop)}async function ye(t){try{let e=v()?await globalThis.browser.localStorage.get(t):window.localStorage.getItem(t);return e?JSON.parse(e):null}catch{}return null}async function z(t){try{if(v()){let e=await globalThis.browser.sessionStorage.getItem(t);return JSON.parse(e)}return JSON.parse(window.sessionStorage.getItem(t))}catch{}return null}var qa,Ga;async function tg(){try{if(typeof Ga<"u")return Ga;let t,e=await I(_t);if(e){let r=e.split(".");r.shift(),r.shift(),t=r.join(".")}return Ga=t,t}catch(t){a.error(t);return}}async function od(){try{if(qa)return qa;let t=R("facebook_id")||await tg();return qa=t,t}catch(t){a.error(t);return}}var ja;function rg(){let t=E(window,"Shopify.checkout.customer_id")||E(window,"ShopifyAnalytics.meta.page.customerId")||E(window,"__st.cid");if(t)return t.toString()}function nd(){if(ja)return ja;let t=rg();return ja=t,t}var Ha;async function og(){try{return JSON.parse(window.atob(await I(Un))).$exchange_id}catch{return}}async function to(){try{if(Ha)return Ha;let t=await og();return Ha=t,t}catch(t){a.error(t);return}}function id(){return window?.ju_config?.ju_vid}function ad(){return window?.bouncex?.cookie?.hardID}function sd(){return window?.bouncex?.cookie?.softID}function cd(){return window?.edgemesh?.id}function Ue(t,e){try{e&&(v()?(window.blackcrow.localStorage.set(t,JSON.stringify(e)),browser.localStorage.setItem(t,JSON.stringify(e))):window.localStorage.setItem(t,JSON.stringify(e)))}catch{}}function Qt(t){return`${Math.random().toString(36).substring(2,3)}${btoa(t)}`}function Sr(t){return t?atob(t.substring(1)):void 0}function Wo(t){try{return document.querySelectorAll(`:is(${t})`)}catch{}try{return document.querySelectorAll(`:matches(${t})`)}catch{}try{return document.querySelectorAll(`:-webkit-any(${t})`)}catch{}try{return document.querySelectorAll(`:-moz-any(${t})`)}catch{return[]}}function ud(t){_.addListener(window,"message",e=>{if(e.origin&&e.origin.indexOf(".attn.tv")>0){let r=e.data.__attentive||{};r&&r.email&&t(r.email)}})}function dd(t){_.addListener(window,"postscriptPopup",e=>{if(e.detail.type==="formSubmit"){let{email:r}=e.detail.values;r&&t(r)}})}function fd(t){let e=document.getElementById("continue_button"),r=document.querySelectorAll("input[type=email]");e&&r&&_.addListener(e,"click",()=>{t(r[0]&&r[0].value)})}function Zn(){return E(window,"ShopifyCustomer.email")||E(window,"Shopify.checkout.email")||E(window,"Shopify.Checkout.customer.email")}function pd(){return E(window,"userProperties.email")}function ld(){let t=E(window,"_learnq");if(t&&typeof t.identify=="function")return t.identify().$email}function Ka(t){if(t)return t.trim()}function Ya(t){return new RegExp(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(t)}function qo(t){let e=Ka(t);return e&&Ya(e)?e:void 0}function Pr(t){let e=qo(t);return e?Qt(e):void 0}function K(t){let e=Pr(t);e&&Ue($n,e)}function za(t,e=()=>{}){t.value&&e(t.value)}function ng(t,e){let r=t.textContent||t.innerText;return r&&(r=r.toLowerCase()),r&&r.indexOf(e.toLowerCase())!==-1}function Ja(t){return ng(t,"email")}function ig(t){if(t.labels){if(Array.from(t.labels).some(r=>Ja(r)))return!0}else if(t.id&&Array.from(document.getElementsByTagName("label")).some(r=>r.htmlFor===t.id&&Ja(r)))return!0;if(t.parentNode){let e=t.parentNode;return e.tagName.toLowerCase()==="label"&&Ja(e)}return!1}function ag(t){return Array.from(t).filter(r=>ig(r))}var Za='input[type="email"], input[autocomplete~="email"], input[placeholder~="email" i], input[type="text"][id*="email" i], input[type="text"][name*="email" i]';function Xa(){let t=Wo(Za);if(!t.length){let e=document.querySelectorAll('input[type="text"]');e.length&&(t=ag(e))}return t}function Kn(t=e=>{}){let e=Xa();P(e,r=>{za(r,t)}),_.addListener(window,"focusout",r=>{let o=r.target;o.matches(Za)||Array.isArray(e)&&e.includes(o)?za(o,t):o.shadowRoot&&o.shadowRoot.querySelectorAll(Za).forEach(n=>{za(n,t)})},!0)}function md(t){let e=Zn()||pd()||ld();e&&t(e),ud(r=>{t(r)}),dd(r=>{t(r)}),fd(r=>{t(r)}),Kn(r=>{t(r)})}function gd(t=()=>{}){let e=Zn()||pd()||ld();return e?(K(e),t()):(ud(r=>{K(r)}),fd(r=>{K(r)}),Kn(r=>{K(r),t()}),dd(r=>{K(r)})),e}async function de(t=!0){try{let e=await ye($n)||await I($n);return e?t?Sr(e):e:void 0}catch(e){a.error(e);return}}function er(t,e){var r=(t&65535)+(e&65535),o=(t>>16)+(e>>16)+(r>>16);return o<<16|r&65535}function sg(t,e){return t<<e|t>>>32-e}function Yn(t,e,r,o,n,i){return er(sg(er(er(e,t),er(o,i)),n),r)}function Se(t,e,r,o,n,i,c){return Yn(e&r|~e&o,t,e,n,i,c)}function Pe(t,e,r,o,n,i,c){return Yn(e&o|r&~o,t,e,n,i,c)}function xe(t,e,r,o,n,i,c){return Yn(e^r^o,t,e,n,i,c)}function Te(t,e,r,o,n,i,c){return Yn(r^(e|~o),t,e,n,i,c)}function cg(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;var r,o,n,i,c,s=1732584193,u=-271733879,g=-1732584194,h=271733878;for(r=0;r<t.length;r+=16)o=s,n=u,i=g,c=h,s=Se(s,u,g,h,t[r],7,-680876936),h=Se(h,s,u,g,t[r+1],12,-389564586),g=Se(g,h,s,u,t[r+2],17,606105819),u=Se(u,g,h,s,t[r+3],22,-1044525330),s=Se(s,u,g,h,t[r+4],7,-176418897),h=Se(h,s,u,g,t[r+5],12,1200080426),g=Se(g,h,s,u,t[r+6],17,-1473231341),u=Se(u,g,h,s,t[r+7],22,-45705983),s=Se(s,u,g,h,t[r+8],7,1770035416),h=Se(h,s,u,g,t[r+9],12,-1958414417),g=Se(g,h,s,u,t[r+10],17,-42063),u=Se(u,g,h,s,t[r+11],22,-1990404162),s=Se(s,u,g,h,t[r+12],7,1804603682),h=Se(h,s,u,g,t[r+13],12,-40341101),g=Se(g,h,s,u,t[r+14],17,-1502002290),u=Se(u,g,h,s,t[r+15],22,1236535329),s=Pe(s,u,g,h,t[r+1],5,-165796510),h=Pe(h,s,u,g,t[r+6],9,-1069501632),g=Pe(g,h,s,u,t[r+11],14,643717713),u=Pe(u,g,h,s,t[r],20,-373897302),s=Pe(s,u,g,h,t[r+5],5,-701558691),h=Pe(h,s,u,g,t[r+10],9,38016083),g=Pe(g,h,s,u,t[r+15],14,-660478335),u=Pe(u,g,h,s,t[r+4],20,-405537848),s=Pe(s,u,g,h,t[r+9],5,568446438),h=Pe(h,s,u,g,t[r+14],9,-1019803690),g=Pe(g,h,s,u,t[r+3],14,-187363961),u=Pe(u,g,h,s,t[r+8],20,1163531501),s=Pe(s,u,g,h,t[r+13],5,-1444681467),h=Pe(h,s,u,g,t[r+2],9,-51403784),g=Pe(g,h,s,u,t[r+7],14,1735328473),u=Pe(u,g,h,s,t[r+12],20,-1926607734),s=xe(s,u,g,h,t[r+5],4,-378558),h=xe(h,s,u,g,t[r+8],11,-2022574463),g=xe(g,h,s,u,t[r+11],16,1839030562),u=xe(u,g,h,s,t[r+14],23,-35309556),s=xe(s,u,g,h,t[r+1],4,-1530992060),h=xe(h,s,u,g,t[r+4],11,1272893353),g=xe(g,h,s,u,t[r+7],16,-155497632),u=xe(u,g,h,s,t[r+10],23,-1094730640),s=xe(s,u,g,h,t[r+13],4,681279174),h=xe(h,s,u,g,t[r],11,-358537222),g=xe(g,h,s,u,t[r+3],16,-722521979),u=xe(u,g,h,s,t[r+6],23,76029189),s=xe(s,u,g,h,t[r+9],4,-640364487),h=xe(h,s,u,g,t[r+12],11,-421815835),g=xe(g,h,s,u,t[r+15],16,530742520),u=xe(u,g,h,s,t[r+2],23,-995338651),s=Te(s,u,g,h,t[r],6,-198630844),h=Te(h,s,u,g,t[r+7],10,1126891415),g=Te(g,h,s,u,t[r+14],15,-1416354905),u=Te(u,g,h,s,t[r+5],21,-57434055),s=Te(s,u,g,h,t[r+12],6,1700485571),h=Te(h,s,u,g,t[r+3],10,-1894986606),g=Te(g,h,s,u,t[r+10],15,-1051523),u=Te(u,g,h,s,t[r+1],21,-2054922799),s=Te(s,u,g,h,t[r+8],6,1873313359),h=Te(h,s,u,g,t[r+15],10,-30611744),g=Te(g,h,s,u,t[r+6],15,-1560198380),u=Te(u,g,h,s,t[r+13],21,1309151649),s=Te(s,u,g,h,t[r+4],6,-145523070),h=Te(h,s,u,g,t[r+11],10,-1120210379),g=Te(g,h,s,u,t[r+2],15,718787259),u=Te(u,g,h,s,t[r+9],21,-343485551),s=er(s,o),u=er(u,n),g=er(g,i),h=er(h,c);return[s,u,g,h]}function ug(t){var e,r="",o=t.length*32;for(e=0;e<o;e+=8)r+=String.fromCharCode(t[e>>5]>>>e%32&255);return r}function dg(t){var e,r=[];for(r[(t.length>>2)-1]=void 0,e=0;e<r.length;e+=1)r[e]=0;var o=t.length*8;for(e=0;e<o;e+=8)r[e>>5]|=(t.charCodeAt(e/8)&255)<<e%32;return r}function fg(t){return ug(cg(dg(t),t.length*8))}function pg(t){var e="0123456789abcdef",r="",o,n;for(n=0;n<t.length;n+=1)o=t.charCodeAt(n),r+=e.charAt(o>>>4&15)+e.charAt(o&15);return r}function lg(t){return unescape(encodeURIComponent(t))}function mg(t){return fg(lg(t))}function gg(t){return pg(mg(t))}function Qa(t){return gg(t)}function es(t){return(M("experiments")||[]).find(r=>r.name===t)||{}}function ts(t){let e=es(t);if(!e.name)return e;let r=be(O());function o(i,c){let s,u;if(Array.isArray(i)&&i.length&&i[0].value&&typeof i[0].percent=="number")s=`${t}_${c}`,u=i;else if(i.allocations){let g=i.name||c;s=`${t}_${g}`,u=i.allocations}if(s&&u){let g=t,h=i.short_name||c;return oe({name:s,allocations:u,force:r[`bcai_${g}_${h}`]})}return i}function n(i,c){if(!i)return i;let s=Array.isArray(i)?[]:{},u;return Object.keys(i).forEach(g=>{let h=c?`${c}_${g}`:g;u=o(i[g],h),s[g]=typeof u=="object"?n(u,h):u}),s}return{name:e.name,active:e.active,data:n(e.data)}}async function rs(){try{if(ts("pwo_additional_context")?.active){let e=await de();if(e)return Qa(`${e}bcai${f}`)}return}catch(t){a.error(t);return}}function hd(){return window?.__fudge__?.deviceId}var yd=t=>async()=>{try{return R(t)||await z(t)||await ye(t)||await I(t)}catch(e){a.error(e);return}},Go=t=>async()=>{try{return await I(t)}catch(e){a.error(e);return}},ve=(t,e)=>{let r;return async()=>{try{return r=r||await e(),{platform:t,id:r}}catch(o){a.error(o);return}}},hg=ve("fa",od),yg=ve("ga",Xt),vg=ve("cdp",yd("cdp_id")),_g=ve("shop_cid",nd),wg=ve("shop_aid",Go("_shopify_y")),Eg=ve("kl_cid",to),bg=ve("attv_cid",Go("__attentive_id")),Sg=ve("ju_cid",id),Pg=ve("bx_hid",ad),xg=ve("bx_sid",sd),Tg=ve("tab_cid",yd("taboola global:user-id")),Ag=ve("bc_cid",Go(Do)),Ig=ve("_bc_i",Dt),kg=ve("_bt_uid",Go("tag_user_id")),Og=ve("_bc_em",rs),Cg=ve("edme_id",cd),Ng=ve("fdg_id",hd),Rg=ve("_bcai_z",Go("_bcai_z"));async function os(){try{return[await hg(),await yg(),await vg(),await _g(),await wg(),await Eg(),await bg(),await Tg(),await Ag(),await Ig(),await Sg(),await Pg(),await xg(),await kg(),await Og(),await Cg(),await Ng(),await Rg()]}catch(t){return a.error(t),[]}}var ns;async function is(){try{return ns||await I(ca)||void 0}catch(t){return a.error(t),ns||void 0}}function vd(t){t&&(ns=t,X(ca,t,1051200))}async function _d(){try{let e=(await is())?.split("_",3);if(e)return{page_correlation_id:e[0],session_id:e[1]};throw new Qr("Attempted to parse historyId before it has been set!")}catch(t){a.error(t);return}}var jo=ae("page"),Lg={page:{ignored:!1,log_purchase:!1}};function wd(t){return{page:{ignored:t.ignored,log_purchase:t.log_purchase}}}function Ed(t={},e){let r=R("page_id"),o=Lg;r!==void 0&&t?P(t.filter(s=>s.pageName),s=>{if(s.pageName===r)return o=wd(s),!1}):r===void 0&&t&&P(t.filter(s=>s.pattern),s=>{try{let u=e.match(s.pattern);if(u){if(r=s.pageName,o=wd(s),u.length>1)for(let g=1;g<u.length;g+=1)r=r.replace(`$${g}`,u[g]);return!1}}catch{}}),r||(r="other");let n=jo.get("lastUrl"),i=jo.get("lastId"),c=r!==i||e!==n;return jo.set("lastUrl",e),jo.set("lastId",r),{id:r,config:o,isNewPage:c,currentUrl:e,lastUrl:n}}function xr(){return jo.get("lastId")}var as={};function bd(t){as=t}async function Sd(t,e,r){try{let o={},n=Object.keys(as||{});for(let i=0;i<n.length;i+=1){let c=n[i],s=as[c];typeof s=="function"?o[c]=await s(t[c],e,r):typeof s<"u"&&(o[c]=s)}return o}catch(o){return a.error(o),{}}}function Dg(t,e){return e||(t==="_shopify_y"?"aid":t)}async function Fg(t){try{let e,r=t.value,o=t.nameOverride,n=await I(r);return r&&n&&(e={name:Dg(r,o),value:n}),e}catch(e){a.error(e);return}}async function ee(t){try{let e=[];for(let r=0;r<t.length;r+=1){let o=t[r];if(o.source==="cookie"){let i=await Fg(o);i&&e.push(i)}}return e}catch(e){return a.error(e),[]}}function rt(t,e){let r=[];return t&&e&&r.push({name:t,value:e}),r}function Pd(){let t=$e(),e=/.*(\/checkouts\/[a-z]{1,3}\/)/gm;if(t?.match(e))return t=t.replace(e,""),t?.replace(/\/$/,"").split("/")[0];if(t?.includes("/checkouts/"))return t=t.replace(/.*checkouts\//,""),t?.replace(/\/$/,"").split("/")[0]}function $g(){let t="0123456789abcdef";return t.charAt(Math.floor(Math.random()*t.length))}function Ho(t){return new Array(t).fill(".",0,t).map(()=>$g()).join("")}function zo(){return`${Ho(8)}-${Ho(4)}-${Ho(4)}-${Ho(4)}-${Ho(12)}`}function tr(t){return t!==void 0?(t*.01).toLocaleString("en-US",{currency:"USD",minimumFractionDigits:2,useGrouping:!1}):void 0}function Jo(t){return t?typeof t=="string"?tr(t.replace(/\D/g,"")*1):t.toString():"0.00"}async function Zo(t){try{let[e]=await ee(t);return e?.value?{external_id:e.value}:void 0}catch(e){a.error(e);return}}function xd(){let t=document.getElementById("shopify-pay-alternate-title");if(E(window,"ShopifyPay")&&t)return{custom_dimensions:{payment_type:"shop-pay"}};if(E(window,"Shopify.checkout")){let e=document.getElementsByClassName("payment-icon");if(e.length&&e[0].textContent)return{custom_dimensions:{payment_type:e[0].textContent.trim()}}}}function ss(){let t={},e=E(window,"Shopify.checkout"),r=E(window,"shopifyEvent.name");if(r&&b(t,{shopify_event_name:r}),e&&(b(t,{event_id:e.order_id,total_price:Jo(e.total_price),currency:e.presentment_currency,shipping_method:e.shipping_rate?.title,shipping_price:Jo(e.shipping_rate?.price),cart:e.line_items&&e.line_items.map(o=>({id:o.product_id,price:Jo(o.price),quantity:o.quantity,categories:[o.title],msrp:Jo(o.line_price),color:o.variant_title,brand:o.vendor}))}),e.discount)){let o=e.discount;b(t,{discounts:[{code:o.code,discount_amount:o.amount,discount_currency:e.currency,discount_percent:o.rate,applicable:o.applicable,reason:o.reason}]})}return t}function cs(t){return{destination_airport:t.destination_airport,destination_city:t.destination_city,destination_country:t.destination_country,destination_state:t.destination_state,end_date:t.end_date,lodging_id:t.lodging_id,origin_airport:t.origin_airport,rooms:t.rooms,start_date:t.start_date,travelers:t.travelers}}function us(){return R("partner_controlled_experiments")}var Mg=.1,Td=oe({name:"performance_sampling",allocations:[{percent:Mg,value:!0}]});function Ko(t=`${p}js/core/`){try{let e=Kt("resource").find(r=>r.name.includes(t));return e&&e.startTime}catch{a.error(new wt("Unable to get start time: Browser does not support PerformanceResourceTiming interface"));return}}function Bg(){try{let t=Kt("resource").find(e=>e.name.includes("gtm.js"));return t&&t.startTime}catch{a.error(new wt("Unable to get start time: Browser does not support PerformanceResourceTiming interface"));return}}function Ad(){try{let t=Kt("resource").find(e=>e.name.includes(`${p}js/core/`));if(t){let{name:e}=t;if(e.includes("shopify-init"))return"SHOPIFY";if(e.includes("source=gtm"))return"GTM"}return"JS"}catch{a.error(new wt("Unable to get start time: Browser does not support PerformanceResourceTiming interface"));return}}function Ug(){let t=Ko(),e=Ad();if(t&&e==="GTM"){let r=Bg();if(r)return t-r}}function Vg(){try{let t=Kt("resource").find(e=>e.name.includes("https://api.blackcrow.ai/v1/events/view"));return t&&t.startTime}catch{a.error(new wt("Unable to get time to view request: Browser does not support PerformanceResourceTiming interface"));return}}function Id(){if(Td){let t=Ko(),e=Ad()||"unknown",r=e==="GTM"?Ug()||"unknown":"N/A";t&&he(`Initial script load after ${t} ms`,{"script.start_time":t,"script.load_method":e,"script.time_since_gtm_start":r,"view.url":R("page_url")||O(),"view.referrer":R("page_referrer_url")||Oe()})}}function kd(){if(Td){let t=Vg()-Ko();t&&he(`Time to initiate view request: ${t} ms`,{"script.time_to_view":t,"view.url":R("page_url")||O(),"view.referrer":R("page_referrer_url")||Oe()})}}function Od(){return{nb:{active:!!window.Northbeam},tw:{active:!!window.TriplePixel},bt:{active:!!window.edgetag},rb:{active:!!window.Rebuy},np:{active:!!window.fetchNovelSession},yp:{active:!!window.Yotpo},jm:{active:!!window.judgeme},lx:{active:!!window.LOOX},oke:{active:!!window.okeConnectApi}}}var j={VIEW:"view",PURCHASE:"purchase",DELAYED_PURCHASE:"delayed_purchase",BAD_ACTOR_TIMEOUT:"bad_actor_timeout",BAD_ACTOR_BEFOREUNLOAD:"bad_actor_beforeunload",PWO_IMPR:"pwo_impression",PWO_EMAIL_LEAD:"pwo_email_lead",PWO_SMS_LEAD:"pwo_sms_lead",PWO_CLOSE:"pwo_close",PWO_OPEN_ATTEMPT:"pwo_open_attempt",PWO_DECISION:"pwo_decision",PRED_WELCOME_DECISION:"pred_welcome_decision",EXIT_INTENT:"exit_intent",SITE_SPEED_BUCKETING:"site_speed_bucketing",SITE_SPEED_FID_METRIC:"site_speed_fid_metric",SITE_SPEED_LCP_METRIC:"site_speed_lcp_metric"};function Xn(){return{api_client_type:"JS",api_client_version:"15641",api_client_source:aa()}}function Nd(t){_.addListener(window,"message",e=>{if(e.origin&&e.origin.indexOf(".attn.tv")>0){let r=e.data.__attentive||{};r&&r.phone&&t(`+1${r.phone}`)}})}function Rd(t){_.addListener(window,"postscriptPopup",e=>{if(e.detail.type==="formSubmit"){let{phone:r}=e.detail.values;r&&t(r.includes("+")?r:`+${r}`)}})}function Ld(t){let e=document.getElementById("continue_button"),r=document.querySelectorAll("input[type=tel]");e&&r&&_.addListener(e,"click",()=>{if(r[0]){let o=r[0].value;t(o)}})}function Dd(){return E(window,"Shopify.checkout.phone")}function Fd(){let t=E(window,"_learnq");if(t&&typeof t.identify=="function")return t.identify().$phone}function Wg(t){let e=t.match("\\+")?t:`+1${t}`;return e=e.replace(/^(\+)|\D/g,"$1"),e}function qg(t){return new RegExp(/^\+\d{10,14}$/g).test(t)}function Tr(t){let e=Wg(t);return qg(e)?Qt(e):void 0}function fe(t){let e=Tr(t);e&&Ue(Mn,e)}function Cd(t,e=()=>{}){t.value&&e(t.value)}var ds='input[type="tel"], input[autocomplete~="tel"], input[type="text"][id*="phone" i], input[type="text"][name*="phone" i]';function $d(t=()=>{}){let e=Wo(ds);P(e,r=>{Cd(r,t)}),_.addListener(document,"focusout",r=>{let o=r.target;if(o.matches(ds)){let n=o.value;n&&t(n)}else o.shadowRoot&&o.shadowRoot.querySelectorAll(ds).forEach(n=>{Cd(n,t)})},!0)}function Md(t){let e=Dd()||Fd();e&&t(e),Nd(r=>{t(r)}),Rd(r=>{t(r)}),Ld(r=>{t(r)}),$d(r=>{t(r)})}function Bd(t=()=>{}){let e=Dd()||Fd();return e?(fe(e),t()):(Nd(r=>{fe(r)}),Ld(r=>{fe(r)}),$d(r=>{fe(r),t()}),Rd(r=>{fe(r)})),e}async function Ft(t=!0){try{let e=await ye(Mn)||await I(Mn);return e?t?Sr(e):e:void 0}catch(e){a.error(e);return}}function Et(t){let e=R(`custom_${t}`);return typeof e=="object"?Array.isArray(e)?String(e):JSON.stringify(e):e}function Gg(t,...e){return t=t||{},P(e,r=>{P(r,(o,n)=>{(o||o===0||o===!1)&&(t[n]=o)})}),t}function jg(){return{coupon:R("coupon"),shipping_method:R("shipping_method"),shipping_price:R("shipping_price"),total_price:R("total_price"),zip_code:R("zip_code"),custom_1:Et(1),custom_2:Et(2),custom_3:Et(3),custom_4:Et(4),custom_5:Et(5),custom_6:Et(6),custom_7:Et(7),custom_8:Et(8),custom_9:Et(9),custom_10:Et(10),traffic_groups:R("traffic_groups"),partner_controlled_experiments:us(),referrer_source:R("referrer_source"),referrer_medium:R("referrer_medium"),referrer_campaign:R("referrer_campaign"),referrer_term:R("referrer_term"),cart:R("cart"),currency:R("currency"),is_logged_in_user:R("user_is_logged_in"),user_has_subscription:R("user_has_subscription")}}async function Hg(t){try{let e=await tt();return{metadata:Xn(),build:"15641",site_name:f,custom_dimensions:R("custom_dimensions"),device_info:Ee(),device_width:rd(),device_height:td(),page_id:t,page_url:R("page_url")||O(),page_referrer_url:R("page_referrer_url")||Oe(),page_title:R("page_title")||Xr(),page_time:Va(),visitor_id:e.id,internal_id:Dt(),member_id:R("member_id"),history_id:await is(),user_identifiers:await os(),user_metadata:{visitor_id:{source:e.source,name:e.name,fallback_used:e.fallback}},bundle_load_start:Ko(),attr:Od()}}catch(e){return a.error(e),{}}}function zg(t){return t?["view","purchase","delayed_purchase"].includes(t):!0}function Jg(t){return t?["view","purchase"].includes(t):!0}function Zg(t){return t?t==="purchase":!0}var Kg={travel:cs};function Yg(){let t={};return P(Kg,(e,r)=>{let o=R(`${r}`);o&&(t[r]=e(o))}),t}function Xg(t){["custom_dimensions","event_id"].forEach(r=>{t[r]===void 0&&(t[r]="")})}function Qg(t){return[j.PWO_DECISION,j.PWO_OPEN_ATTEMPT,j.PWO_IMPR,j.PWO_EMAIL_LEAD,j.PWO_SMS_LEAD,j.PWO_CLOSE].includes(t)}function eh(t){return[j.SITE_SPEED_BUCKETING,j.SITE_SPEED_FID_METRIC,j.SITE_SPEED_LCP_METRIC].includes(t)}async function fs(t,e={}){try{let r=e.page_id||xr(),o=await Hg(r);if(zg(t)&&(o={...o,...jg()},b(o,Yg(),ss())),Zg(t)&&o.purchase_type===void 0&&(o.purchase_type=""),(Qg(t)||eh(t))&&(o={...o,...e},t===j.PWO_EMAIL_LEAD||t===j.PWO_SMS_LEAD)){if(!o.ph){let i=await Ft(!1);o={...o,ph:i}}if(!o.em){let i=await de(!1);o={...o,em:i}}}Xg(o),P(o,(i,c)=>{typeof e[c]<"u"&&(o[c]=e[c])}),Jg(t)||b(o,{custom_dimensions:await _d()});let n=await Sd(o,t,r);return Gg({},o,n)}catch(r){return a.error(r),{}}}var th=500,ps={},ls={};function ms(){ls={},ps={}}function Ud(t){return ls[t]||0}function rh(t){let e=!1,r=t==="view"?1:M(`config.events.${t}.dedupe.limit_per_page`);return r&&(e=Ud(t)>=r),e?"limit_per_page":""}function oh(t,e){return t.startsWith("datalayer-")?"":e-(ps[t]||0)<th?"debounce":""}async function nh(t,e,r){try{let o="",n=e.event_id,i=M(`config.events.${t}.dedupe.time_threshold`);if(n||i){let c=await ye(ua)||{},s=c[t]||{};i&&r-(s.time||0)<parseInt(i,10)&&(o="time_threshold"),!o&&n&&n===s.id&&(o="repeat_id"),o||(c[t]={time:r,id:n},Ue(ua,c))}return o}catch(o){return a.error(o),""}}async function Vd(t,e){try{let r=Date.now(),o=oh(t,r)||rh(t)||await nh(t,e,r);return o||(ls[t]=Ud(t)+1,ps[t]=r),o}catch(r){a.error(r);return}}var gs="EventsAPI";async function ne(t,e,r,o){try{let n=`https://api.blackcrow.ai/v1/events/${t}?`;Lt(f)&&(n=`https://api.sandbox.blackcrow.ai/v1/events/${t}?`);let i=await fs(t,e),c=await Vd(t,i);if(c){a.error(new Be(`Duplicate ${t}: ${c}`,gs));return}let s=JSON.stringify(i),u={servletName:gs,method:"POST",cache:"no-cache",body:s};se(`request: ${t}`,{body:s}),Ge(n,u,r,o)}catch(n){a.error(new Be(n,gs))}}function Wd(t){let e="https://api.blackcrow.ai/v1/events/platform?";Lt(f)&&(e="https://api.sandbox.blackcrow.ai/v1/events/platform?");let r=JSON.stringify(t);Kr(e,r)}var y={START:"start",SESSION:"session",SET:"set",EXTEND:"extend",REFRESH:"refresh",PARTNER_EVENT:"partner_event",VIEW:"view",VIEW_RESPONSE:"view_response",PURCHASE:"purchase",SCORES_UPDATE:"scores_update",IDENTIFY:"identify",PWO_IMPR:"pwo_impression",PWO_EMAIL_LEAD:"pwo_email_lead",PWO_SMS_LEAD:"pwo_sms_lead",PWO_CLOSE:"pwo_close",PWO_OPEN_ATTEMPT:"pwo_open_attempt",OVERRIDES:"overrides",CLEAR_OVERRIDES:"clear_overrides",EXIT_INTENT:"exit_intent",ADD_TO_CART:"add_to_cart",INITIATE_CHECKOUT:"initiate_checkout"};var ih=["purchase","referral","call","update_account"],ah=["purchase","referral","call"];function qd(t){return ih.indexOf(t)!==-1}function sh(t){let e=t.trigger,r=t.data||{};e==="call"&&(r.purchase_type="call"),ah.indexOf(e)!==-1&&(e=j.PURCHASE),ne(e,r)}function Gd(){q("platform",y.PARTNER_EVENT,sh)}function hs({appName:t,eventName:e,data:r,sendFn:o}){let n={namespace:d,app_name:t,event_name:e,data:r};if(o)o(n,"*");else try{window.top.postMessage(n,"*")}catch(i){if(i instanceof DataCloneError)a.error(new wt("Attempting to post invalid message object"));else throw i}}var ch=ae("bound_events"),uh=ae("triggered_events");function Ae(t,e,r,o){o=o||{},o.noCache||uh.push(`${t}.${e}`,{data:r,onExec:o.onExec});let n=ch.get(`${t}.${e}`);P(n,i=>{Vo(i,r,o.onExec)}),o.postMessage&&hs({appName:t,eventName:e,data:r})}function D(t,e=()=>{},r=9,o=300,n=!1){try{return t()}catch(i){return r?_.setTimeout(()=>D(t,e,r-1,n?o*2:o,n),o):e(i)}}function dh(){v()||(a.postMessageEventListener&&_.removeListener(window,"message",a.postMessageEventListener),a.postMessageEventListener=t=>{let e=t.data||{};e.namespace===d&&(se(`trigger: ${e.event_name}`,e.data),Ae(e.app_name||"platform",e.event_name,e.data))},_.addListener(window,"message",a.postMessageEventListener))}function ro(t){if(!t)return;let e=t.app_name||"platform",r=t.data,o=t.trigger;if(o){se(`trigger: ${o}`,t),o===y.EXTEND?Vn(r):o===y.SET?Wn(r):qd(o)?Ae(e,y.PARTNER_EVENT,t):Ae(e,o,r);return}let n=t.bind;if(n){se(`bind: ${n}`,t),q(e,n,t.callback,{origEvent:t});return}se("unrecognized",t)}function jd(){P(l,t=>{ro(t)})}function Hd(){return D(()=>dh(),t=>a.error(t)),ro}function ys(){Hd(),a.push=ro,a.history=Nu}var zd="IntentProperties";function $t(t){return t?E(window[zd],t):window[zd]}function vs(){let t=$t();if(t){let e={page_id:t.page_id,visitor_id:t.visitor_id||t.publisher_user_id,member_id:t.member_id,user_is_logged_in:t.is_logged_in_user,user_has_subscription:t.user_has_subscription,page_url:t.page_url,page_referrer_url:t.page_referrer_url,page_title:t.page_title,referrer_source:t.referrer_source,site_currency:t.site_currency,site_country:t.site_country,site_language:t.site_language,site_name:t.site_name,traffic_groups:t.traffic_groups,custom_1:t.site_custom_1,custom_2:t.site_custom_2,custom_3:t.site_custom_3,custom_4:t.site_custom_4,custom_5:t.site_custom_5,custom_6:t.site_custom_6,custom_7:t.site_custom_7};t.cart&&(e.cart=t.cart),t.travel&&(e.travel=b({},{start_date:t.travel.start_date,end_date:t.travel.end_date,origin_airport:t.travel.origin_airport,destination_airport:t.travel.destination_airport,travelers:t.travel.travelers})),ro({trigger:y.EXTEND,data:e})}}var fh=ae("bound_events"),ph=ae("triggered_events");function _s(){fh.clear(M("config.clearBindings")),ph.clear()}function Jd(){let t=E(window,"Shopify.checkout.total_tax");if(t)return t;let e=document.querySelectorAll("[data-checkout-total-taxes-target]");return e.length?e[0].textContent.startsWith("$")?e[0].textContent.trim().substring(1):e[0].textContent.trim():"0.00"}function te(t){/complete|interactive|loaded/.test(document.readyState)?t():_.addListener(document,"DOMContentLoaded",()=>{t()})}async function ws(){try{let t=await I("cart"),e=await I(da);return t&&X(da,t),!t||!e||e!==t}catch{return!0}}function lh(){return{total_price:$t("total_price"),coupon:$t("coupon"),shipping_method:$t("shipping_method"),shipping_price:$t("shipping_price"),zip_code:$t("zip_code")}}function Es(t){if(!t)return;let e=t.amount??0;return tr(e*100)}function Zd(){if(v()){let r=window.shopifyCheckout;return r?{total_price:Es(r.totalPrice),shipping_price:Es(r.shippingLine?.price),custom_dimensions:{tax_amount:Es(r.totalTax)}}:{}}let t=xd(),e={custom_dimensions:{tax_amount:window.Shopify?Jd():void 0},total_price:window.cart_json?.total_price};return b({},t,e)}function mh(){window.IntentProperties&&Vn(lh()),X(Tu,!0,1051200),ne(j.PURCHASE,Zd())}async function bs(){M("page.log_purchase")&&await ws()&&(mh(),te(()=>{ne(j.DELAYED_PURCHASE,Zd())}))}var ut="audience";function ot(t){return ka(`apps.${t}`)}var Kd="o",Yd=`${d}_audience|score_update`,Ss=`${d}_score`,Xd=`contextData.${Ss}`;function H(t){let e=Number(t);return isNaN(e)?t:e}var B="Integration not available";function Q(t,e){return(r,o,n)=>{if(!r)return;function i(c){c.message===B?a.error(new T(`${t} globals not found`),{appName:o}):a.error(c)}D(()=>e(r,o,n),i)}}var Ps="adobe_analytics";function hh(t,e,r){let o=E(window,"s.tl");if(typeof o=="function"){let n={contextData:{[Ss]:H(t.score)},linkTrackVars:Xd};o(!0,Kd,Yd,n),typeof r=="function"&&r(Ps,n);return}throw new Error(B)}var xs={name:Ps,send:Q(Ps,hh)};var Qd="event";function U(t,e="|"){return t.filter(r=>r!=null&&r!=="").join(e)}var Ts="dynamic_yield";function yh(t){return t==="1"?"low":t==="2"?"medium":"high"}function vh(t,e,r){let o=E(window,"DY.API"),n;t.threshold_group_count==="3"&&(n=yh(t.score));let i=U([d,t.comparison_group.toLowerCase(),n||`score_${t.score}`]);if(typeof o=="function"){let c=H(t.score);o(Qd,{name:i,properties:{}}),typeof r=="function"&&r(Ts,{EVENT_PREFIX:`${d}_${e}`,score:c})}else throw new Error(B)}var As={name:Ts,send:Q(Ts,vh)};function Yo(t){let e=new Error(t);return e.name="ConfigDataError",e.status="warn",e.stack=ie(e.stack,1),e}function ef(t,e){let r=encodeURIComponent(t);return e&&(r=r.replace(/%2C/g,",")),r}function Ie(t,e=!0){let r=[];return P(t,(o,n)=>{if(o!=null&&o!==""){let i=typeof o;i==="function"?o=o.name:i==="object"&&(Array.isArray(o)?o=o.toString():o=JSON.stringify(o)),r.push(`${ef(n,e)}=${ef(o,e)}`)}}),r.join("&")}function Is(t,e){return typeof t=="string"&&typeof e=="string"?t.localeCompare(e,void 0,{sensitivity:"accent"})===0:t===e}function tf(t){let e=`${t}`;return e.length===1?`0${e}`:e}function Ar(t){if(t)return new Date(t?.replace(/-/g,"/"))}function Qn(t,e=""){if(t)return`${t.getFullYear()}${e}${tf(t.getMonth()+1)}${e}${tf(t.getDate())}`}function _h(t){if(t&&t.formBuckets){let e=new Date,r=t.formBuckets||[],o=r.filter(i=>!i.startDate&&!i.endDate),n=r.filter(i=>i.startDate&&Ar(i.startDate)<=e&&(!i.endDate||Ar(i.endDate)>=e));if(n.length!==0){let i="01-Jan-2100 04:00:00 UTC";n.sort((u,g)=>Ar(g.startDate)-Ar(u.startDate)),n.sort((u,g)=>{let h=u.endDate||i,S=g.endDate||i;return Ar(h)-Ar(S)});let c=n[0].startDate,s=n[0].endDate;n=n.filter(u=>u.startDate===c&&u.endDate===s)}t.formBuckets=n.length>0?n:o,t.formBuckets.length===0&&delete t.formBuckets}return t}function ks(t,e="PWO",r=["formBuckets","overlayBuckets","overlayBuckets_triggerBuckets","overlayBuckets_triggerBuckets_formBuckets"]){if(t?.overlaySetting===void 0||t?.overlaySetting===null)return t;let o=be(O());function n(c,s){let u,g;if(Array.isArray(c)&&c.length){let h=JSON.parse(JSON.stringify(c));typeof h[0].percent!="number"&&r.includes(s)&&(h[0].percent=1),typeof h[0].percent=="number"&&(u=`${e}_${s}`,g=h.map(S=>({percent:S.percent,value:{...S}})))}if(u&&g){let h=e,S=c.short_name||s;return oe({name:u,allocations:g,force:o[`bcai_${h}_${S}`]})}return c}function i(c,s){if(c==null)return c;let u=Array.isArray(c)?[]:{},g;return Object.keys(c).forEach(h=>{let S=s?`${s}_${h}`:h;g=n(c[h],S),u[h]=typeof g=="object"?i(g,S):g}),u}return{...t,overlaySetting:i(_h(t.overlaySetting))}}function wh(t){let e=O()?.toLowerCase();return e&&t?.length?t.find(r=>e.match(r.toLowerCase())):!1}function Eh(t,e){let r=t.filter(n=>Is(n.app,e));return r.length?r.find(n=>wh(n.allowedUrlPatterns))||r.find(n=>!n.allowedUrlPatterns?.length)||{}:{}}function dt(t){if(t){let e=M("apps")||[];if(e)return Eh(e,t)}return{}}function ei(t){let e=dt(t).platforms||[],r=[];return e.forEach(o=>{r.push(o.platform.toLowerCase())}),r}function J(t,e){if(t&&e){let r=dt(t);if(r)return(r.platforms||[]).find(i=>Is(i.platform,e))||{}}return{}}function ti(t){return t?ks(dt(t),t).overlaySetting||{}:{}}function Ir(t){return t?dt(t).identitySetting||{}:{}}function Xo(t,e){let r=Ir(t).platforms?.filter(i=>i.platform?.toLowerCase()===e),o=[],n=O();return n&&(o=r?.filter(i=>i.allowedUrlPatterns?.some(c=>n.includes(c)))),o.length||(o=r?.filter(i=>!i.allowedUrlPatterns?.length)),o}async function bt(t,e=10,r=300,o=!1){let n=e,i=r,c;do try{return await t()}catch(s){n-=1,n&&(await ue(i),i=o?i*2:i,c=s)}while(n);throw c}var of="event",Qo="owox",ri=[];async function bh(t){let e=await Xt();if(e)t(e);else throw new Error(B)}function rf(t,e,r,o){t.cid=e,t.z=Date.now(),Z(`https://google-analytics.bi.owox.com/${r}?${Ie(t)}`,{method:"GET"},()=>o(Qo,t))}function Sh(t,e,r){let o=window.GoogleAnalyticsObject?window[window.GoogleAnalyticsObject]:window.ga,i=J(e,Qo).tracking_id;if(typeof o=="function"){let c=_.setTimeout(()=>{a.error(new T(`${Qo} ready hook not fired`))},5e3);o(s=>{if(clearTimeout(c),i=i||s&&s.get("trackingId"),i||P(o.getAll(),u=>{let g=u.get("trackingId");if(g)return i=g,!1}),i){if(!t)return;let u=`${d}_${e}`,g=U([u,t.integration_product,t.conversion_product,t.conversion_type]),h=U([t.comparison_type,t.threshold_setter,t.threshold_group_count,t.comparison_population,t.comparison_group]);ri.push({v:1,ni:1,t:of,tid:i,dl:O(),ec:g,ea:h,el:H(t.score)}),Array.isArray(ri)&&bt(bh(S=>{let W=ri;ri={push:ge=>{rf(ge,S,i,r)}},W.forEach(ge=>{rf(ge,S,i,r)})}))}else a.error(new Yo(`${Qo} tracking id not found`))})}}var Os={eventHitType:of,name:Qo,send:Sh};var Ph=oe({name:"kpi_sampling",allocations:[{percent:.1,value:!0}]});async function Mt(t,e,r){try{if(Ph){let o=await tt();he(`${r} ${e}`,{"evt.name":r,"evt.integration":e,appName:t,"usr.id":o.id,"view.url":R("page_url")||O(),"view.referrer":R("page_referrer_url")||Oe()})}}catch(o){a.error(o)}}var Cs={[xs.name]:xs,[As.name]:As,[Os.name]:Os};function Ns(t,e,r){Mt(ut,t,e),se(`${ut} ${e}: ${t}`,r)}function xh(t,e){Cs[t]!==void 0&&e&&P(e,r=>{r.name&&Cs[t].send(r,ut,(o,n)=>{Ns(o,"score_push",n)})})}function Th(){let t=ot(`${ut}.scores`);t&&t.length&&Ae(ut,y.SCORES_UPDATE,t,{onExec:()=>{Ns(f,y.SCORES_UPDATE,t)}});let e=t?t[0]:null;if(e){let r={score:parseInt(e.score,10),comparison_group:e.comparison_group,threshold_group_count:e.threshold_group_count};Ae(ut,"score_update",b({},r),{onExec:()=>{Ns(f,"score_update",r)}})}}function Ah(t){let e=ot(`${ut}.integrations`),r=[];return P(e,o=>{let n=o.platform;t[n]&&r.push(t[n].then(()=>{xh(n,o.scores)}))}),Th(),Promise.all(r)}var nf={appName:ut,platforms:Cs,sendAppScores:Ah};function Ih(t){let e=document.getElementById("continue_button"),r=document.getElementById("checkout_shipping_address_first_name"),o=document.getElementById("checkout_shipping_address_last_name");e&&r&&o&&_.addListener(e,"click",()=>{t(r.value,o.value)})}function af(){Ih((t,e)=>{Ue(ga,Qt(t)),Ue(ha,Qt(e))})}async function sf(){try{let t=await ye(ga);return t?Sr(t):void 0}catch(t){a.error(t);return}}async function cf(){try{let t=await ye(ha);return t?Sr(t):void 0}catch(t){a.error(t);return}}function kh(t){if(t)return t.replace(/['.,/#!$%^&*;:{}=\-_`~()]/g,"")}function oi(t){let e=kh(t);return e?Qt(e):void 0}function Oh(t,e){let r=t[e];if(r){let{first_name:o,last_name:n}=r;if(n){let i={fn:o,ln:n};return o&&(i.fln=`${o} ${n}`),b({},i)}}}function uf(){let t=[],e=Me()&&E(window,"Shopify.checkout");return e&&["billing_address","credit_card","shipping_address"].forEach(r=>{let o=Oh(e,r);o&&t.push(o)}),t.length?t:void 0}function Rs(t,e){let r=document.createElement(t);return Object.keys(e).forEach(n=>{r[n]=e[n]}),r}function Ls(t){if(!t||!crypto||!crypto.subtle||typeof crypto.subtle.digest!="function")return Promise.resolve(void 0);let e=new TextEncoder().encode(t);return crypto.subtle.digest("SHA-256",e).then(r=>Array.from(new Uint8Array(r))).then(r=>r.map(o=>o.toString(16).padStart(2,"0")).join(""))}function ni(t){let e=Object.keys(t).map(r=>Ls(t[r]).then(o=>{t[r]=o}));return Promise.all(e).then(()=>b({},t))}var Ch="facebook_ads";async function Ds(){try{let t=await Ft(),e={em:await de(),ph:t&&t.replace(/\D/g,""),fn:await sf(),ln:await cf()};return b({},e)}catch(t){return a.error(t),{}}}async function df(t,e,r,o,n){try{let i=`https://www.facebook.com/tr?id=${t}&ev=${o}&noscript=1`,c=await Ds(),s=await ni(c),u=await I(_t),g=await I(Yt);return P(s,(h,S)=>{i+=`&ud[${S}]=${h}`}),P(n,(h,S)=>{i+=`&cd[${S}]=${h?.toString()}`}),r&&(i+=`&ud[external_id]=${r}`),e&&(i+=`&eid=${e}`,i+="&cdl=API_unavailable",i+="&rqm=GET",i+="&coo=false"),u&&(i+=`&fbp=${u}`),g&&(i+=`&fbc=${g}`),i}catch(i){return a.error(i),`https://www.facebook.com/tr?id=${t}&ev=${o}`}}function ff(t,e,r){return df(t,void 0,void 0,e,r).then(o=>{let n=Rs("img",{width:1,height:1,src:o});n.style.display="none",document&&document.body&&typeof document.body.append=="function"&&document.body.append(n)})}function ii(t,e,r,o,n,i){return df(t,e,r,o,n).then(c=>{c+="&",c+=Ie({dl:O(),rl:document.referrer}),D(()=>{Z(c,{method:"GET"},i,s=>{throw s})},s=>a.error(new Error(`${Ch} api call failed with message ${s.message}`)),9,300,!0)})}var rr="measure";function ai(){return window.ShopifyAnalytics&&window.ShopifyAnalytics.lib&&window.ShopifyAnalytics.lib.config&&window.ShopifyAnalytics.lib.config["Facebook Pixel"]&&window.ShopifyAnalytics.lib.config["Facebook Pixel"].conversionsAPIEnabled}var pf=0;function lf(){return pf+=1,pf}function Fs(){(function(t,e,r,o,n,i,c){t.fbq||(n=t.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)},t._fbq||(t._fbq=n),n.push=n,n.loaded=!0,n.version="2.0",n.queue=[],i=e.createElement(r),i.async=!0,i.src=o,c=e.getElementsByTagName(r)[0],c.parentNode.insertBefore(i,c))})(window,document,"script","https://connect.facebook.net/en_US/fbevents.js")}function $s(t){return e=>{e.message===B?a.error(new T(t)):a.error(e)}}function si(t,e){v()||(Fs(),window.fbq("init",t,e))}var en="facebook_ads",gf="trackCustom";function hf(t,e){window.fbq("init",t,e)}function yf(t){if(typeof window.fbq!="function"||typeof window.fbq.getState!="function")throw new Error(B);if(typeof window.fbq.getState().then=="function")window.fbq.getState().then(({pixels:e})=>{e&&e.length>0&&t(e)});else if(window.fbq.getState().pixels&&window.fbq.getState().pixels.length>0)t(window.fbq.getState().pixels);else throw new Error(B)}function ci(){return M("facebookAccounts")||[]}function vf(t){return t===void 0?ai():t}function _f(t,e){t.forEach(r=>{let o=r.pixelId,n=r.advancedMatching;if(o){let i=vf(n)?e:{};v()||hf(o,i)}})}function Nh(t,e,r){let o=ci();o.length&&_f(o,e),r()}function Rh(t,e,r){Fs();let o=ci();function n(){yf(i=>{i.forEach(c=>{vf()&&hf(c.id,e)})})}D(()=>{if(typeof window.fbq!="function")throw new Error(B);o.length?_f(o,e):n(),r()},$s(`${en} globals not found`))}function wf(t,e,r){return function(){typeof t=="function"&&t(en,{eventName:e,eventObject:r})}}function Lh(t,e,r,o){let n=wf(o,e,r),i=ci();i.length&&i.forEach(c=>{let s=c.pixelId;ii(s,void 0,void 0,e,r,n)})}function Dh(t,e,r,o){let n=wf(o,e,r);yf(()=>{window.fbq(gf,e,r),n()})}function Fh(t,e){ci().forEach(o=>{let n=o.pixelId;n&&ff(n,t,e)})}function $h(t,e,r,o){return n=>(Fh(t,e),typeof o=="function"&&o(`${en}`,{eventName:t,eventObject:e},"score_push_img_pixel"),r(n))}function Mh(t){return`${d}_${t}`}function Bh(t,e,r){let o;return t===rr?o=U([d,r],"_"):o=U([e,r]),o}function Uh(t,e){return{app_name:t,integration_product:e.integration_product,conversion_product:e.conversion_product,conversion_type:e.conversion_type,comparison_population:e.comparison_population,comparison_group:e.comparison_group,comparison_type:e.comparison_type,threshold_setter:e.threshold_setter,threshold_group_count:e.threshold_group_count,score:H(e.score),event_date:Qn(new Date,"-"),eventDate:Qn(new Date)}}function Ef(t,e){let r=Mh(t);return{eventName:Bh(t,r,e.integration_product),eventObject:Uh(r,e)}}function Vh(t,e,r){if(!t)return;let o=Ef(e,t);Lh(e,o.eventName,o.eventObject,r)}function Wh(t,e,r){if(!t)return;let o=Ef(e,t),n=o.eventName,i=o.eventObject;D(()=>Dh(e,n,i,r),$h(n,b({},i,{eventHitId:lf()}),$s(`${en} globals not found`),r),80,150)}function qh(t,e,r){v()?Vh(t,e,r):Wh(t,e,r)}async function mf(t,e){try{let r=await Ds();v()?Nh(t,r,e):Rh(t,r,e)}catch(r){a.error(r)}}var or={eventHitType:gf,name:en,identify:mf,setup:mf,send:qh};var Ms={[or.name]:or};function Gh(t,e,r="score_push"){Mt(rr,t,r),se(`${rr} ${r}: ${t}`,e)}function jh(t,e){Ms[t]!==void 0&&e&&e.length>0?(X(Fo,"scored",30),P(e,r=>{r.name&&Ms[t].send(r,rr,Gh)})):X(Fo,"enabled",30)}function Hh(t){let e=ce("blackcrow_promising_user")||"";return t==="enabled"||t===void 0&&e.toLowerCase()==="active"||t===void 0&&O().toLowerCase().indexOf("blackcrow_promising_user%3dactive")>0}async function zh(t){try{let e=ot(`${rr}.integrations`),r=await I(Fo),o=[];return r==="scored"?X(Fo,"scored",30):Hh(r)&&P(e,n=>{let i=n.platform;t[i]&&o.push(t[i].then(()=>{jh(i,n.scores)}))}),Promise.all(o)}catch(e){return a.error(e),Promise.resolve([])}}var bf={appName:rr,platforms:Ms,sendAppScores:zh};var V="pwo",Sf="amped",ui="attentive",nr="justuno",di="klaviyo",fi="postscript",Pf="recart",xf="sendlane",Tf="wisepops",Af="yotpo",If="smart_id",ir={DELAY:"delay",SESSION_VIEW_COUNT:"page_view",EXIT_INTENT:"exit_intent"};var kr=class{static getPlatformName(){return ui}isIdentified(){return ce("utm_source")==="attentive"}setup(){}isInitialized(){return!0}static getInstance(){return new kr}};function Bs(){if(!window.klaviyo){window._klOnsite=window._klOnsite||[];try{window.klaviyo=new Proxy({},{get(t,e){return e==="push"?function(){let r;(r=window._klOnsite).push.apply(r,arguments)}:function(){for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];let i=typeof o[o.length-1]=="function"?o.pop():void 0;return new Promise(s=>{window._klOnsite.push([e].concat(o,[function(u){i&&i(u),s(u)}]))})}}})}catch{window.klaviyo=window.klaviyo||[],window.klaviyo.push=function(){let e;(e=window._klOnsite).push.apply(e,arguments)}}}}function pi(){return T("Klaviyo globals not found.")}function tn(t){let e=window?.klaviyo?.push||window?._learnq?.push||window?._klOnsite?.push;if(typeof e=="function")return e(t);throw pi()}function li(){return!!(window._klOnsite?._loaded||window._learnq?._loaded)}function mi(t,e={}){return t&&b(e,{$email:t}),e}function Us(){return window?.klaviyo?.identify||window?._learnq?.identify}function rn(t){let e=Us();return typeof e=="function"?e(t):tn(["identify",t])}function kf(){if(typeof window?.klaviyo?.isIdentified=="function")return window.klaviyo.isIdentified();if(typeof window?._learnq?.isIdentified=="function")return window._learnq.isIdentified();throw pi()}function Vs(){return window?.klaviyo?.openForm}function Of(t){let e=Vs();if(typeof e=="function")return e(t);throw pi()}async function Cf(){if(typeof window?.klaviyo?.account=="function")return window.klaviyo.account();if(typeof window?._learnq?.account=="function")return window._learnq.account();throw pi()}function Nf(t,e,r=500){let o,n=new _.SafeAsyncInterval(async()=>{try{let i=await I(t);if(o===void 0)o=i;else if(o&&i!==o)try{await e(i)}catch(c){a.error(c),n.stop()}finally{o=i}}catch{}},r);return n.start(),n}function pe(t,e){try{window.sessionStorage.setItem(t,JSON.stringify(e))}catch{}}async function Rf(t,e){try{v()?await globalThis.browser.sessionStorage.setItem(t,JSON.stringify(e)):window.sessionStorage.setItem(t,JSON.stringify(e))}catch{}}function oo(t,e,r=new Error("Request timed out")){let o=new Promise((n,i)=>{_.setTimeout(()=>{i(r)},e)});return Promise.race([t,o])}var Or=class extends Error{constructor(r){super(r);this.status="warn"}};function on(t,...e){return new Promise((r,o)=>{t(...e,n=>r(n),n=>o(n))})}function gi(t,e){return on(Z,t,e)}var Ce=class{constructor(){this.applicationName=V?.toUpperCase();this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return di}setupEmailListenerCallback(){te(()=>{Kn(e=>{let r=qo(e);r&&rn(mi(r))})})}async sendIdentityIfUnidentified(){try{if(await this.isIdentified()===!1){let r=await de();r?rn(mi(r)):this.setupEmailListenerCallback()}}catch(e){a.error(e)}}handlePostSetup(){if(jn()==="confirmation"){let e=Nf(Un,async()=>{try{let r=await to();r&&(await ne("kl_purchase",{kl_cid:r}),e.stop())}catch(r){a.error(r)}});return de().then(r=>{let o=r||Zn();o&&rn(mi(o))}).catch(r=>a.error(r))}return this.sendIdentityIfUnidentified()}static isKlaviyoLoaded(){return li()&&typeof Us()=="function"}setup(){return Ce.isKlaviyoLoaded()||Bs(),new Promise((e,r)=>D(()=>{if(!Ce.isKlaviyoLoaded())throw new Error(`${Ce.getPlatformName()} globals not found`);this.hasSetupCompletedSuccessfully=!0,this.handlePostSetup().catch(o=>{a.error(o)}).finally(e)},()=>{let o=T(`[${this.applicationName}] ${Ce.getPlatformName()} globals not found.`);a.error(o),r(o)},100))}isInitialized(){return this.hasSetupCompletedSuccessfully}setIdentifiedByKlaviyoInSession(){pe(ya,!0)}async isIdentified(){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call isIdentified as ${Ce.getPlatformName()} was not initialized.`);if(await z(ya))return!0;if(ce("_kx"))return this.setIdentifiedByKlaviyoInSession(),!0;let r=`[${this.applicationName}] ${Ce.getPlatformName()}.isIdentified() Promise did not resolve.`,o=await oo(bt(async()=>{let n=await kf();if(typeof n!="boolean")throw new Error(`[${this.applicationName}] Cannot call isIdentified as ${Ce.getPlatformName()}.isIdentified() is not returning a boolean.`);return n}),4e3,new Or(r));return o===!0&&this.setIdentifiedByKlaviyoInSession(),o}async addAttributesToUserProfile(e){rn(b({},{$email:await de(),$phone:await Ft()},e)),e.blackcrow_identified&&(tn(["track","Black Crow Identified"]),await this.callServerEvent(e).catch(r=>a.error(r)))}async callServerEvent(e){let r=await Cf(),o=await Ft(),n=await de(),i={method:"POST",headers:{accept:"application/json",revision:"2023-12-15","content-type":"application/json"},body:JSON.stringify({data:{type:"event",attributes:{properties:{},time:new Date().toISOString(),metric:{data:{type:"metric",attributes:{name:"Black Crow Identified"}}},profile:{data:{type:"profile",attributes:b({email:n,phone_number:o},{properties:{...e}})}}}}})};return gi(`https://a.klaviyo.com/client/events/?company_id=${r}`,i)}static getInstance(){return new Ce}};var ar=class{constructor(){this.applicationName=V?.toUpperCase();this.initialized=!1}static getPlatformName(){return Sf}setup(){return this.initialized||(q("platform",y.PWO_CLOSE,e=>{e.rendered_form_id===window.__bcai_amped_trigger&&delete window.__bcai_amped_trigger}),this.initialized=!0),Promise.resolve()}isInitialized(){return this.initialized}triggerOverlay(e){let r=Number(e);if(Number.isNaN(r))throw new Error(`[${this.applicationName}] Cannot trigger overlay for ${ar.getPlatformName()} due to an invalid formId: ${e}`);window.__bcai_amped_trigger=r}static getInstance(){return new ar}};function le(t,e){a.push({trigger:t,data:e})}function _e(t,e,r){let o={};return r&&(o.em=Pr(r)),e&&(o.ph=Tr(e)),b({},t,o)}var Jh=new Map([["OPEN",y.PWO_IMPR],["CLOSE",y.PWO_CLOSE],["EMAIL_LEAD",y.PWO_EMAIL_LEAD],["LEAD",y.PWO_SMS_LEAD]]);function Lf(t){return Jh.get(t)}var sr=class{constructor(){this.windowListenerRegistered=!1;this.applicationName=V?.toUpperCase();this.hasSetupCompletedSuccessfully=!1;this.observedEvents={}}static getPlatformName(){return ui}setup(){return this.observedEvents={},this.windowListenerRegistered||(this.windowListenerRegistered=!0,_.addListener(window,"message",e=>{if(e.origin&&e.origin.indexOf(".attn.tv")!==-1){let r=e.data.__attentive||{};if(r&&Lf(r.action)){let{action:o,creativeId:n,phone:i,email:c}=r,s=this.observedEvents[n];if(s?.includes(o))return;this.observedEvents[n]=s?[...s,o]:[o];let u=Lf(o);u===y.PWO_EMAIL_LEAD&&c&&K(c),u===y.PWO_SMS_LEAD&&i&&fe(i),u&&le(u,_e({rendered_form_id:n},i,c))}}})),new Promise((e,r)=>D(()=>{if(typeof window.__attentive?.trigger!="function")throw new Error(`${sr.getPlatformName()} globals not found`);e()},()=>{let o=T(`[${this.applicationName}] ${sr.getPlatformName()} globals not found.`);a.error(o),r(o)},100)).then(()=>{this.hasSetupCompletedSuccessfully=!0})}triggerOverlay(e){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot trigger overlay ${e} as ${sr.getPlatformName()} was not initialized.`);if(!window?.__attentive)throw new Error(`[${this.applicationName}] Cannot trigger overlay ${e} as ${sr.getPlatformName()} global is missing.`);delete this.observedEvents[e],window.__attentive.trigger(null,null,null,e)}getOverlayNode(){let e=document.querySelectorAll(sr.DEFAULT_OVERLAY_SELECTOR);if(e.length!==0){if(e.length>1)throw new Error(`[${this.applicationName}] Expected exactly one matching Attentive overlay container but found ${e?.length}.`);return e[0]}}isInitialized(){return this.hasSetupCompletedSuccessfully}static getInstance(){return new sr}},no=sr;no.DEFAULT_OVERLAY_SELECTOR="[id=attentive_overlay]";var G;(function(t){t.assertEqual=n=>n;function e(n){}t.assertIs=e;function r(n){throw new Error}t.assertNever=r,t.arrayToEnum=n=>{let i={};for(let c of n)i[c]=c;return i},t.getValidEnumValues=n=>{let i=t.objectKeys(n).filter(s=>typeof n[n[s]]!="number"),c={};for(let s of i)c[s]=n[s];return t.objectValues(c)},t.objectValues=n=>t.objectKeys(n).map(function(i){return n[i]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let i=[];for(let c in n)Object.prototype.hasOwnProperty.call(n,c)&&i.push(c);return i},t.find=(n,i)=>{for(let c of n)if(i(c))return c},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function o(n,i=" | "){return n.map(c=>typeof c=="string"?`'${c}'`:c).join(i)}t.joinValues=o,t.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(G||(G={}));var qs;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(qs||(qs={}));var x=G.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),cr=t=>{switch(typeof t){case"undefined":return x.undefined;case"string":return x.string;case"number":return isNaN(t)?x.nan:x.number;case"boolean":return x.boolean;case"function":return x.function;case"bigint":return x.bigint;case"symbol":return x.symbol;case"object":return Array.isArray(t)?x.array:t===null?x.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?x.promise:typeof Map<"u"&&t instanceof Map?x.map:typeof Set<"u"&&t instanceof Set?x.set:typeof Date<"u"&&t instanceof Date?x.date:x.object;default:return x.unknown}},w=G.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Zh=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),He=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=o=>{this.issues=[...this.issues,o]},this.addIssues=(o=[])=>{this.issues=[...this.issues,...o]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(i){return i.message},o={_errors:[]},n=i=>{for(let c of i.issues)if(c.code==="invalid_union")c.unionErrors.map(n);else if(c.code==="invalid_return_type")n(c.returnTypeError);else if(c.code==="invalid_arguments")n(c.argumentsError);else if(c.path.length===0)o._errors.push(r(c));else{let s=o,u=0;for(;u<c.path.length;){let g=c.path[u];u===c.path.length-1?(s[g]=s[g]||{_errors:[]},s[g]._errors.push(r(c))):s[g]=s[g]||{_errors:[]},s=s[g],u++}}};return n(this),o}toString(){return this.message}get message(){return JSON.stringify(this.issues,G.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},o=[];for(let n of this.issues)n.path.length>0?(r[n.path[0]]=r[n.path[0]]||[],r[n.path[0]].push(e(n))):o.push(e(n));return{formErrors:o,fieldErrors:r}}get formErrors(){return this.flatten()}};He.create=t=>new He(t);var nn=(t,e)=>{let r;switch(t.code){case w.invalid_type:t.received===x.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case w.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,G.jsonStringifyReplacer)}`;break;case w.unrecognized_keys:r=`Unrecognized key(s) in object: ${G.joinValues(t.keys,", ")}`;break;case w.invalid_union:r="Invalid input";break;case w.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${G.joinValues(t.options)}`;break;case w.invalid_enum_value:r=`Invalid enum value. Expected ${G.joinValues(t.options)}, received '${t.received}'`;break;case w.invalid_arguments:r="Invalid function arguments";break;case w.invalid_return_type:r="Invalid function return type";break;case w.invalid_date:r="Invalid date";break;case w.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:G.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case w.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case w.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case w.custom:r="Invalid input";break;case w.invalid_intersection_types:r="Intersection results could not be merged";break;case w.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case w.not_finite:r="Number must be finite";break;default:r=e.defaultError,G.assertNever(t)}return{message:r}},$f=nn;function Kh(t){$f=t}function yi(){return $f}var vi=t=>{let{data:e,path:r,errorMaps:o,issueData:n}=t,i=[...r,...n.path||[]],c={...n,path:i},s="",u=o.filter(g=>!!g).slice().reverse();for(let g of u)s=g(c,{data:e,defaultError:s}).message;return{...n,path:i,message:n.message||s}},Yh=[];function A(t,e){let r=vi({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,yi(),nn].filter(o=>!!o)});t.common.issues.push(r)}var we=class{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let o=[];for(let n of r){if(n.status==="aborted")return L;n.status==="dirty"&&e.dirty(),o.push(n.value)}return{status:e.value,value:o}}static async mergeObjectAsync(e,r){let o=[];for(let n of r)o.push({key:await n.key,value:await n.value});return we.mergeObjectSync(e,o)}static mergeObjectSync(e,r){let o={};for(let n of r){let{key:i,value:c}=n;if(i.status==="aborted"||c.status==="aborted")return L;i.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof c.value<"u"||n.alwaysSet)&&(o[i.value]=c.value)}return{status:e.value,value:o}}},L=Object.freeze({status:"aborted"}),Mf=t=>({status:"dirty",value:t}),Ne=t=>({status:"valid",value:t}),Gs=t=>t.status==="aborted",js=t=>t.status==="dirty",an=t=>t.status==="valid",_i=t=>typeof Promise<"u"&&t instanceof Promise,k;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(k||(k={}));var nt=class{constructor(e,r,o,n){this._cachedPath=[],this.parent=e,this.data=r,this._path=o,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Df=(t,e)=>{if(an(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new He(t.common.issues);return this._error=r,this._error}}};function F(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:o,description:n}=t;if(e&&(r||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(c,s)=>c.code!=="invalid_type"?{message:s.defaultError}:typeof s.data>"u"?{message:o??s.defaultError}:{message:r??s.defaultError},description:n}}var $=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return cr(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:cr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new we,ctx:{common:e.parent.common,data:e.data,parsedType:cr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(_i(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let o=this.safeParse(e,r);if(o.success)return o.data;throw o.error}safeParse(e,r){var o;let n={common:{issues:[],async:(o=r?.async)!==null&&o!==void 0?o:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:cr(e)},i=this._parseSync({data:e,path:n.path,parent:n});return Df(n,i)}async parseAsync(e,r){let o=await this.safeParseAsync(e,r);if(o.success)return o.data;throw o.error}async safeParseAsync(e,r){let o={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:cr(e)},n=this._parse({data:e,path:o.path,parent:o}),i=await(_i(n)?n:Promise.resolve(n));return Df(o,i)}refine(e,r){let o=n=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(n):r;return this._refinement((n,i)=>{let c=e(n),s=()=>i.addIssue({code:w.custom,...o(n)});return typeof Promise<"u"&&c instanceof Promise?c.then(u=>u?!0:(s(),!1)):c?!0:(s(),!1)})}refinement(e,r){return this._refinement((o,n)=>e(o)?!0:(n.addIssue(typeof r=="function"?r(o,n):r),!1))}_refinement(e){return new Je({schema:this,typeName:N.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ft.create(this,this._def)}nullable(){return qt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ze.create(this,this._def)}promise(){return fr.create(this,this._def)}or(e){return Lr.create([this,e],this._def)}and(e){return Dr.create(this,e,this._def)}transform(e){return new Je({...F(this._def),schema:this,typeName:N.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Ur({...F(this._def),innerType:this,defaultValue:r,typeName:N.ZodDefault})}brand(){return new wi({typeName:N.ZodBranded,type:this,...F(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new fo({...F(this._def),innerType:this,catchValue:r,typeName:N.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Vr.create(this,e)}readonly(){return lo.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Xh=/^c[^\s-]{8,}$/i,Qh=/^[a-z][a-z0-9]*$/,ey=/^[0-9A-HJKMNP-TV-Z]{26}$/,ty=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ry=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,oy="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Ws,ny=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,iy=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ay=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function sy(t,e){return!!((e==="v4"||!e)&&ny.test(t)||(e==="v6"||!e)&&iy.test(t))}var je=class extends ${_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==x.string){let i=this._getOrReturnCtx(e);return A(i,{code:w.invalid_type,expected:x.string,received:i.parsedType}),L}let o=new we,n;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),A(n,{code:w.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),o.dirty());else if(i.kind==="max")e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),A(n,{code:w.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),o.dirty());else if(i.kind==="length"){let c=e.data.length>i.value,s=e.data.length<i.value;(c||s)&&(n=this._getOrReturnCtx(e,n),c?A(n,{code:w.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&A(n,{code:w.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),o.dirty())}else if(i.kind==="email")ry.test(e.data)||(n=this._getOrReturnCtx(e,n),A(n,{validation:"email",code:w.invalid_string,message:i.message}),o.dirty());else if(i.kind==="emoji")Ws||(Ws=new RegExp(oy,"u")),Ws.test(e.data)||(n=this._getOrReturnCtx(e,n),A(n,{validation:"emoji",code:w.invalid_string,message:i.message}),o.dirty());else if(i.kind==="uuid")ty.test(e.data)||(n=this._getOrReturnCtx(e,n),A(n,{validation:"uuid",code:w.invalid_string,message:i.message}),o.dirty());else if(i.kind==="cuid")Xh.test(e.data)||(n=this._getOrReturnCtx(e,n),A(n,{validation:"cuid",code:w.invalid_string,message:i.message}),o.dirty());else if(i.kind==="cuid2")Qh.test(e.data)||(n=this._getOrReturnCtx(e,n),A(n,{validation:"cuid2",code:w.invalid_string,message:i.message}),o.dirty());else if(i.kind==="ulid")ey.test(e.data)||(n=this._getOrReturnCtx(e,n),A(n,{validation:"ulid",code:w.invalid_string,message:i.message}),o.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),A(n,{validation:"url",code:w.invalid_string,message:i.message}),o.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),A(n,{validation:"regex",code:w.invalid_string,message:i.message}),o.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),A(n,{code:w.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),o.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),A(n,{code:w.invalid_string,validation:{startsWith:i.value},message:i.message}),o.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),A(n,{code:w.invalid_string,validation:{endsWith:i.value},message:i.message}),o.dirty()):i.kind==="datetime"?ay(i).test(e.data)||(n=this._getOrReturnCtx(e,n),A(n,{code:w.invalid_string,validation:"datetime",message:i.message}),o.dirty()):i.kind==="ip"?sy(e.data,i.version)||(n=this._getOrReturnCtx(e,n),A(n,{validation:"ip",code:w.invalid_string,message:i.message}),o.dirty()):G.assertNever(i);return{status:o.value,value:e.data}}_regex(e,r,o){return this.refinement(n=>e.test(n),{validation:r,code:w.invalid_string,...k.errToObj(o)})}_addCheck(e){return new je({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...k.errToObj(e)})}url(e){return this._addCheck({kind:"url",...k.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...k.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...k.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...k.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...k.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...k.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...k.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,...k.errToObj(e?.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...k.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...k.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...k.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...k.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...k.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...k.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...k.errToObj(r)})}nonempty(e){return this.min(1,k.errToObj(e))}trim(){return new je({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new je({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new je({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};je.create=t=>{var e;return new je({checks:[],typeName:N.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...F(t)})};function cy(t,e){let r=(t.toString().split(".")[1]||"").length,o=(e.toString().split(".")[1]||"").length,n=r>o?r:o,i=parseInt(t.toFixed(n).replace(".","")),c=parseInt(e.toFixed(n).replace(".",""));return i%c/Math.pow(10,n)}var St=class extends ${constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==x.number){let i=this._getOrReturnCtx(e);return A(i,{code:w.invalid_type,expected:x.number,received:i.parsedType}),L}let o,n=new we;for(let i of this._def.checks)i.kind==="int"?G.isInteger(e.data)||(o=this._getOrReturnCtx(e,o),A(o,{code:w.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(o=this._getOrReturnCtx(e,o),A(o,{code:w.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(o=this._getOrReturnCtx(e,o),A(o,{code:w.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?cy(e.data,i.value)!==0&&(o=this._getOrReturnCtx(e,o),A(o,{code:w.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(o=this._getOrReturnCtx(e,o),A(o,{code:w.not_finite,message:i.message}),n.dirty()):G.assertNever(i);return{status:n.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,k.toString(r))}gt(e,r){return this.setLimit("min",e,!1,k.toString(r))}lte(e,r){return this.setLimit("max",e,!0,k.toString(r))}lt(e,r){return this.setLimit("max",e,!1,k.toString(r))}setLimit(e,r,o,n){return new St({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:o,message:k.toString(n)}]})}_addCheck(e){return new St({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:k.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:k.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:k.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:k.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:k.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&G.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let o of this._def.checks){if(o.kind==="finite"||o.kind==="int"||o.kind==="multipleOf")return!0;o.kind==="min"?(r===null||o.value>r)&&(r=o.value):o.kind==="max"&&(e===null||o.value<e)&&(e=o.value)}return Number.isFinite(r)&&Number.isFinite(e)}};St.create=t=>new St({checks:[],typeName:N.ZodNumber,coerce:t?.coerce||!1,...F(t)});var Pt=class extends ${constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==x.bigint){let i=this._getOrReturnCtx(e);return A(i,{code:w.invalid_type,expected:x.bigint,received:i.parsedType}),L}let o,n=new we;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(o=this._getOrReturnCtx(e,o),A(o,{code:w.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(o=this._getOrReturnCtx(e,o),A(o,{code:w.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(o=this._getOrReturnCtx(e,o),A(o,{code:w.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):G.assertNever(i);return{status:n.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,k.toString(r))}gt(e,r){return this.setLimit("min",e,!1,k.toString(r))}lte(e,r){return this.setLimit("max",e,!0,k.toString(r))}lt(e,r){return this.setLimit("max",e,!1,k.toString(r))}setLimit(e,r,o,n){return new Pt({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:o,message:k.toString(n)}]})}_addCheck(e){return new Pt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:k.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Pt.create=t=>{var e;return new Pt({checks:[],typeName:N.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...F(t)})};var Cr=class extends ${_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==x.boolean){let o=this._getOrReturnCtx(e);return A(o,{code:w.invalid_type,expected:x.boolean,received:o.parsedType}),L}return Ne(e.data)}};Cr.create=t=>new Cr({typeName:N.ZodBoolean,coerce:t?.coerce||!1,...F(t)});var Vt=class extends ${_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==x.date){let i=this._getOrReturnCtx(e);return A(i,{code:w.invalid_type,expected:x.date,received:i.parsedType}),L}if(isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return A(i,{code:w.invalid_date}),L}let o=new we,n;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(n=this._getOrReturnCtx(e,n),A(n,{code:w.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),o.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(n=this._getOrReturnCtx(e,n),A(n,{code:w.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),o.dirty()):G.assertNever(i);return{status:o.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Vt({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:k.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:k.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Vt.create=t=>new Vt({checks:[],coerce:t?.coerce||!1,typeName:N.ZodDate,...F(t)});var ao=class extends ${_parse(e){if(this._getType(e)!==x.symbol){let o=this._getOrReturnCtx(e);return A(o,{code:w.invalid_type,expected:x.symbol,received:o.parsedType}),L}return Ne(e.data)}};ao.create=t=>new ao({typeName:N.ZodSymbol,...F(t)});var Nr=class extends ${_parse(e){if(this._getType(e)!==x.undefined){let o=this._getOrReturnCtx(e);return A(o,{code:w.invalid_type,expected:x.undefined,received:o.parsedType}),L}return Ne(e.data)}};Nr.create=t=>new Nr({typeName:N.ZodUndefined,...F(t)});var Rr=class extends ${_parse(e){if(this._getType(e)!==x.null){let o=this._getOrReturnCtx(e);return A(o,{code:w.invalid_type,expected:x.null,received:o.parsedType}),L}return Ne(e.data)}};Rr.create=t=>new Rr({typeName:N.ZodNull,...F(t)});var dr=class extends ${constructor(){super(...arguments),this._any=!0}_parse(e){return Ne(e.data)}};dr.create=t=>new dr({typeName:N.ZodAny,...F(t)});var Ut=class extends ${constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ne(e.data)}};Ut.create=t=>new Ut({typeName:N.ZodUnknown,...F(t)});var pt=class extends ${_parse(e){let r=this._getOrReturnCtx(e);return A(r,{code:w.invalid_type,expected:x.never,received:r.parsedType}),L}};pt.create=t=>new pt({typeName:N.ZodNever,...F(t)});var so=class extends ${_parse(e){if(this._getType(e)!==x.undefined){let o=this._getOrReturnCtx(e);return A(o,{code:w.invalid_type,expected:x.void,received:o.parsedType}),L}return Ne(e.data)}};so.create=t=>new so({typeName:N.ZodVoid,...F(t)});var ze=class extends ${_parse(e){let{ctx:r,status:o}=this._processInputParams(e),n=this._def;if(r.parsedType!==x.array)return A(r,{code:w.invalid_type,expected:x.array,received:r.parsedType}),L;if(n.exactLength!==null){let c=r.data.length>n.exactLength.value,s=r.data.length<n.exactLength.value;(c||s)&&(A(r,{code:c?w.too_big:w.too_small,minimum:s?n.exactLength.value:void 0,maximum:c?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),o.dirty())}if(n.minLength!==null&&r.data.length<n.minLength.value&&(A(r,{code:w.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),o.dirty()),n.maxLength!==null&&r.data.length>n.maxLength.value&&(A(r,{code:w.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),o.dirty()),r.common.async)return Promise.all([...r.data].map((c,s)=>n.type._parseAsync(new nt(r,c,r.path,s)))).then(c=>we.mergeArray(o,c));let i=[...r.data].map((c,s)=>n.type._parseSync(new nt(r,c,r.path,s)));return we.mergeArray(o,i)}get element(){return this._def.type}min(e,r){return new ze({...this._def,minLength:{value:e,message:k.toString(r)}})}max(e,r){return new ze({...this._def,maxLength:{value:e,message:k.toString(r)}})}length(e,r){return new ze({...this._def,exactLength:{value:e,message:k.toString(r)}})}nonempty(e){return this.min(1,e)}};ze.create=(t,e)=>new ze({type:t,minLength:null,maxLength:null,exactLength:null,typeName:N.ZodArray,...F(e)});function io(t){if(t instanceof Y){let e={};for(let r in t.shape){let o=t.shape[r];e[r]=ft.create(io(o))}return new Y({...t._def,shape:()=>e})}else return t instanceof ze?new ze({...t._def,type:io(t.element)}):t instanceof ft?ft.create(io(t.unwrap())):t instanceof qt?qt.create(io(t.unwrap())):t instanceof it?it.create(t.items.map(e=>io(e))):t}var Y=class extends ${constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=G.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==x.object){let g=this._getOrReturnCtx(e);return A(g,{code:w.invalid_type,expected:x.object,received:g.parsedType}),L}let{status:o,ctx:n}=this._processInputParams(e),{shape:i,keys:c}=this._getCached(),s=[];if(!(this._def.catchall instanceof pt&&this._def.unknownKeys==="strip"))for(let g in n.data)c.includes(g)||s.push(g);let u=[];for(let g of c){let h=i[g],S=n.data[g];u.push({key:{status:"valid",value:g},value:h._parse(new nt(n,S,n.path,g)),alwaysSet:g in n.data})}if(this._def.catchall instanceof pt){let g=this._def.unknownKeys;if(g==="passthrough")for(let h of s)u.push({key:{status:"valid",value:h},value:{status:"valid",value:n.data[h]}});else if(g==="strict")s.length>0&&(A(n,{code:w.unrecognized_keys,keys:s}),o.dirty());else if(g!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let g=this._def.catchall;for(let h of s){let S=n.data[h];u.push({key:{status:"valid",value:h},value:g._parse(new nt(n,S,n.path,h)),alwaysSet:h in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let g=[];for(let h of u){let S=await h.key;g.push({key:S,value:await h.value,alwaysSet:h.alwaysSet})}return g}).then(g=>we.mergeObjectSync(o,g)):we.mergeObjectSync(o,u)}get shape(){return this._def.shape()}strict(e){return k.errToObj,new Y({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,o)=>{var n,i,c,s;let u=(c=(i=(n=this._def).errorMap)===null||i===void 0?void 0:i.call(n,r,o).message)!==null&&c!==void 0?c:o.defaultError;return r.code==="unrecognized_keys"?{message:(s=k.errToObj(e).message)!==null&&s!==void 0?s:u}:{message:u}}}:{}})}strip(){return new Y({...this._def,unknownKeys:"strip"})}passthrough(){return new Y({...this._def,unknownKeys:"passthrough"})}extend(e){return new Y({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Y({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:N.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Y({...this._def,catchall:e})}pick(e){let r={};return G.objectKeys(e).forEach(o=>{e[o]&&this.shape[o]&&(r[o]=this.shape[o])}),new Y({...this._def,shape:()=>r})}omit(e){let r={};return G.objectKeys(this.shape).forEach(o=>{e[o]||(r[o]=this.shape[o])}),new Y({...this._def,shape:()=>r})}deepPartial(){return io(this)}partial(e){let r={};return G.objectKeys(this.shape).forEach(o=>{let n=this.shape[o];e&&!e[o]?r[o]=n:r[o]=n.optional()}),new Y({...this._def,shape:()=>r})}required(e){let r={};return G.objectKeys(this.shape).forEach(o=>{if(e&&!e[o])r[o]=this.shape[o];else{let i=this.shape[o];for(;i instanceof ft;)i=i._def.innerType;r[o]=i}}),new Y({...this._def,shape:()=>r})}keyof(){return Bf(G.objectKeys(this.shape))}};Y.create=(t,e)=>new Y({shape:()=>t,unknownKeys:"strip",catchall:pt.create(),typeName:N.ZodObject,...F(e)});Y.strictCreate=(t,e)=>new Y({shape:()=>t,unknownKeys:"strict",catchall:pt.create(),typeName:N.ZodObject,...F(e)});Y.lazycreate=(t,e)=>new Y({shape:t,unknownKeys:"strip",catchall:pt.create(),typeName:N.ZodObject,...F(e)});var Lr=class extends ${_parse(e){let{ctx:r}=this._processInputParams(e),o=this._def.options;function n(i){for(let s of i)if(s.result.status==="valid")return s.result;for(let s of i)if(s.result.status==="dirty")return r.common.issues.push(...s.ctx.common.issues),s.result;let c=i.map(s=>new He(s.ctx.common.issues));return A(r,{code:w.invalid_union,unionErrors:c}),L}if(r.common.async)return Promise.all(o.map(async i=>{let c={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:c}),ctx:c}})).then(n);{let i,c=[];for(let u of o){let g={...r,common:{...r.common,issues:[]},parent:null},h=u._parseSync({data:r.data,path:r.path,parent:g});if(h.status==="valid")return h;h.status==="dirty"&&!i&&(i={result:h,ctx:g}),g.common.issues.length&&c.push(g.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;let s=c.map(u=>new He(u));return A(r,{code:w.invalid_union,unionErrors:s}),L}}get options(){return this._def.options}};Lr.create=(t,e)=>new Lr({options:t,typeName:N.ZodUnion,...F(e)});var hi=t=>t instanceof $r?hi(t.schema):t instanceof Je?hi(t.innerType()):t instanceof Mr?[t.value]:t instanceof xt?t.options:t instanceof Br?Object.keys(t.enum):t instanceof Ur?hi(t._def.innerType):t instanceof Nr?[void 0]:t instanceof Rr?[null]:null,co=class extends ${_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==x.object)return A(r,{code:w.invalid_type,expected:x.object,received:r.parsedType}),L;let o=this.discriminator,n=r.data[o],i=this.optionsMap.get(n);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(A(r,{code:w.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[o]}),L)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,o){let n=new Map;for(let i of r){let c=hi(i.shape[e]);if(!c)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let s of c){if(n.has(s))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(s)}`);n.set(s,i)}}return new co({typeName:N.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:n,...F(o)})}};function Hs(t,e){let r=cr(t),o=cr(e);if(t===e)return{valid:!0,data:t};if(r===x.object&&o===x.object){let n=G.objectKeys(e),i=G.objectKeys(t).filter(s=>n.indexOf(s)!==-1),c={...t,...e};for(let s of i){let u=Hs(t[s],e[s]);if(!u.valid)return{valid:!1};c[s]=u.data}return{valid:!0,data:c}}else if(r===x.array&&o===x.array){if(t.length!==e.length)return{valid:!1};let n=[];for(let i=0;i<t.length;i++){let c=t[i],s=e[i],u=Hs(c,s);if(!u.valid)return{valid:!1};n.push(u.data)}return{valid:!0,data:n}}else return r===x.date&&o===x.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var Dr=class extends ${_parse(e){let{status:r,ctx:o}=this._processInputParams(e),n=(i,c)=>{if(Gs(i)||Gs(c))return L;let s=Hs(i.value,c.value);return s.valid?((js(i)||js(c))&&r.dirty(),{status:r.value,value:s.data}):(A(o,{code:w.invalid_intersection_types}),L)};return o.common.async?Promise.all([this._def.left._parseAsync({data:o.data,path:o.path,parent:o}),this._def.right._parseAsync({data:o.data,path:o.path,parent:o})]).then(([i,c])=>n(i,c)):n(this._def.left._parseSync({data:o.data,path:o.path,parent:o}),this._def.right._parseSync({data:o.data,path:o.path,parent:o}))}};Dr.create=(t,e,r)=>new Dr({left:t,right:e,typeName:N.ZodIntersection,...F(r)});var it=class extends ${_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==x.array)return A(o,{code:w.invalid_type,expected:x.array,received:o.parsedType}),L;if(o.data.length<this._def.items.length)return A(o,{code:w.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),L;!this._def.rest&&o.data.length>this._def.items.length&&(A(o,{code:w.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let i=[...o.data].map((c,s)=>{let u=this._def.items[s]||this._def.rest;return u?u._parse(new nt(o,c,o.path,s)):null}).filter(c=>!!c);return o.common.async?Promise.all(i).then(c=>we.mergeArray(r,c)):we.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new it({...this._def,rest:e})}};it.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new it({items:t,typeName:N.ZodTuple,rest:null,...F(e)})};var Fr=class extends ${get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==x.object)return A(o,{code:w.invalid_type,expected:x.object,received:o.parsedType}),L;let n=[],i=this._def.keyType,c=this._def.valueType;for(let s in o.data)n.push({key:i._parse(new nt(o,s,o.path,s)),value:c._parse(new nt(o,o.data[s],o.path,s))});return o.common.async?we.mergeObjectAsync(r,n):we.mergeObjectSync(r,n)}get element(){return this._def.valueType}static create(e,r,o){return r instanceof $?new Fr({keyType:e,valueType:r,typeName:N.ZodRecord,...F(o)}):new Fr({keyType:je.create(),valueType:e,typeName:N.ZodRecord,...F(r)})}},uo=class extends ${get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==x.map)return A(o,{code:w.invalid_type,expected:x.map,received:o.parsedType}),L;let n=this._def.keyType,i=this._def.valueType,c=[...o.data.entries()].map(([s,u],g)=>({key:n._parse(new nt(o,s,o.path,[g,"key"])),value:i._parse(new nt(o,u,o.path,[g,"value"]))}));if(o.common.async){let s=new Map;return Promise.resolve().then(async()=>{for(let u of c){let g=await u.key,h=await u.value;if(g.status==="aborted"||h.status==="aborted")return L;(g.status==="dirty"||h.status==="dirty")&&r.dirty(),s.set(g.value,h.value)}return{status:r.value,value:s}})}else{let s=new Map;for(let u of c){let g=u.key,h=u.value;if(g.status==="aborted"||h.status==="aborted")return L;(g.status==="dirty"||h.status==="dirty")&&r.dirty(),s.set(g.value,h.value)}return{status:r.value,value:s}}}};uo.create=(t,e,r)=>new uo({valueType:e,keyType:t,typeName:N.ZodMap,...F(r)});var Wt=class extends ${_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==x.set)return A(o,{code:w.invalid_type,expected:x.set,received:o.parsedType}),L;let n=this._def;n.minSize!==null&&o.data.size<n.minSize.value&&(A(o,{code:w.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),r.dirty()),n.maxSize!==null&&o.data.size>n.maxSize.value&&(A(o,{code:w.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),r.dirty());let i=this._def.valueType;function c(u){let g=new Set;for(let h of u){if(h.status==="aborted")return L;h.status==="dirty"&&r.dirty(),g.add(h.value)}return{status:r.value,value:g}}let s=[...o.data.values()].map((u,g)=>i._parse(new nt(o,u,o.path,g)));return o.common.async?Promise.all(s).then(u=>c(u)):c(s)}min(e,r){return new Wt({...this._def,minSize:{value:e,message:k.toString(r)}})}max(e,r){return new Wt({...this._def,maxSize:{value:e,message:k.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Wt.create=(t,e)=>new Wt({valueType:t,minSize:null,maxSize:null,typeName:N.ZodSet,...F(e)});var ur=class extends ${constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==x.function)return A(r,{code:w.invalid_type,expected:x.function,received:r.parsedType}),L;function o(s,u){return vi({data:s,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,yi(),nn].filter(g=>!!g),issueData:{code:w.invalid_arguments,argumentsError:u}})}function n(s,u){return vi({data:s,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,yi(),nn].filter(g=>!!g),issueData:{code:w.invalid_return_type,returnTypeError:u}})}let i={errorMap:r.common.contextualErrorMap},c=r.data;if(this._def.returns instanceof fr){let s=this;return Ne(async function(...u){let g=new He([]),h=await s._def.args.parseAsync(u,i).catch(ge=>{throw g.addIssue(o(u,ge)),g}),S=await Reflect.apply(c,this,h);return await s._def.returns._def.type.parseAsync(S,i).catch(ge=>{throw g.addIssue(n(S,ge)),g})})}else{let s=this;return Ne(function(...u){let g=s._def.args.safeParse(u,i);if(!g.success)throw new He([o(u,g.error)]);let h=Reflect.apply(c,this,g.data),S=s._def.returns.safeParse(h,i);if(!S.success)throw new He([n(h,S.error)]);return S.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ur({...this._def,args:it.create(e).rest(Ut.create())})}returns(e){return new ur({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,o){return new ur({args:e||it.create([]).rest(Ut.create()),returns:r||Ut.create(),typeName:N.ZodFunction,...F(o)})}},$r=class extends ${get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};$r.create=(t,e)=>new $r({getter:t,typeName:N.ZodLazy,...F(e)});var Mr=class extends ${_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return A(r,{received:r.data,code:w.invalid_literal,expected:this._def.value}),L}return{status:"valid",value:e.data}}get value(){return this._def.value}};Mr.create=(t,e)=>new Mr({value:t,typeName:N.ZodLiteral,...F(e)});function Bf(t,e){return new xt({values:t,typeName:N.ZodEnum,...F(e)})}var xt=class extends ${_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),o=this._def.values;return A(r,{expected:G.joinValues(o),received:r.parsedType,code:w.invalid_type}),L}if(this._def.values.indexOf(e.data)===-1){let r=this._getOrReturnCtx(e),o=this._def.values;return A(r,{received:r.data,code:w.invalid_enum_value,options:o}),L}return Ne(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e){return xt.create(e)}exclude(e){return xt.create(this.options.filter(r=>!e.includes(r)))}};xt.create=Bf;var Br=class extends ${_parse(e){let r=G.getValidEnumValues(this._def.values),o=this._getOrReturnCtx(e);if(o.parsedType!==x.string&&o.parsedType!==x.number){let n=G.objectValues(r);return A(o,{expected:G.joinValues(n),received:o.parsedType,code:w.invalid_type}),L}if(r.indexOf(e.data)===-1){let n=G.objectValues(r);return A(o,{received:o.data,code:w.invalid_enum_value,options:n}),L}return Ne(e.data)}get enum(){return this._def.values}};Br.create=(t,e)=>new Br({values:t,typeName:N.ZodNativeEnum,...F(e)});var fr=class extends ${unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==x.promise&&r.common.async===!1)return A(r,{code:w.invalid_type,expected:x.promise,received:r.parsedType}),L;let o=r.parsedType===x.promise?r.data:Promise.resolve(r.data);return Ne(o.then(n=>this._def.type.parseAsync(n,{path:r.path,errorMap:r.common.contextualErrorMap})))}};fr.create=(t,e)=>new fr({type:t,typeName:N.ZodPromise,...F(e)});var Je=class extends ${innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===N.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:o}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:c=>{A(o,c),c.fatal?r.abort():r.dirty()},get path(){return o.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){let c=n.transform(o.data,i);return o.common.issues.length?{status:"dirty",value:o.data}:o.common.async?Promise.resolve(c).then(s=>this._def.schema._parseAsync({data:s,path:o.path,parent:o})):this._def.schema._parseSync({data:c,path:o.path,parent:o})}if(n.type==="refinement"){let c=s=>{let u=n.refinement(s,i);if(o.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(o.common.async===!1){let s=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});return s.status==="aborted"?L:(s.status==="dirty"&&r.dirty(),c(s.value),{status:r.value,value:s.value})}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(s=>s.status==="aborted"?L:(s.status==="dirty"&&r.dirty(),c(s.value).then(()=>({status:r.value,value:s.value}))))}if(n.type==="transform")if(o.common.async===!1){let c=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!an(c))return c;let s=n.transform(c.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:s}}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(c=>an(c)?Promise.resolve(n.transform(c.value,i)).then(s=>({status:r.value,value:s})):c);G.assertNever(n)}};Je.create=(t,e,r)=>new Je({schema:t,typeName:N.ZodEffects,effect:e,...F(r)});Je.createWithPreprocess=(t,e,r)=>new Je({schema:e,effect:{type:"preprocess",transform:t},typeName:N.ZodEffects,...F(r)});var ft=class extends ${_parse(e){return this._getType(e)===x.undefined?Ne(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ft.create=(t,e)=>new ft({innerType:t,typeName:N.ZodOptional,...F(e)});var qt=class extends ${_parse(e){return this._getType(e)===x.null?Ne(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};qt.create=(t,e)=>new qt({innerType:t,typeName:N.ZodNullable,...F(e)});var Ur=class extends ${_parse(e){let{ctx:r}=this._processInputParams(e),o=r.data;return r.parsedType===x.undefined&&(o=this._def.defaultValue()),this._def.innerType._parse({data:o,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Ur.create=(t,e)=>new Ur({innerType:t,typeName:N.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...F(e)});var fo=class extends ${_parse(e){let{ctx:r}=this._processInputParams(e),o={...r,common:{...r.common,issues:[]}},n=this._def.innerType._parse({data:o.data,path:o.path,parent:{...o}});return _i(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new He(o.common.issues)},input:o.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new He(o.common.issues)},input:o.data})}}removeCatch(){return this._def.innerType}};fo.create=(t,e)=>new fo({innerType:t,typeName:N.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...F(e)});var po=class extends ${_parse(e){if(this._getType(e)!==x.nan){let o=this._getOrReturnCtx(e);return A(o,{code:w.invalid_type,expected:x.nan,received:o.parsedType}),L}return{status:"valid",value:e.data}}};po.create=t=>new po({typeName:N.ZodNaN,...F(t)});var uy=Symbol("zod_brand"),wi=class extends ${_parse(e){let{ctx:r}=this._processInputParams(e),o=r.data;return this._def.type._parse({data:o,path:r.path,parent:r})}unwrap(){return this._def.type}},Vr=class extends ${_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:o.data,path:o.path,parent:o});return i.status==="aborted"?L:i.status==="dirty"?(r.dirty(),Mf(i.value)):this._def.out._parseAsync({data:i.value,path:o.path,parent:o})})();{let n=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return n.status==="aborted"?L:n.status==="dirty"?(r.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:o.path,parent:o})}}static create(e,r){return new Vr({in:e,out:r,typeName:N.ZodPipeline})}},lo=class extends ${_parse(e){let r=this._def.innerType._parse(e);return an(r)&&(r.value=Object.freeze(r.value)),r}};lo.create=(t,e)=>new lo({innerType:t,typeName:N.ZodReadonly,...F(e)});var Uf=(t,e={},r)=>t?dr.create().superRefine((o,n)=>{var i,c;if(!t(o)){let s=typeof e=="function"?e(o):typeof e=="string"?{message:e}:e,u=(c=(i=s.fatal)!==null&&i!==void 0?i:r)!==null&&c!==void 0?c:!0,g=typeof s=="string"?{message:s}:s;n.addIssue({code:"custom",...g,fatal:u})}}):dr.create(),dy={object:Y.lazycreate},N;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(N||(N={}));var fy=(t,e={message:`Input not instance of ${t.name}`})=>Uf(r=>r instanceof t,e),Vf=je.create,Wf=St.create,py=po.create,ly=Pt.create,qf=Cr.create,my=Vt.create,gy=ao.create,hy=Nr.create,yy=Rr.create,vy=dr.create,_y=Ut.create,wy=pt.create,Ey=so.create,by=ze.create,Sy=Y.create,Py=Y.strictCreate,xy=Lr.create,Ty=co.create,Ay=Dr.create,Iy=it.create,ky=Fr.create,Oy=uo.create,Cy=Wt.create,Ny=ur.create,Ry=$r.create,Ly=Mr.create,Dy=xt.create,Fy=Br.create,$y=fr.create,Ff=Je.create,My=ft.create,By=qt.create,Uy=Je.createWithPreprocess,Vy=Vr.create,Wy=()=>Vf().optional(),qy=()=>Wf().optional(),Gy=()=>qf().optional(),jy={string:t=>je.create({...t,coerce:!0}),number:t=>St.create({...t,coerce:!0}),boolean:t=>Cr.create({...t,coerce:!0}),bigint:t=>Pt.create({...t,coerce:!0}),date:t=>Vt.create({...t,coerce:!0})},Hy=L,C=Object.freeze({__proto__:null,defaultErrorMap:nn,setErrorMap:Kh,getErrorMap:yi,makeIssue:vi,EMPTY_PATH:Yh,addIssueToContext:A,ParseStatus:we,INVALID:L,DIRTY:Mf,OK:Ne,isAborted:Gs,isDirty:js,isValid:an,isAsync:_i,get util(){return G},get objectUtil(){return qs},ZodParsedType:x,getParsedType:cr,ZodType:$,ZodString:je,ZodNumber:St,ZodBigInt:Pt,ZodBoolean:Cr,ZodDate:Vt,ZodSymbol:ao,ZodUndefined:Nr,ZodNull:Rr,ZodAny:dr,ZodUnknown:Ut,ZodNever:pt,ZodVoid:so,ZodArray:ze,ZodObject:Y,ZodUnion:Lr,ZodDiscriminatedUnion:co,ZodIntersection:Dr,ZodTuple:it,ZodRecord:Fr,ZodMap:uo,ZodSet:Wt,ZodFunction:ur,ZodLazy:$r,ZodLiteral:Mr,ZodEnum:xt,ZodNativeEnum:Br,ZodPromise:fr,ZodEffects:Je,ZodTransformer:Je,ZodOptional:ft,ZodNullable:qt,ZodDefault:Ur,ZodCatch:fo,ZodNaN:po,BRAND:uy,ZodBranded:wi,ZodPipeline:Vr,ZodReadonly:lo,custom:Uf,Schema:$,ZodSchema:$,late:dy,get ZodFirstPartyTypeKind(){return N},coerce:jy,any:vy,array:by,bigint:ly,boolean:qf,date:my,discriminatedUnion:Ty,effect:Ff,enum:Dy,function:Ny,instanceof:fy,intersection:Ay,lazy:Ry,literal:Ly,map:Oy,nan:py,nativeEnum:Fy,never:wy,null:yy,nullable:By,number:Wf,object:Sy,oboolean:Gy,onumber:qy,optional:My,ostring:Wy,pipeline:Vy,preprocess:Uy,promise:$y,record:ky,set:Cy,strictObject:Py,string:Vf,symbol:gy,transformer:Ff,tuple:Iy,undefined:hy,union:xy,unknown:_y,void:Ey,NEVER:Hy,ZodIssueCode:w,quotelessJson:Zh,ZodError:He});var zy=["delay","page_view","exit_intent","none"],Gf=C.object({desktop:C.string(),mobile:C.string(),profile:C.string()}).partial(),jf=C.object({name:C.string(),percent:C.number().lte(1).default(1),formConfig:Gf}).partial(),Jy=C.object({triggerType:C.enum(zy),triggerCount:C.number().int(),scoreThreshold:C.number(),formConfig:Gf}).partial(),Zy=C.object({name:C.string(),scoreName:C.string(),percent:C.number().lte(1).default(1),showOverlayOnATC:C.boolean(),showSecondOverlayOnExitIntent:C.boolean(),formBuckets:jf,maxTotalOverlays:C.number().int().gte(0),triggers:C.array(Jy)}).partial(),Ky=Zy.required({name:!0}),Yy=C.object({name:C.string(),percent:C.number().lte(1).default(1),triggerBuckets:Ky}).partial(),Xy=Yy.required({name:!0}),Qy=C.object({zIndex:C.string()}).partial(),ev=C.object({renderer:C.string().toLowerCase(),rendererVersion:C.string(),identifyPlatforms:C.array(C.string()),ignoredPagePaths:C.array(C.string()),overlayClosedCookieDuration:C.number(),version:C.coerce.number(),excludedQueryParams:C.array(C.object({name:C.string(),value:C.string()})),styleSettings:C.array(Qy),blockOverlayOnCssSelectors:C.array(C.string()),formBuckets:jf,overlayBuckets:Xy}).partial(),Hf=ev.required({renderer:!0});var mo=class{constructor(e){this.setting=Hf.parse(e)}static safeFromConfigJSON(){try{return this.isDisabled()?void 0:new mo(ti(V))}catch(e){a.error(new Error(`[PWO] Error parsing overlay setting: ${e}`));return}}static fromConfigJSON(){return new mo(ti(V))}static isDisabled(){return Object.keys(ti(V)||{})?.length===0}get rendererName(){return this.setting.renderer}get rendererVersion(){return this.setting.rendererVersion}get identifyPlatforms(){return this.setting.identifyPlatforms}get ignoredPagePaths(){return this.setting.ignoredPagePaths}get overlayClosedCookieDuration(){return this.setting.overlayClosedCookieDuration}get version(){return this.setting.version}get excludedQueryParams(){return this.setting.excludedQueryParams}get blockOverlayOnCssSelectors(){return this.setting.blockOverlayOnCssSelectors}get styleSettings(){return this.setting.styleSettings}get formBuckets(){return this.setting.formBuckets}get overlayBuckets(){return this.setting.overlayBuckets}get triggerBuckets(){return this.setting.overlayBuckets?.triggerBuckets}get maxTotalOverlays(){return this.setting.overlayBuckets?.triggerBuckets?.maxTotalOverlays}get showSecondOverlayOnExitIntent(){return this.setting.overlayBuckets?.triggerBuckets?.showSecondOverlayOnExitIntent}get showOverlayOnATC(){return this.triggerBuckets?.showOverlayOnATC}hasExcludedUrlParams(){return!!this.setting.excludedQueryParams?.some(({name:e,value:r})=>ce(e,void 0)?.toLowerCase()===r.toLowerCase())}get scoreName(){return this.triggerBuckets?.scoreName}get defaultFormConfig(){return this.setting.formBuckets?.formConfig}get triggerBucketFormConfig(){return this.setting.overlayBuckets?.triggerBuckets?.formBuckets?.formConfig}hasValidOverlayBucketFormConfig(){return this.triggerBucketFormConfig!==void 0&&Object.keys(this.triggerBucketFormConfig).length>0}extractRelevantFormConfig(){let e=this.defaultFormConfig;return this.hasValidOverlayBucketFormConfig()&&(e=this.triggerBucketFormConfig),{formId:br(Ee()).deviceType==="mobile"?e?.mobile:e?.desktop,profile:e?.profile}}get identifierNames(){return this.identifyPlatforms||[this.rendererName]}},at=mo;function sn(t,e){if(typeof e!="function")return;let r=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(...o){try{o[1]?.match(t)&&e&&_.addListener(this,"load",()=>{this.responseType===""||this.responseType==="text"?e(this.responseText):this.responseType==="json"&&e(JSON.stringify(this.response))})}catch{a.error(new Be(`XHR Sniffer Error For URL: ${t}`))}return r.apply(this,o)}}function Ei(t,e){let r=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(...o){try{o[1]?.match(t)&&e(o)}catch{a.error(new Be(`XHR Intercept Error For URL: ${t}`))}return r.apply(this,o)}}var lt=class{constructor(){this.applicationName=V?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return nr}hasEventBeenObserved(e,r){if(r===y.PWO_IMPR&&e.length===0){if(lt.xhrImpressionCount<=lt.loadImpressionCount)return!0;a.error(T(`[${this.applicationName}] ${lt.getPlatformName()} - Impression event not observed from load ju_windowevent.`))}return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),le(r,_e({rendered_form_id:e},o,n)))}getJustunoApp(){if(!window.juapp){let e=(...r)=>{let o=window?.juapp?.q||[];window.juapp&&(window.juapp.q=o),o.push(r)};window.juapp=e}return window.juapp}setup(){return this.observedEvents={},window.ju_windowevent=(e,r)=>{e==="load"&&(lt.loadImpressionCount+=1,this.handleEvent(r,y.PWO_IMPR)),e==="unload"&&this.handleEvent(r,y.PWO_CLOSE)},Ei("(justuno.com|jst.ai)/api/analytics/impression",()=>{lt.xhrImpressionCount+=1,this.handleEvent("",y.PWO_IMPR)}),this.getJustunoApp()("trackFunc","engagement",(e,r,o,n,i,c)=>{let s=c.find(u=>u.name==="phone_number"&&u.value.length>0)?.value;s?(fe(s),this.handleEvent(n,y.PWO_SMS_LEAD,s,e)):e&&(K(e),this.handleEvent(n,y.PWO_EMAIL_LEAD,void 0,e))}),new Promise((e,r)=>D(()=>{if(window.ju_loadiframe&&typeof window.ju_loadiframe=="function"&&window.ju_initialized)return this.hasSetupCompletedSuccessfully=!0,e();throw new Error(`${lt.getPlatformName()} globals not found`)},()=>{let o=T(`[${this.applicationName}] ${lt.getPlatformName()} globals not found.`);a.error(o),r(o)},100))}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized()||!window.ju_loadiframe)throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${lt.getPlatformName()} was not initialized.`);delete this.observedEvents[e],window.ju_loadiframe({campaign_id:e??""})}static getInstance(){return new lt}},go=lt;go.loadImpressionCount=0,go.xhrImpressionCount=0;function zs(t){try{t instanceof Error&&t.stack&&(t.stack=Su(t.stack))}catch{}}function zf(t){return typeof t=="string"?t:t instanceof Request?t.url??"":""}function cn(t,e){if(typeof e!="function")return;let r=window.fetch;window.fetch=(...o)=>r.apply(this,o).then(n=>{try{zf(o[0]).match(t)&&e(n.clone())}catch(i){a.error(new Be(`Fetch Sniffer for "${t}" failing with "${i?.message}" possibly due to unexpected ${o}.`))}return n}).catch(n=>{throw zs(n),n})}function pr(t,e,r){let o=window.fetch;window.fetch=function(...n){try{if(zf(n[0]).match(t)){if(r)return o.apply(this,n).then(_.setTimeout(()=>e(n),500)).catch(i=>{throw zs(i),i});e(n)}}catch{a.error(new Be(`Fetch Intercept Error For URL: ${t}`))}return o.apply(this,n).catch(i=>{throw zs(i),i})}}async function tv(){try{return Number(await I(la))||0}catch(t){return a.error(t),0}}async function Ze(){try{return Number(await I(ma))||0}catch(t){return a.error(t),0}}async function Jf(){try{let t=await tv();X(la,t+1,1051200);let e=await Ze();e<1&&Ae("platform",y.SESSION),X(ma,e+1,30)}catch(t){a.error(t)}}function rv(t){te(()=>{_.addListener(document?.documentElement,"mouseleave",t)})}function ov(t){let e=Jn(),r=ed();if(r>0){let o=_.setInterval(()=>{let n=e-Jn();n<0&&(n=0,e=Jn()),(n/r>.3||n>4500)&&(clearInterval(o),t())},150)}}function nv(t){if(v())return;let e=r=>{r.state?.exiting&&(_.removeListener(window,"popstate",e),t())};te(async()=>{try{let r=await Ze();window.history.state||(window.history.replaceState({exiting:r===1},"",window.location.href),r===1&&window.history.pushState({exiting:!1},"",window.location.href)),_.addListener(window,"popstate",e)}catch(r){a.error(r)}})}function iv(t){ov(t),nv(t)}function Zf(t){br(Ee()).deviceType!=="mobile"?rv(t):iv(t)}function ho(t){let e=ce("bcaiMockScore");if(e)return e;let r=ot(`${ut}.scores`)??[];return t?r.find(({name:o})=>o===t)?.score:void 0}var Tt=class{constructor(){this.applicationName=V?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1;this.previousEnrolledWorkflows=[]}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),le(r,_e({rendered_form_id:e},o,n)))}handleStateChangeEvent(e){let r=JSON.parse(JSON.stringify(e));delete r.workflowEvalStatus,(!this.previousJustunoAppState||JSON.stringify(this.previousJustunoAppState)!==JSON.stringify(r))&&(r.onsiteOpenState.filter(({workflowID:n})=>!this.previousJustunoAppState||!this.previousJustunoAppState.onsiteOpenState.find(({workflowID:i})=>i===n)).map(({workflowID:n})=>n).forEach(n=>{this.handleEvent(n,y.PWO_IMPR)}),this.previousJustunoAppState=r)}handleFetchInterceptEvent(){let e=(window._jst?.profile?.enrolled_workflows??[]).map(c=>JSON.parse(c)),r=e.filter(c=>c.workflow_id&&!this.previousEnrolledWorkflows.find(s=>s.workflow_id===c.workflow_id&&s.enrolled_time===c.enrolled_time&&s.end_time===c.end_time)),o=window._jst?.profile?.updatedProps?.email,n=window._jst?.profile?.updatedProps?.sms;r.forEach(c=>{o&&(K(o),this.handleEvent(c.workflow_id,y.PWO_EMAIL_LEAD,n,o)),n&&(fe(n),this.handleEvent(c.workflow_id,y.PWO_SMS_LEAD,n,o))}),r.filter(c=>c.end_time&&!this.previousEnrolledWorkflows.find(s=>c.workflow_id===s.workflow_id&&c.enrolled_time===s.enrolled_time&&s.end_time===c.end_time)).forEach(c=>{this.handleEvent(c.workflow_id,y.PWO_CLOSE)}),this.previousEnrolledWorkflows=e}setup(){return this.observedEvents={},window.ju_blackcrow={predictions:{submit:{score:0,triggeredExperienceIds:[]}}},oo(new Promise((e,r)=>D(()=>{if(window.ju4app!==void 0){window.ju4app("initFunc",()=>{window._jst.store.events.subscribe("stateChange",o=>{this.handleStateChangeEvent(o)}),pr("justone.ai/v1/public/(display|properties|workflows)",()=>{this.handleFetchInterceptEvent()},!0),this.hasSetupCompletedSuccessfully=!0,e()});return}throw new Error(`${Tt.getPlatformName()} globals not found`)},()=>{let o=T(`[${this.applicationName}] ${Tt.getPlatformName()} globals not found.`);a.error(o),r(o)},15)),5e3,T(`[${this.applicationName}] ${Tt.getPlatformName()} Timed out waiting for initFunc.`))}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized()||!window.ju_blackcrow)throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${Tt.getPlatformName()} was not initialized.`);window.ju_blackcrow&&(delete this.observedEvents[e],window.ju_blackcrow.predictions.submit.score=ho(at.fromConfigJSON().scoreName),window.ju_blackcrow.predictions.submit.triggeredExperienceIds?.push(e))}static getPlatformName(){return nr}static getInstance(){return new Tt}};var un=class{static getPlatformName(){return nr}static getInstance(){return at.safeFromConfigJSON()?.rendererVersion==="4"?Tt.getInstance():go.getInstance()}};function av(t){let e=t.type,r=t?.metaData,o=null;switch(e){case"open":o=y.PWO_IMPR;break;case"submit":r?.$email&&(o=y.PWO_EMAIL_LEAD,K(r.$email));break;case"stepSubmit":r?.$phone_number&&(o=y.PWO_SMS_LEAD,fe(r.$phone_number));break;case"close":o=y.PWO_CLOSE;break;default:break}return o}var sv=["open","embedOpen","close","redirectedToUrl","submit","stepSubmit"],mt=class{constructor(){this.applicationName=V?.toUpperCase();this.hasSetupCompletedSuccessfully=!1;this.observedEvents={}}hasEventBeenObserved(e,r){return r&&this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}handleEvent(e){let r=e?.formId,o=av(e);this.hasEventBeenObserved(r,o)||(this.addToObservedEvents(r,o),le(o,_e({rendered_form_id:r},e?.metaData?.$phone_number,e?.metaData?.$email)),o===y.PWO_EMAIL_LEAD&&tn(["track","Welcome Form Submit"]))}setup(){return this.observedEvents={},_.addListener(window,"klaviyoForms",e=>{e.detail&&sv.includes(e.detail.type)&&this.handleEvent(e.detail)}),new Promise((e,r)=>D(()=>{if(!li()||typeof Vs()!="function")throw new Error(`${mt.getPlatformName()} globals not found`);this.hasSetupCompletedSuccessfully=!0,e()},()=>{let o=T(`[${this.applicationName}] ${mt.getPlatformName()} globals not found.`);a.error(o),r(o)},100))}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${mt.getPlatformName()} was not initialized.`);delete this.observedEvents[e],Of(e)}getOverlayNode(e=""){if(e==="")return;let r=document.querySelectorAll(`form[data-testid=klaviyo-form-${e}]`);if(r.length===0)return;if(r.length>1)throw new Error(`[${this.applicationName}] Expected exactly one matching ${mt.getPlatformName()} form but found ${r?.length}. Form ID: ${e}`);let o=r[0];function n(i){return i instanceof HTMLBodyElement}for(;o&&!n(o.parentElement);)o=o?.parentNode||void 0;return o}static getPlatformName(){return di}static getInstance(){return new mt}};async function Re(t,e=2e3,r=100){let o=Date.now()+e,n=t();for(;!n&&Date.now()<o;)await ue(r),n=t();return n}var At=class{constructor(){this.applicationName=V?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return fi}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),le(r,_e({rendered_form_id:e},o,n)))}async setup(){if(this.observedEvents={},!await Re(()=>typeof window.postscript?.popups?.open=="function",5*60*1e3)){let r=T(`[${this.applicationName}] ${At.getPlatformName()} globals not found.`);throw a.error(r),r}await ue(2e3),_.addListener(window,"postscriptPopup",r=>{if(r.detail.type==="formSubmit"){let{values:o,popupId:n}=r.detail;o?.email&&o.email.length&&(K(o.email),this.handleEvent(n.toString(),y.PWO_EMAIL_LEAD,o.phone,o.email)),o?.phone&&o.phone.length&&(fe(o.phone),this.handleEvent(n.toString(),y.PWO_SMS_LEAD,o.phone,o.email))}}),this.hasSetupCompletedSuccessfully=!0}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${At.getPlatformName()} was not initialized.`);let r=Number(e);if(Number.isNaN(r))throw new Error(`[${this.applicationName}] Cannot trigger overlay for ${At.getPlatformName()} due to an invalid formId: ${e}`);delete this.observedEvents[e],window.postscript.popups.open(r,{activePopupBehavior:"ALWAYS_DISMISS",respectPopupStatus:!1})}static getInstance(){return new At}};var It=class{constructor(){this.applicationName=V?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return Pf}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),le(r,_e({rendered_form_id:e},o,n)))}async setup(){if(this.observedEvents={},!await Re(()=>window?._recart?.isReady(),6e3)){let r=T(`[${this.applicationName}] ${It.getPlatformName()} globals not found.`);throw a.error(r),r}pr(/https:\/\/api.recart.com\/tracking\/v1\/.*\/optin-context.*/gm,r=>{try{let o=r[1]?.body;if(!o)return;let n=JSON.parse(o),i=document.querySelector("#recart-popup-root")?.shadowRoot?.querySelector("[data-testid]")?.getAttribute("data-testid")?.replace("popup-overlay-","").replace("popup-minimized-","");n?.optinToolId&&(this.optinToolId=n.optinToolId),i&&i!==this.optinToolId&&(this.optinToolId=i),n?.optinToolId&&(this.optinToolId=n.optinToolId,this.handleEvent(n.optinToolId,y.PWO_IMPR)),n?.email&&this.optinToolId&&(K(n.email),this.handleEvent(this.optinToolId,y.PWO_EMAIL_LEAD,n.phoneNumber,n.email)),n?.phoneNumber&&this.optinToolId&&(fe(n.phoneNumber),this.handleEvent(this.optinToolId,y.PWO_SMS_LEAD,n.phoneNumber,n.email))}catch(o){a.error(T(`[${this.applicationName}] ${It.getPlatformName()} could not process impressions event. ${o?.message}`))}},!1),this.hasSetupCompletedSuccessfully=!0}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized()||!window?._recart?.showOptinTool)throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${It.getPlatformName()} was not initialized.`);delete this.observedEvents[e],window._recart.showOptinTool(e)}static getInstance(){return new It}};var kt=class{constructor(){this.appLogAppenders={}}static booleanToEmoji(e){return e?"\u2705":"\u274C"}static formatDiagnosticStatus({state:e,message:r}){return`${e!==void 0?`${kt.booleanToEmoji(e)} - `:""}${r}`}static formatDiagnosticGroup({title:e,lines:r}){return`${e}:
${r.map(o=>kt.formatDiagnosticStatus(o)).join(`
`)}`}static async formatAppLogAppender(e){return e.getLogData().then(r=>r.map(o=>kt.formatDiagnosticGroup(o)).join(`
`))}static isDiagnosticLoggingEnabledForApp(e){return be(window.location.search)?.bcaiDiag?.includes(e)}setAppLogAppender(e,r){this.appLogAppenders[r]=e}getAppLogAppender(e){return this.appLogAppenders[e]}async logDiagnostics(e,r){try{if(!kt.isDiagnosticLoggingEnabledForApp(r))return;let o=this.appLogAppenders[r];globalThis?.console?.log(`[${r} Diagnostics]
${e?`${e}
`:""}${o?await kt.formatAppLogAppender(o):""}`)}catch(o){a.error(o)}}};var Ot=class{static get diagnostics(){return this.diagnosticsInstance||(this.diagnosticsInstance=new kt),this.diagnosticsInstance}static getAppLogAppender(e){return Ot.diagnostics.getAppLogAppender(e)}static setAppLogAppender(e,r){Ot.diagnostics.setAppLogAppender(e,r)}static logDiagnostics(e,r){Ot.diagnostics.logDiagnostics(e,r)}};var Gt=class{constructor(e){this.name=e}set(e,r){X(this.name,e,r)}get(){return vt(this.name)}reset(){X(this.name,"",-1)}};var Js=class{constructor(){this.SEPARATOR="|";this.overlayHistoryCookie=new Gt(Iu)}get(){let e=this.overlayHistoryCookie.get();return e?e.split(this.SEPARATOR):[]}push(e){let r=this.get();r.push(e),this.overlayHistoryCookie.set(r.join(this.SEPARATOR),30)}count(e){return this.get().filter(r=>r===e).length}totalCount(){return this.get().length}},lr=class{constructor(){this.overlayClosedCookieDuration=30;this.openedOverlayEventData=[];this.history=new Js}static overlayWasClosed(){return!!lr.overlayClosedCookie.get()}static piiWasSubmitted(){return!!lr.piiSubmittedCookie.get()}static setPIISubmitCookie(){lr.piiSubmittedCookie.set("true",1051200)}closeOverlay(){this.openOverlayTriggerType=void 0}setOverlayClosedCookie(){this.isOverlayOpenedByATC()||lr.overlayClosedCookie.set("true",this.overlayClosedCookieDuration)}closeOverlayAndSetCookie(){this.closeOverlay(),this.setOverlayClosedCookie()}isOverlayOpen(){return!!this.openOverlayTriggerType}piiWasSubmitted(){return lr.piiWasSubmitted()}submitPII(){lr.setPIISubmitCookie()}setOverlayClosedDuration(e=30){this.overlayClosedCookieDuration=e}totalOverlaysOpenedCount(){return this.history.totalCount()}overlayOpenedEvent(e){e&&this.openedOverlayEventData.push(e)}handleOpenAttemptOutcome(e){let r=e?.resolved_form_id;if(r){if(!this.openedOverlayEventData.length){a.error(new Or(`[PWO] Impression failed to render for formId: ${r}`));return}if(this.openedOverlayEventData.every(n=>!n.rendered_form_id||`${n.rendered_form_id}`?.trim()==="")){he("[PWO] All rendered form Ids undefined. Could be justuno overlay.");return}if(this.openedOverlayEventData.find(n=>`${n.rendered_form_id}`===r))he("[PWO] Impression rendered successfully.");else{let n=this.openedOverlayEventData.map(i=>!i.rendered_form_id||`${i.rendered_form_id}`==""?"<missing_id>":i.rendered_form_id);a.error(new Or(`[PWO] Impression failed to render for formId: ${r} and external impression rendered form ids: ${n}`))}}}openAttemptEvent(e){this.openedOverlayEventData=[],_.setTimeout(()=>this.handleOpenAttemptOutcome(e),5e3)}openStandardOverlay(){this.openOverlayTriggerType="s",this.history.push("s")}standardOverlaysOpenedCount(){return this.history.count("s")}isOverlayOpenedByStandard(){return this.openOverlayTriggerType==="s"}openAtcOverlay(){this.openOverlayTriggerType="a",this.history.push("a")}atcOverlaysOpenedCount(){return this.history.count("a")}isOverlayOpenedByATC(){return this.openOverlayTriggerType==="a"}openExitOverlay(){this.openOverlayTriggerType="e",this.history.push("e")}exitOverlaysOpenedCount(){return this.history.count("e")}isOverlayOpenedByExitTrigger(){return this.openOverlayTriggerType==="e"}},gt=lr;gt.overlayClosedCookie=new Gt(Au),gt.piiSubmittedCookie=new Gt(ku);function cv(t){if(!t)return!1;let e=t.getBoundingClientRect(),r=getComputedStyle(t);return r.display!=="none"&&r.visibility!=="hidden"&&e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function uv(t){return[...document.querySelectorAll(t)].some(r=>cv(r))}function Kf(t=[]){return t.some(uv)}var Ct=class{constructor(e){this.overlayLimitTracker=e}static alreadyExcludedByChannel(){return!!Ct.pwoExcludedByChannelNameCookie.get()}static shouldBeExcludedByChannel(){let e=at.safeFromConfigJSON();return!!(e&&e.hasExcludedUrlParams())}static doExcludeByChannel(){Ct.pwoExcludedByChannelNameCookie.set(!0,void 0)}static meetsExitOverlayConditions(){let e=gt.piiWasSubmitted(),r=Ct.isExcludedByChannel();return!(e||r)}static isEligibleForATCTrigger(e,r){return e.overlay_eligible?!r.channel_excluded&&!r.identified&&!r.pii_submitted:!1}static isExcludedByChannel(){return this.alreadyExcludedByChannel()?!0:this.shouldBeExcludedByChannel()?(this.doExcludeByChannel(),!0):!1}static isOverlayClearedToDisplay(){let e=at.safeFromConfigJSON();return!Kf(e?.blockOverlayOnCssSelectors)}isEligibleForExitOverlay(){return Ct.meetsExitOverlayConditions()&&this.overlayLimitTracker.canOpenExitOverlay()&&Ct.isOverlayClearedToDisplay()}shouldTriggerATCOverlay(e,r){return Ct.isEligibleForATCTrigger(e,r)&&this.overlayLimitTracker.canOpenAtcOverlay()&&Ct.isOverlayClearedToDisplay()}isEligibleForStandardOverlay(e){return e.isUserIdentified().then(o=>!o&&this.overlayLimitTracker.canOpenStandardOverlay()&&Ct.isOverlayClearedToDisplay())}},Wr=Ct;Wr.pwoExcludedByChannelNameCookie=new Gt(Ou);var bi=class{constructor(e){this.maxTotalOverlays=1/0;this.maxStandardOverlays=1;this.maxATCOverlays=1;this.maxExitOverlays=1;this.interactionTracker=e}setMaxTotalOverlays(e=1/0){this.maxTotalOverlays=e}totalOverlayLimitReached(){return this.interactionTracker.totalOverlaysOpenedCount()>=this.maxTotalOverlays}standardOverlayLimitReached(){return this.interactionTracker.standardOverlaysOpenedCount()>=this.maxStandardOverlays}canOpenStandardOverlay(){return!this.interactionTracker.isOverlayOpen()&&!this.interactionTracker.piiWasSubmitted()&&!this.standardOverlayLimitReached()&&!this.totalOverlayLimitReached()}atcOverlayLimitReached(){return this.interactionTracker.atcOverlaysOpenedCount()>=this.maxATCOverlays}canOpenAtcOverlay(){return!this.interactionTracker.isOverlayOpen()&&!this.atcOverlayLimitReached()&&!this.totalOverlayLimitReached()}exitOverlayLimitReached(){return this.interactionTracker.exitOverlaysOpenedCount()>=this.maxExitOverlays}canOpenExitOverlay(){return!this.interactionTracker.isOverlayOpen()&&!this.exitOverlayLimitReached()&&!this.totalOverlayLimitReached()}};var dv={["s"]:"openStandardOverlay",["a"]:"openAtcOverlay",["e"]:"openExitOverlay"},fv={["s"]:"isOverlayOpenedByStandard",["a"]:"isOverlayOpenedByATC",["e"]:"isOverlayOpenedByExitTrigger"},ke=class{constructor(){this._overlayTracker=new gt,this._overlayLimitTracker=new bi(this._overlayTracker),this._overlayEligibility=new Wr(this._overlayLimitTracker)}static overlayWasClosed(){return gt.overlayWasClosed()}static piiWasSubmitted(){return gt.piiWasSubmitted()}static setPIISubmitCookie(){gt.setPIISubmitCookie()}setOverlayOpen(e){this._overlayTracker[dv[e]]()}isOverlayOpen(){return this._overlayTracker.isOverlayOpen()}closeOverlay(e=!1){e&&this._overlayTracker.setOverlayClosedCookie(),this._overlayTracker.closeOverlay()}wasOverlayOpenedBy(e){return this._overlayTracker[fv[e]]()}submitPII(){this._overlayTracker.submitPII()}overlayOpenedEvent(e){this._overlayTracker.overlayOpenedEvent(e)}openAttemptEvent(e){this._overlayTracker.openAttemptEvent(e)}setOverlayClosedDuration(e){this._overlayTracker.setOverlayClosedDuration(e)}setMaxTotalOverlays(e){this._overlayLimitTracker.setMaxTotalOverlays(e)}static isExcludedByChannel(){return Wr.isExcludedByChannel()}static isOverlayClearedToDisplay(){return Wr.isOverlayClearedToDisplay()}isEligibleForATCOverlay(e,r){return this._overlayEligibility.shouldTriggerATCOverlay(e,r)}isEligibleForExitOverlay(){return this._overlayEligibility.isEligibleForExitOverlay()}isEligibleForStandardOverlay(e){return this._overlayEligibility.isEligibleForStandardOverlay(e)}};function Le(){return be(window.location.search)?.pwoOverride==="true"}var Pi=class{constructor(){this.failureReasons=[];this.activeTriggers=[]}setAppState(e){this.appState=e}setPwoResponse(e){this.pwoResponse=e}setPwoSettings(e){this.pwoSettings=e}setIdentified(e){this.identified=e}addFailureReason(e){this.failureReasons.push(e)}setTriggers(e){this.activeTriggers=e}get ignoredText(){return Le()?" (overridden)":""}async getLogData(){try{this.sessionPageViews=await Ze();let e=[],r=this.getFailureReasons();return r&&e.push(r),e.push(this.getEnvironmentStatus()),e.push(this.getPOSettings()),e.push(this.getResponseStatus()),e.push(this.getUIEligibilityState()),e.push(this.getActiveTriggersStatus()),e}catch(e){return a.error(e),[{title:"Error",lines:[{state:!1,message:"Error geting PO diagnostics"}]}]}}getFailureReasons(){if(this.failureReasons.length!==0)return{title:"Failures",lines:this.failureReasons.map(e=>({state:!1,message:e}))}}getResponseStatus(){return{title:"PWO Decision Response",lines:this.pwoResponse?[{state:this.pwoResponse.overlay_eligible,message:this.pwoResponse.overlay_eligible?"User eligible for overlay.":`User not eligible for overlay.${this.ignoredText}`},{state:!!this.pwoResponse.form_id,message:`FormId is present: ${this.pwoResponse.form_id}`},{state:!!this.pwoResponse.trigger_type,message:`ML Trigger is present: ${this.pwoResponse.trigger_type}`},{state:this.pwoResponse.minimum_page_views<=(this.sessionPageViews??0),message:`Session passed minimum amount of page views of ${this.pwoResponse.minimum_page_views}${this.ignoredText}`}]:[{state:!1,message:"PWO Decision response not received yet."}]}}getUIEligibilityState(){let e=this.appState?[{state:!this.appState.isOverlayOpen(),message:`Overlay not already open.${this.ignoredText}`},{state:!ke.overlayWasClosed(),message:`Overlay not previously presented and dismissed.${this.ignoredText}`},{state:!ke.piiWasSubmitted(),message:`PII not submitted.${this.ignoredText}`},{state:!ke.isExcludedByChannel(),message:`Channel not excluded.${this.ignoredText}`},{state:ke.isOverlayClearedToDisplay(),message:`Overlay not blocked (blockOverlayOnCssSelectors).${this.ignoredText}`}]:[{state:!1,message:"PO Not initialized."}];return e.push({state:this.identified===!1,message:this.identified===void 0?"User identification unknown":`User not identified.${this.ignoredText}`}),{title:"UI Eligibility Status",lines:e}}getPOSettings(){return{title:"PO Config Settings",lines:[{state:!!this.pwoSettings,message:"PO Config present."},{state:!at.isDisabled(),message:"PO config is active"},{state:!!this.pwoSettings?.rendererName,message:`Renderer name is set: ${this.pwoSettings?.rendererName}`},{state:!!this.pwoSettings?.identifierNames,message:"IdentifierPlatforms are set"}]}}getEnvironmentStatus(){return{title:"Environment",lines:[{state:!v(),message:"Bundle not loaded by webpixel."},{state:Le(),message:"PWO Override enabled (when enabled, will override/bypass checks)"}]}}getActiveTriggersStatus(){let e=this.activeTriggers.map(r=>({state:!0,message:`${r.triggerName}`}));return this.activeTriggers.length===0&&e.push({state:!1,message:"No active triggers"}),{title:"Active Triggers",lines:e}}};function qr(){let t=Ot.getAppLogAppender("PO");return t||(t=new Pi,Ot.setAppLogAppender(t,"PO")),t}function me(t){Ot.logDiagnostics(t,"PO")}function re(t){qr().addFailureReason(t),me("New failure detected")}var Ke=class{constructor(){this.applicationName=V?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return xf}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),le(r,_e({rendered_form_id:e},o,n)))}static async loadSendlane(){return window._Sendlane?Promise.resolve():(window._Sendlane=window._Sendlane||[],new Promise((e,r)=>{try{let o=document.createElement("script");o.src="https://sendlane.com/scripts/pusher.js",o.async=!0,o.onload=()=>{e()},document.getElementsByTagName("head")[0]?.appendChild(o)}catch(o){r(o)}}))}static isSendlaneLoaded(){return typeof window._Sendlane?.push=="function"&&window._Sendlane?.baseUrl}async setup(){try{_.addListener(window,"sendlaneForms",r=>{try{if(!(r instanceof CustomEvent))throw new Error("Invalid Sendlane event");switch(r.detail.type){case"open":this.handleEvent(r.detail.form_key,y.PWO_IMPR);break;case"close":this.handleEvent(r.detail.form_key,y.PWO_CLOSE);break;case"submit":{let{email:o,phone:n,isSubmitSuccess:i}=r.detail.metaData;i&&o&&qo(o)&&(K(o),this.handleEvent(r.detail.form_key,y.PWO_EMAIL_LEAD,void 0,o)),i&&n&&this.handleEvent(r.detail.form_key,y.PWO_SMS_LEAD,n);break}default:break}}catch(o){a.error(o)}}),this.observedEvents={};let e=T(`[${this.applicationName}] ${Ke.getPlatformName()} globals not found.`);if(window._Sendlane||await oo(Ke.loadSendlane(),5e3,e),Ke.isSendlaneLoaded())this.hasSetupCompletedSuccessfully=!0;else throw e}catch(e){throw a.error(e),e}}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${Ke.getPlatformName()} was not initialized.`);return delete this.observedEvents[e],window._Sendlane?.push({form_key:e}),Re(()=>window._Sendlane?.openForm).then(()=>{if(window._Sendlane?.openForm)me(`${Ke.getPlatformName()} triggerring after polling for openForm.`),window._Sendlane.openForm(e);else throw new Error(`${Ke.getPlatformName()} failed to trigger since openForm was not found.`)})}static getInstance(){return new Ke}};var pv=new Map([["before-popup-display",y.PWO_IMPR],["before-form-submit",y.PWO_EMAIL_LEAD],["after-popup-close",y.PWO_CLOSE]]),jt=class{constructor(){this.applicationName=V?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return Tf}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),le(r,_e({rendered_form_id:e},o,n)))}addWisepopsEventListeners(){pv.forEach((e,r)=>{window?.wisepops&&(e===y.PWO_EMAIL_LEAD?window.wisepops("listen",r,o=>{let n=o?.target?.elements.email?.value;n&&K(n),this.handleEvent(o?.detail?.popup?.id?.toString(),e,void 0,n)}):window.wisepops("listen",r,o=>{this.handleEvent(o?.detail?.popup?.id?.toString(),e)}))})}async setup(){if(this.observedEvents={},!await Re(()=>{if(typeof window?.wisepops=="function")return window?.wisepops},5e3)){let r=T(`[${this.applicationName}] ${jt.getPlatformName()} globals not found.`);throw a.error(r),r}this.addWisepopsEventListeners(),this.hasSetupCompletedSuccessfully=!0}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized()||!window?.wisepops)throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${jt.getPlatformName()} was not initialized.`);delete this.observedEvents[e],window.wisepops("event",`trigger-${e}`)}static getInstance(){return new jt}};var Ye=class{constructor(){this.applicationName=V.toUpperCase();this.hasSetupCompletedSuccessfully=!1;this.observedEvents={}}static getPlatformName(){return Af}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),le(r,_e({rendered_form_id:e},o,n)))}setup(){return pr(/.*\/forms-impressions.*/gm,e=>{try{let r=e[1]?.body;if(!r)return;let{tool_id:o}=JSON.parse(r);o&&this.handleEvent(o,y.PWO_IMPR)}catch(r){a.error(T(`[${this.applicationName}] ${Ye.getPlatformName()} could not process impressions event. ${r?.message}`))}},!1),new Promise(e=>(te(()=>{_.addListener(document,"smsbump-custom-form-event",r=>{let{form_id:o,format_phone:n,phone:i,email:c,event:s}=r?.detail;s==="form_submit"&&(c&&(K(c),this.handleEvent(o,y.PWO_EMAIL_LEAD,n||i,c)),(n||i)&&(fe(n||i),this.handleEvent(o,y.PWO_SMS_LEAD,n||i,c)))})}),this.hasSetupCompletedSuccessfully=!0,e()))}createTriggeringElement(){this.blackCrowFormTriggeringElement=document.createElement("div"),this.blackCrowFormTriggeringElement.style.width="0",this.blackCrowFormTriggeringElement.style.height="0",this.blackCrowFormTriggeringElement.style.opacity="0",this.blackCrowFormTriggeringElement.style.pointerEvents="none",document.body.appendChild(this.blackCrowFormTriggeringElement)}static isFormIdVisible(e){return Ye.isFormIdPresent(e)&&document?.getElementById(`smsbump-form-${e}`)?.firstElementChild?.getAttribute("aria-hidden")!=="true"}static isFormIdPresent(e){return!!document?.getElementById(`smsbump-form-${e}`)?.firstElementChild}clickTriggerElement(){this.blackCrowFormTriggeringElement&&this.blackCrowFormTriggeringElement.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0}))}triggerOverlay(e){if(this.blackCrowFormTriggeringElement||this.createTriggeringElement(),!this.blackCrowFormTriggeringElement||!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${Ye.getPlatformName()} was not initialized.`);this.blackCrowFormTriggeringElement.id=`bcai_${e}`,this.blackCrowFormTriggeringElement.className=`bcai_${e}`,delete this.observedEvents[e];let r=1;return Re(()=>Ye.isFormIdVisible(e)?!0:(me(`Yotpo triggering overlay ${e} attempt# ${r}`),r+=1,this.clickTriggerElement(),Ye.isFormIdVisible(e)),15e3,1e3).then(o=>{if(o)me(`Yotpo overlay ${e} triggered successfully after ${r} attempts.`);else throw T(`[${this.applicationName}] ${Ye.getPlatformName()} could not trigger overlay for form id: ${e}.`)})}getTriggerElement(){if(!(!this.blackCrowFormTriggeringElement||!this.isInitialized()))return this.blackCrowFormTriggeringElement}isInitialized(){return this.hasSetupCompletedSuccessfully}static getInstance(){return new Ye}};var ht=class{constructor(){this.applicationName=V?.toUpperCase();this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return fi}static isPostscriptLoaded(){return typeof window?.postscript?.getSubscriberId=="function"}setup(){return new Promise((e,r)=>D(()=>{if(!ht.isPostscriptLoaded())throw new Error(`${ht.getPlatformName()} globals not found`);this.hasSetupCompletedSuccessfully=!0,e()},()=>{let o=T(`[${this.applicationName}] ${ht.getPlatformName()} globals not found.`);a.error(o),r(o)},100))}isInitialized(){return this.hasSetupCompletedSuccessfully}isIdentified(){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call isIdentified as ${ht.getPlatformName()} was not initialized.`);return!!window?.postscript?.getSubscriberId?.()}static getInstance(){return new ht}};var mr=class{constructor(){this.applicationName=V?.toUpperCase()}static getPlatformName(){return If}async isIdentified(){try{let e=await z(Yr);return!!(e?.email_collected||e?.sms_collected)}catch(e){return a.error(new Error(`[${this.applicationName}] Error checking if user is identified by ${mr.getPlatformName()}: ${e}`)),!1}}setup(){}isInitialized(){return!0}static getInstance(){return new mr}};var yo=class{static getOverlayPlatformClassByName(e){return new Map([[no.getPlatformName(),no],[ar.getPlatformName(),ar],[un.getPlatformName(),un],[mt.getPlatformName(),mt],[At.getPlatformName(),At],[It.getPlatformName(),It],[Ke.getPlatformName(),Ke],[jt.getPlatformName(),jt],[Ye.getPlatformName(),Ye]]).get(e.toLowerCase())?.getInstance()}constructor(e){if(!e)throw new Error("[PWO] No configured overlay renderer");let r=yo.getOverlayPlatformClassByName(e);if(!r)throw new Error(`[PWO] Unrecognized overlay renderer: ${e}`);this.overlayPlatform=r,this.platformName=e}setup(){return this.overlayPlatform.isInitialized()?Promise.resolve():this.overlayPlatform.setup()}triggerOverlay(e){return this.overlayPlatform.triggerOverlay(e)}getOverlayNode(e){if(typeof this.overlayPlatform.getOverlayNode=="function")return this.overlayPlatform.getOverlayNode(e)}get name(){return this.platformName}},vo=class{static getOverlayPlatformClassByName(e){return new Map([[nr,Ce],[kr.getPlatformName(),kr],[Ce.getPlatformName(),Ce],[ht.getPlatformName(),ht],[mr.getPlatformName(),mr]]).get(e.toLowerCase())}constructor(e){if(!Array.isArray(e)||!e.length)throw new Error("[PWO] No configured identity platforms");if(this.identifierPlatforms=e.map(r=>{let o=vo.getOverlayPlatformClassByName(r?.toLowerCase());return o||a.error(new Error(`[PWO] Unrecognized identity platform: ${r}`)),o}).filter((r,o,n)=>!!r&&o===n.indexOf(r)).map(r=>r.getInstance()),!this.identifierPlatforms.length)throw re("No configured valid platforms"),new Error("[PWO] No configured identity platforms")}setup(){return Promise.all(this.identifierPlatforms.map(e=>e.isInitialized()?Promise.resolve():e.setup()))}isUserIdentified(){let e=this.identifierPlatforms.map(async r=>{try{return await r.isIdentified()}catch(o){return re(`Error checking if user is identified: ${o?.message}`),!0}});return Promise.all(e).then(r=>r.some(o=>o===!0),r=>(re(`Error checking if user is identified: ${r?.message??r}`),!0)).then(r=>(qr().setIdentified(r),r))}addAttributesToUserProfile(e){this.identifierPlatforms.forEach(r=>{typeof r.addAttributesToUserProfile=="function"&&r.addAttributesToUserProfile(e)})}};var lv={subtree:!0,childList:!0};function Yf(t,e){t.style.setProperty("z-index",e,"important")}function Xf(t,e="relative"){t.style.setProperty("position",e)}async function Qf(t,e,r){try{if(!t||!e||!r)return;let o=r.getOverlayNode(e);if(o){let n=window.getComputedStyle(o).position;(!n||n==="static")&&Xf(o),Yf(o,t);return}await new Promise((n,i)=>{let c=new MutationObserver(()=>{try{let s=r.getOverlayNode(e);if(s){let u=window.getComputedStyle(s).position;(!u||u==="static")&&Xf(s),Yf(s,t),c.disconnect(),n()}}catch(s){c.disconnect(),i(s)}});c.observe(document.body,lv)})}catch(o){a.error(o)}}function ep(t,e,r){if(e&&r){let o=t?.filter(({zIndex:i})=>i).map(i=>i.zIndex).sort((i,c)=>parseInt(c,10)-parseInt(i,10))[0];return o&&Number.isNaN(parseInt(o,10))?Promise.resolve():Qf(o||"2147483647",e,r)}return Promise.resolve()}var Gr=class{constructor(e,r,o){this.isIdentified=e,this._eventData=r,this.pwoSettings=o}static async createPWOEventData(e,r){let o=b({},{session_page_views:await Ze()});return new Gr(e,o,r)}buildOverlayBucketParams(){let e=this.pwoSettings?.overlayBuckets,r=this.pwoSettings?.extractRelevantFormConfig(),o=ho(this.pwoSettings?.scoreName);return e===void 0?void 0:{resolved_trigger_config:{...e},resolved_form_id:r?.formId,resolved_form_profile:r?.profile,resolved_score:o,version:this.pwoSettings?.version}}buildEligibilityParams(){return{closed_overlay:!!ke.overlayWasClosed(),identified:this.isIdentified,pii_submitted:!!ke.piiWasSubmitted(),channel_excluded:ke.isExcludedByChannel()}}get eventData(){return b({},this.buildOverlayBucketParams(),this.buildEligibilityParams(),this._eventData)}extendEventData(e){b(this._eventData,e)}get bucketName(){return this.buildOverlayBucketParams()?.resolved_trigger_config?.name}get showOverlayOnATC(){return this.buildOverlayBucketParams()?.resolved_trigger_config?.triggerBuckets?.showOverlayOnATC}};var yt=class{constructor(e){this.response=e}get delay(){return this.trigger_type!==ir.SESSION_VIEW_COUNT?this.response.trigger_count:0}get minimum_page_views(){return this.trigger_type===ir.SESSION_VIEW_COUNT?this.response.trigger_count:0}get form_id(){return this.response.form_id}get form_profile(){return this.response.form_profile}get overlay_eligible(){return this.response.overlay_eligible}get trigger_type(){return this.response.trigger_type}get trigger_count(){return this.response.trigger_count}_equals(e){return this.form_id===e.form_id&&this.form_profile===e.form_profile&&this.overlay_eligible===e.overlay_eligible&&this.trigger_type===e.trigger_type&&this.trigger_count===e.trigger_count}};var xi="Add to Cart",_o=class{constructor(e=0,r=0,o){this.delay=e,this.minimumPageViews=r,this.triggerFn=o,q("platform",y.ADD_TO_CART,()=>{this.triggerOverlay()})}get triggerName(){return xi}get minimumPageViewsRequired(){return this.minimumPageViews}async triggerOverlay(){try{if(!Le()){let e=await Ze();if(this.minimumPageViews&&this.minimumPageViews>e){me(`${this.triggerName} overlay not triggering, not enough page views.`);return}this.delay>0&&await ue(this.delay*1e3)}await this.triggerFn()}catch(e){a.error(new Error(`[PWO] Error delaying overlay: ${e}`)),re(`Error delaying ${this.triggerName} overlay: ${e?.message}`)}}static buildTrigger(e,r,o,n,i){if(!e.showOverlayOnATC)return;let c=new yt(r),s=async()=>{try{if(!Le()&&!o.isEligibleForATCOverlay(c,n.eventData)){me(`Not eligible for ${xi} Overlay.`);return}me(`Triggering ${xi} overlay.`),o.setOverlayOpen("a"),await i(c)}catch(u){a.error(new Error("[PWO] Error triggering overlay"),u),re(`Error triggering ${xi} overlay: ${u?.message}`)}};return new _o(c.delay,1,s)}};var dn="Exit Intent",wo=class{constructor(e=0,r=0,o){this.delay=e,this.minimumPageViews=r,this.triggerFn=o,Zf(()=>this.triggerOverlay())}get triggerName(){return dn}get minimumPageViewsRequired(){return this.minimumPageViews}async triggerOverlay(){try{if(!Le()){let e=await Ze();if(this.minimumPageViews&&this.minimumPageViews>e){me(`${this.triggerName} overlay not triggering, not enough page views.`);return}this.delay>0&&await ue(this.delay*1e3)}await this.triggerFn()}catch(e){a.error(new Error(`[PWO] Error delaying overlay: ${e}`)),re(`Error delaying ${this.triggerName} overlay: ${e?.message}`)}}static buildTrigger(e,r,o,n,i){if(!e.showSecondOverlayOnExitIntent&&r?.trigger_type!==ir.EXIT_INTENT)return;let c=new yt(r),s=new yt(b({},r,{trigger_type:ir.EXIT_INTENT})),u=async()=>{try{if(!Le()){if(!o.isEligibleForExitOverlay()){me(`Not eligible for ${dn} overlay.`);return}if(n.eventData.identified){me(`Not eligible for ${dn} overlay, identified user.`);return}}me(`Triggering ${dn} overlay.`),o.setOverlayOpen("e"),await i(s)}catch(g){a.error(new Error("[PWO] Error triggering overlay"),g),re(`Error triggering ${dn} overlay: ${g?.message}`)}};return new wo(c.delay,1,u)}};var fn="Page View/ML",Eo=class{constructor(e=0,r=0,o){this.delay=e,this.minimumPageViews=r,this.triggerFn=o,this.triggerOverlay()}get triggerName(){return fn}get minimumPageViewsRequired(){return this.minimumPageViews}async triggerOverlay(){try{if(!Le()){let e=await Ze();if(this.minimumPageViews&&this.minimumPageViews>e){me(`${this.triggerName} overlay not triggering, not enough page views.`);return}this.delay>0&&await ue(this.delay*1e3)}await this.triggerFn()}catch(e){a.error(new Error(`[PWO] Error delaying overlay: ${e}`)),re(`Error delaying ${fn} overlay.: ${e?.message}`)}}static buildTrigger(e,r,o,n){let i=new yt(e);if(i.trigger_type===ir.EXIT_INTENT||!i.trigger_type)return;let c=async()=>{try{if(!Le()&&!await r.isEligibleForStandardOverlay(o)){me(`Not eligible for ${fn} overlay.`);return}me(`Triggering ${fn} overlay.`),r.setOverlayOpen("s"),await n(i)}catch(s){a.error(new Error("[PWO] Error triggering overlay"),s),re(`Error triggering ${fn} overlay.: ${s?.message}`)}};return new Eo(i.delay,i.minimum_page_views,c)}};var jr=class{constructor(e){this.triggers=[];this.triggers=e}get triggerList(){return this.triggers}static buildTriggerManager(e,r,o,n,i,c){if(!r.overlay_eligible&&!Le())return re("Triggers disabled as overlay not eligible."),new jr([]);let s=[Eo.buildTrigger(r,o,n,c),_o.buildTrigger(e,r,o,i,c),wo.buildTrigger(e,r,o,i,c)].filter(u=>u!==void 0);return qr().setTriggers(s),new jr(s)}};function tp(){let t=Ru()?.filter(o=>o?.name==="request: view")||[];if(t.length===0)return{};let e=t[t.length-1],r=JSON.parse(e?.data?.body||"{}");return b({},{page_id:r?.page_id})}var mv={subtree:!0,childList:!0,attributes:!0};function Zs(t){let e=t.getAttribute("tabindex");return t.removeAttribute("tabindex"),()=>{t.setAttribute("tabindex",e||"0")}}function gv(t){if(!(!t||window.themeCore===void 0))return ue(1e3).then(()=>{window.themeCore?.utils?.removeTrapFocus()}),()=>{window.themeCore?.EventBus?.emit("cart:drawer:open")}}var Ks=class{constructor(e){this.isRunning=!0;this.focusTrap=e;let r=this.getActiveElement();if(r){this.handleActiveElement(r);return}this._promise=new Promise((o,n)=>{this.resolve=o,this.observer=new MutationObserver(()=>{try{r=this.getActiveElement(),r&&(this.handleActiveElement(r),o())}catch(i){this.observer?.disconnect(),this.isRunning=!1,n(i)}}),this.observer.observe(document.querySelector(e.baseElement),mv)})}getActiveElement(){return this.focusTrap.activeElements.reduce((e,r)=>{if(e)return e;let o=document.querySelector(r.selector);return o?{element:o,callback:r.callback}:void 0},void 0)}handleActiveElement(e){this.cleanup=e.callback(e.element),this.observer?.disconnect(),this.isRunning=!1}get isActive(){return this.isRunning}get promise(){return this._promise}cancel(){if(!this.isRunning){this.cleanup?.();return}this.isRunning=!1,this.observer?.disconnect(),this.resolve?.()}};function rp(t=[{baseElement:"[id=sidebar-cart]",activeElements:[{selector:"[id=sidebar-cart][aria-hidden=false]",callback:Zs}]},{baseElement:"#CartDrawer",activeElements:[{selector:"#CartDrawer.drawer--is-open",callback:Zs},{selector:"#CartDrawer.is-transitioning[tabIndex]",callback:Zs},{selector:"#CartDrawer.is-active",callback:gv}]}]){try{if(t.length===0)return;let e=t.find(({baseElement:r})=>document.querySelectorAll(r).length>0);return e?new Ks(e):void 0}catch(e){a.error(e)}}function Ht(t){let e=new Error(t);return e.name="InvalidResponseBodyError",e.status="warn",e.stack=ie(e.stack,1),e}var st,pn,zt,Nt,hv,op,Ai=qr(),De=new ke;async function yv(){st=await Gr.createPWOEventData(!1,Nt)}async function vv(){try{De.closeOverlay(),await yv()}catch(t){a.error(t)}}function _v(t){a.push({trigger:y.PWO_OPEN_ATTEMPT}),pn.triggerOverlay(t.form_id),zt.addAttributesToUserProfile({blackcrow_exposed_population_bucket:st?.bucketName,bcai_trigger:t.trigger_type,profile:t.form_profile})}function wv(t){let e=t?.apps?.pwo;if(e){Ai.setPwoResponse(new yt(e)),st?.extendEventData({resolved_form_id:e.form_id,resolved_form_profile:e.form_profile,trigger_type:e.trigger_type,trigger_count:e.trigger_count,pwo_response_overlay_eligible:e.overlay_eligible});let r=st?.bucketName;zt.addAttributesToUserProfile(b({},{blackcrow_all_population_bucket:r,blackcrow_eligible_population_bucket:e?.overlay_eligible?r:void 0})),hv=jr.buildTriggerManager(Nt,e,De,zt,st,_v)}else a.error(Ht(`[${V.toUpperCase()}] missing "pwo" in response: ${JSON.stringify(t)} - PWO may be disabled for current URL pattern.`)),re('PWO Decision response missing "pwo" node.')}function Ev(t,e){return ne(t,b({},e,tp()),r=>{wv(r)})}async function bv(t){try{if(t.renderer&&t.isIdentified&&Oa()){await t.renderer;let e=await t.isIdentified;Ai.setIdentified(e),st=await Gr.createPWOEventData(e,Nt);let r=st.eventData;await Ev(j.PWO_DECISION,r)}else re("PWO Decision request skipped, invalid view response or setup incomplete")}catch(e){a.error(e),re(`Error in renderer, identifier or PWO Decision Request: ${e?.message}`)}}function Ti(t,e=!1){let r=De.isOverlayOpen(),o=typeof t?.rendered_form_id=="number"?`${t?.rendered_form_id}`:t?.rendered_form_id?.trim(),n=r&&(o===t.resolved_form_id||e&&!o);return b(t,{bcai_triggered:n,overlay_triggered_by_atc:n&&De.wasOverlayOpenedBy("a"),overlay_triggered_by_seu:n&&De.wasOverlayOpenedBy("e")})}function Sv(){q("platform",y.VIEW_RESPONSE,()=>{Oa()&&(q("platform",y.PWO_CLOSE,t=>{let e=Ti(b({},t,st?.eventData));ne(j.PWO_CLOSE,e),e.bcai_triggered&&(De.closeOverlay(!0),op?.cancel())}),q("platform",y.PWO_EMAIL_LEAD,t=>{De.submitPII();let e=Ti(b({},t,st?.eventData));ne(j.PWO_EMAIL_LEAD,e),e.bcai_triggered&&zt.addAttributesToUserProfile({blackcrow_identified:!0})}),q("platform",y.PWO_SMS_LEAD,t=>{De.submitPII();let e=Ti(b({},t,st?.eventData));ne(j.PWO_SMS_LEAD,e),e.bcai_triggered&&zt.addAttributesToUserProfile({blackcrow_identified:!0})}),q("platform",y.PWO_IMPR,t=>{let e=Ti(b({},t,st?.eventData),!0);De.overlayOpenedEvent(e),ne(j.PWO_IMPR,e),e.bcai_triggered&&(op=rp()),e.bcai_triggered&&e.overlay_triggered_by_atc&&ep(Nt.styleSettings,e?.rendered_form_id,pn)}),q("platform",y.PWO_OPEN_ATTEMPT,t=>{let e=b({},t,st?.eventData);De.openAttemptEvent(e),ne(j.PWO_OPEN_ATTEMPT,b(e,{bcai_triggered:!0,overlay_triggered_by_atc:De.wasOverlayOpenedBy("a"),overlay_triggered_by_seu:De.wasOverlayOpenedBy("e")}))}))})}function Pv(){let t={isIdentified:void 0,renderer:void 0};try{if(at.isDisabled()||v())return re("PO not initializing, disabled or in webpixel."),t;ke.isExcludedByChannel(),Nt=at.fromConfigJSON(),Ai.setPwoSettings(Nt),Ai.setAppState(De),pn||(pn=new yo(Nt.rendererName)),zt||(zt=new vo(Nt.identifierNames)),De.setOverlayClosedDuration(Nt.overlayClosedCookieDuration),De.setMaxTotalOverlays(Nt.maxTotalOverlays),t.isIdentified=zt.setup().then(()=>zt.isUserIdentified()).catch(()=>(re("Identifier failed to initialize, defaulting to identified."),!0)),t.renderer=pn.setup(),Sv()}catch(e){a.error(e),re("Error on initialization.")}return t}var np={appName:V,init:Pv,sendAppScores:bv,cleanup:vv};var Ys="cordial";function xv(t,e,r){let o=`${d}`,n=U([o,t.integration_product]),i=E(window,"crdl");if(typeof i=="function"){let c={app_name:e,integration_product:t.integration_product,conversion_product:t.conversion_product,conversion_type:t.conversion_type,comparison_population:t.comparison_population,comparison_group:t.comparison_group,comparison_type:t.comparison_type,threshold_setter:t.threshold_setter,threshold_group_count:t.threshold_group_count,score:H(t.score)};i("event",n,c),typeof r=="function"&&r(Ys,n)}else throw new Error(B)}var Xs={name:Ys,send:Q(Ys,xv)};var ln=window.GoogleAnalyticsObject||"ga";window[ln]=window[ln]||function(){(window[ln].q=window[ln].q||[]).push(arguments)};var q1=window[ln];window.dataLayer=window.dataLayer||[];function Tv(){return typeof window.gtag=="function"?window.gtag.toString()!=="function () { }":!1}var Rt=Tv()?window.gtag:function(){window.dataLayer.push(arguments)};function ip(t,e){let r=document.createElement("script");r.src=`https://www.googletagmanager.com/gtag/js?id=${t}`,r.async=!0,document.getElementsByTagName("head")[0].appendChild(r),Rt("js",new Date),Rt("config",t,e)}function ap(t,e,r=!1){Rt("event",t,{send_to:e,non_interaction:r})}async function mn(){try{return(await I("_ga"))?.split(".")?.slice(-2).join(".")}catch(t){a.error(t);return}}async function Qs(t,e){try{if(v()){let o=J(t,e).tracking_id,n=await mn();return o!=null&&o.startsWith("UA-")&&n!==void 0}if(Array.isArray(window.dataLayer)){let r=!1;return P(window.dataLayer,o=>{o[0]==="config"&&o[1]&&o[1].indexOf("UA-")===0&&(r=!0)}),r}return!1}catch(r){a.error(r);return}}async function ec(t,e){try{if(v()){let o=J(t,e).tracking_id,n=await mn();return o!=null&&o.startsWith("G-")&&n!==void 0}if(Array.isArray(window.dataLayer)){let r=!1;return P(window.dataLayer,o=>{o[0]==="config"&&o[1]&&o[1].indexOf("G-")===0&&(r=!0)}),r}return!1}catch(r){a.error(r);return}}function bo(t,e={}){!v()&&t&&ip(t,e)}async function Ii(t,e,r,o=!1){try{let n=await ee(r),i=Xo(t,e),c=n.length?n[0].value:void 0;i.forEach(s=>{let u=s.pixelId,g=s.loadPixel===!0;u&&c&&g&&(bo(u,{user_id:c,send_page_view:!1}),o&&ap("page_view_blackcrow",u))})}catch(n){a.error(n)}}var ki="event",Fe="google_analytics",Av="https://www.google-analytics.com/collect",Iv="https://www.google-analytics.com/g/collect";function sp(){return!!M("config.google_analytics.gtag_externally_configured")}function kv(){return!!M("config.google_analytics.gtm_format")}function Ov(t,e){let r=J(t,Fe);if(sp()){e();return}let o=r?.tracking_id;bo(o,{send_page_view:!1}),e()}async function Cv(t,e,r,o,n){try{let i=new URL(Av);i.search=Ie({v:1,t:ki,tid:t,cid:await mn(),ec:e,ea:r,el:o,ua:Ee(),dl:O(),dt:document.title,ni:1}),Z(i.toString(),{method:"GET",mode:"cors"},n)}catch(i){a.error(new Error(`${Fe} api call failed with ${i}`))}}async function Nv(t,{onSuccess:e,eventPrefix:r,integrationProduct:o,conversionProduct:n,conversionType:i,comparisonType:c,thresholdSetter:s,thresholdGroupCount:u,comparisonPopulation:g,score:h}){try{let S=new URL(Iv);S.search=Ie({v:2,tid:t,en:ki,cid:await mn(),dl:O(),dt:document.title,ep:{app_name:r,integration_product:o,conversion_product:n,comparison_population:g,comparison_type:c,conversion_type:i,threshold_setter:s,threshold_group_count:u,non_interaction:!0},epn:{score:h}}),Z(S.toString(),{method:"POST",mode:"cors"},e)}catch(S){a.error(new Error(`${Fe} api call failed with ${S}`))}}function cp(t,e,r,o,n,i,c,s,u){let g={};return g.category=U([t,e,r,o]),g.action=U([n,i,c,s]),g.label=u,g}async function Rv(t,{onSuccess:e,eventPrefix:r,integrationProduct:o,conversionProduct:n,conversionType:i,comparisonType:c,thresholdSetter:s,thresholdGroupCount:u,comparisonPopulation:g,score:h}){try{let Zr=function(){typeof e=="function"&&e(Fe,{eventCategory:Zt,eventAction:vr,eventLabel:Oo})};var S=Zr;let W=J(t,Fe);if(W.pageBlocked)return;let ge=window.GoogleAnalyticsObject?window[window.GoogleAnalyticsObject]:window.ga,Jt=cp(r,o,n,i,c,s,u,g,h),Zt=Jt.category,vr=Jt.action,Oo=Jt.label,ia=await Qs(t,Fe),Co=await ec(),No;if(sp()&&(No={send_to:W.tracking_id}),kv()){let Ro=U([r,o],"_");window.dataLayer.push({event:Ro,non_interaction:!0,app_name:r,integration_product:o,conversion_product:n,conversion_type:i,comparison_population:g,comparison_type:c,threshold_setter:s,threshold_group_count:u,score:h,...No}),Zr();return}if(Co||No){let Ro=U([r,o],"_");Rt("event",Ro,{non_interaction:!0,app_name:r,integration_product:o,conversion_product:n,conversion_type:i,comparison_population:g,comparison_type:c,threshold_setter:s,threshold_group_count:u,score:h,...No}),Zr()}else if(ia)Rt("event",vr,{event_category:Zt,event_label:Oo,non_interaction:!0}),Zr();else if(typeof ge=="function"){let Ro=_.setTimeout(()=>{a.error(new T(`${Fe} ready hook not fired`))},5e3);ge(wu=>{if(clearTimeout(Ro),!(wu&&wu.get("trackingId"))){let kn=W.tracking_id;kn||P(ge.getAll(),pm=>{let Eu=pm.get("trackingId");if(Eu)return kn=Eu,!1}),kn?ge("create",kn,"auto"):a.error(new Yo(`${Fe} tracking id not found`))}ge("send",{hitType:ki,eventCategory:Zt,eventAction:vr,eventLabel:Oo,nonInteraction:!0}),Zr()})}else throw new Error(B)}catch(W){a.error(W)}}async function Lv(t,{onSuccess:e,eventPrefix:r,integrationProduct:o,conversionProduct:n,conversionType:i,comparisonType:c,thresholdSetter:s,thresholdGroupCount:u,comparisonPopulation:g,score:h}){try{let vr=function(){typeof e=="function"&&e(Fe,{eventCategory:ge,eventAction:Jt,eventLabel:Zt})};var S=vr;let W=cp(r,o,n,i,c,s,u,g,h),ge=W.category,Jt=W.action,Zt=W.label,Oo=await Qs(t,Fe);if(await ec(t,Fe)){let Co=J(t,Fe).tracking_id;Nv(Co,{onSuccess:vr,eventPrefix:r,integrationProduct:o,conversionProduct:n,conversionType:i,comparisonType:c,thresholdSetter:s,thresholdGroupCount:u,comparisonPopulation:g,score:h})}else if(Oo){let Co=J(t,Fe).tracking_id;Cv(Co,ge,Jt,Zt,vr)}else throw new Error(B)}catch(W){a.error(W)}}function Dv(t,e,r){let o=`${d}_${e}`;function n(c){c.message===B?a.error(new T(`${Fe} globals not found`),{appName:e}):a.error(c)}if(!t)return;let i=v()?Lv:Rv;D(()=>i(e,{onSuccess:r,eventPrefix:o,integrationProduct:t.integration_product,conversionProduct:t.conversion_product,conversionType:t.conversion_type,comparisonType:t.comparison_type,thresholdSetter:t.threshold_setter,thresholdGroupCount:t.threshold_group_count,comparisonPopulation:t.comparison_population,score:H(t.score)}),n)}var tc={eventHitType:ki,name:Fe,setup:Ov,send:Dv};var So="google_ads",Fv="www.googleadservices.com",$v="_gcl_au";function Oi(t){return J(t,So)?.conversion_id}function up(t){return Oi(t)?.split("-").splice(-1).join()}async function Mv(){try{return(await I($v))?.split(".").splice(-2).join(".")}catch(t){a.error(t);return}}async function dp(t){try{let e=O(),r=Oe(),o=Xr(),n=Date.now(),i=await Mv(),c={data:`event=${t};non_interaction=true`,fst:n,random:n,auid:i,url:e,ref:r,tiba:o,hn:Fv,rfmt:3,fmt:4,async:1,cv:11,guid:"ON"};return Ie(c)}catch(e){return a.error(e),Ie({})}}var Bv="event",Uv="https://googleads.g.doubleclick.net/pagead/viewthroughconversion";function Vv(t,e){let r=Oi(t);bo(r),e()}function Wv(){if(Array.isArray(window.dataLayer)){let t=!1;return P(window.dataLayer,e=>{e[0]==="config"&&e[1]&&e[1].indexOf("AW-")===0&&(t=!0)}),t}return!1}async function qv(t,e,r){try{let o=up(e),n=await dp(t);Kr(`${Uv}/${o}/?${n}`),r()}catch(o){a.error(new Error(`${So} api call failed with ${o}`))}}function Gv(t,e,r){if(Wv())Rt("event",t,{send_to:Oi(e),non_interaction:!0}),r();else throw new Error(B)}function jv(t,e,r){let o=`${d}_${e}`,n=U([o,t.integration_product,t.conversion_product,t.conversion_type,t.comparison_type,t.threshold_setter,t.threshold_group_count,t.comparison_population,`score_${H(t.score)}`]);function i(){typeof r=="function"&&r(So,{event:n})}v()?qv(n,e,i):Gv(n,e,i)}var rc={eventHitType:Bv,name:So,setup:Vv,send:Q(So,jv)};var oc="heap";function Hv(t,e,r){let o=E(window,"heap");if(o&&typeof o.addUserProperties=="function"){let i={[U([d,t.comparison_group,t.threshold_group_count])]:t.score};o.addUserProperties(i),typeof r=="function"&&r(oc,i)}else throw new Error(B)}var nc={name:oc,send:Q(oc,Hv)};var gn="klaviyo";function zv(t,e){if(!v()){let r=J(t,gn).api_key,o=window.klaviyo?window.klaviyo.identify:null;if(r&&typeof o!="function"){let n=document.createElement("script");n.src=`https://static.klaviyo.com/onsite/js/klaviyo.js?company_id=${r}`,n.async=!0,document.getElementsByTagName("head")[0].appendChild(n)}}e()}async function fp(t,e,r,o){try{let c=function(){typeof o=="function"&&o(gn,e)},u=function(){let g=H(r.score),h={[e]:g};return s&&b(h,{email:s}),h};var n=c,i=u;let s=await de();if(v()){let g=J(t,gn).api_key;g&&Z(`https://a.klaviyo.com/client/profiles/?company_id=${g}`,{body:JSON.stringify({data:{type:"profile",attributes:{properties:u()}}}),method:"POST",headers:{accept:"application/json",revision:"2024-05-15","content-type":"application/json"}},c())}else window.klaviyo||(window.klaviyo=[],a.error(new T(`${gn} globals not found`))),window.klaviyo.push(["identify",u()]),c()}catch(c){a.error(c)}}var pp={},ic={};function Jv(t){let e=pp[t];return()=>{fp(e.appName,e.eventName,e.scoreObj,e.onSuccess)}}function Zv(t,e,r){if(!t)return;let o=U([`${d}`,"score",t.threshold_group_count,t.comparison_group]);t.name!==void 0&&(pp[t.name]={appName:e,eventName:o,scoreObj:t,onSuccess:r},ic[t.name]===void 0&&(ic[t.name]=Jv(t.name)),_.addListener(window,"beforeunload",ic[t.name])),_.setTimeout(()=>fp(e,o,t,r),5e3)}var ac={name:gn,setup:zv,send:Zv};var Kv="event",Ci="microsoft_ads";function Yv(t,{onSuccess:e,eventCategory:r,eventAction:o,eventLabel:n,eventValue:i}){function c(){typeof e=="function"&&e(Ci,{event_category:r,event_action:o,event_label:n,event_value:i})}try{window.uetq=window.uetq||[],window.uetq.push("event",o,{event_category:r,event_label:n,event_value:i}),c()}catch{a.error(new T(`${Ci} globals not found`),{appName:t})}}function Xv(t,e){let o=J(t,Ci).tracking_id;o?function(n,i,c,s,u){var g,h,S;n[u]=n[u]||[],g=function(){var W={ti:o};W.q=n[u],n[u]=new UET(W),n[u].push("pageLoad"),e()},h=i.createElement(c),h.src=s,h.async=1,h.onload=h.onreadystatechange=function(){var W=this.readyState;W&&W!=="loaded"&&W!=="complete"||(g(),h.onload=h.onreadystatechange=null)},S=i.getElementsByTagName(c)[0],S.parentNode.insertBefore(h,S)}(window,document,"script","//bat.bing.com/bat.js","uetq"):e()}function Qv(t,e,r){let o=`${d}_${e}`;if(!t)return;let n=t.integration_product,i=U([o,n,t.conversion_product,t.conversion_type]),c=U([t.comparison_type,t.threshold_setter,t.threshold_group_count,t.comparison_population,t.comparison_group]),s,u;if(n==="prospecting")u=t.raw_probability;else{s=H(t.score);let g=Number(t.score);g>=0&&(u=g)}Yv(e,{onSuccess:r,eventCategory:i,eventAction:c,eventLabel:s,eventValue:u})}var sc={eventHitType:Kv,name:Ci,setup:Xv,send:Qv};var cc="oracle_responsys";function e_(t,e,r){let o=E(window,"ORA.click");if(typeof o=="function"){let n=H(t.score);o({data:{bc_score:n,"wt.dl":99}}),typeof r=="function"&&r(cc,n)}else throw new Error(B)}var uc={name:cc,send:Q(cc,e_)};var lp="track";var dc="outbrain";function t_(t,e,r){let o=E(window,"obApi");if(typeof o=="function"){let n=`${d}`,i=t.integration_product,c=U([n,i,t.threshold_group_count,H(t.score)]," ").replace(/[^0-9a-z\s]/gi,"");o(lp,c),typeof r=="function"&&r(dc,c)}else throw new Error(B)}var fc={name:dc,send:Q(dc,t_)};var Hr="pinterest",Ni=`${d}`;function pc(t){return{lead_type:t.integration_product,video_title:t.conversion_product,order_id:t.conversion_type,property:t.comparison_group,promo_code:t.comparison_type,search_query:t.threshold_setter,order_quantity:H(t.threshold_group_count),value:H(t.score)}}async function mp(t,e,r){try{let o=await I("_pin_unauth"),n=await I("_derived_epik"),i={event:Ni,ed:e,tid:t,pd:{...o&&{pin_unauth:o},...n&&{derived_epik:n}}};return r&&(i.ad={loc:O(),ref:document.referrer}),i}catch(o){a.error(o);let n={event:Ni,ed:e,tid:t};return r&&(n.ad={loc:O(),ref:document.referrer}),n}}async function r_(t,e,r){try{let o=J(e,Hr).tracking_id;if(o){let n="https://ct.pinterest.com",i=pc(t),c=await mp(o,i,!1),s=Ie(c,!1);Z(`${n}/user/?${s}`,{method:"GET"},r,()=>a.error(new Error(`${Hr} api call failed`)));let u=await mp(o,i,!0),g=Ie(u,!1);Z(`${n}/v3/?${g}`,{method:"GET"},r,()=>a.error(new Error(`${Hr} api call failed`)))}}catch(o){a.error(o)}}async function o_(t,e){try{let r=pc(t);if(J(e,Hr).advancedMatching){let n=await de();b(r,{em:n})}return r}catch(r){return a.error(r),pc(t)}}function n_(t,e,r){if(v())r_(t,e,r);else{let o=E(window,"pintrk");if(typeof o!="function")throw new Error(B);o_(t,e).then(n=>{o("track",Ni,n),typeof r=="function"&&r(Hr,Ni)}).catch(n=>a.error(n))}}var lc={name:Hr,send:Q(Hr,n_)};var zr="snapchat",Ri="_scid",Li="u_sclid",Di="u_scsid",hc="snaptr",gc={};function Fi(t,{getItem:e,setItem:r},o,n=zo){return!e||!r?(a.error(new Error("Storage object is not valid")),Promise.resolve()):Promise.resolve(e(t)).then(i=>{let c=i;c||(c=n(),r(t,c)),o(c)}).catch(i=>{a.error(i)})}function mc(t){return gc[t]}function $i(t,e){return gc[t]=e,gc[t]}function i_(t){return J(t,zr)?.pixel_id}function gp(t,e){let r=i_(e),o=Kt("navigation")[0],n=Kt(hc)[0];return{pid:r,ev:t.score,pl:O(),rf:Oe(),ts:Date.now(),trackId:zo(),u_c1:mc(Ri),u_sclid:mc(Li),u_scsid:mc(Di),m_dcl:o?.domContentLoadedEventEnd,m_pi:o?.domInteractive,m_pl:o?.loadEventEnd,m_pv:o?"v2":"v1",m_rd:Math.floor(On()),m_sl:n?.startTime,v:"2.0.0",bt:"1d53c387",if:!1}}function Po(t){if(typeof Promise.allSettled=="function")return Promise.allSettled(t);let e=t.map(r=>Promise.resolve(r).then(o=>({status:"fulfilled",value:o}),o=>({status:"rejected",reason:o})));return Promise.all(e)}var a_="https://tr.snapchat.com/p";function hp(t,e){return v()?Po([Fi(Ri,{getItem:globalThis.browser?.cookie?.get,setItem:globalThis.browser?.cookie?.set},r=>{$i(Ri,r)}),Fi(Li,{getItem:ye,setItem:Ue},r=>{$i(Li,r)}),Fi(Di,{getItem:z,setItem:pe},r=>{$i(Di,r)})]).finally(e):e()}function s_(t,e,r){let o=gp(t,e);Z(`${a_}`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Ie(o)},()=>{typeof r=="function"&&r(zr,`${d},${t.score}`)},()=>{a.error(`Unable to send scores to ${zr}.`)})}function c_(t,e,r){let o=E(window,hc);if(typeof o=="function"){if(o("track",t.score),typeof r=="function"){let n=`${d}`,i=U([n,t.score]);r(zr,i)}}else throw new Error(B)}function u_(t,e,r){return v()?s_(t,e,r):c_(t,e,r)}var hn={name:zr,identify:hp,setup:hp,send:Q(zr,u_)};var yc="taboola";function d_(t,e,r){if(!t)return;window._tfa===void 0&&(window._tfa=[],a.error(new T(`${yc} globals not found`),{appName:e}));let o=`${d}`,n=t.integration_product,i=U([o,n,t.threshold_group_count,H(t.score)],"_");window._tfa.push({notify:"event",name:i}),typeof r=="function"&&r(yc,i)}var vc={name:yc,send:d_};function f_(){return"product"}async function _c(){try{let t={},e=await de();return e&&(e=e.toLowerCase()),t.email=e,t}catch(t){return a.error(t),{}}}function Mi(t,e){let r=U([`${d}_${t}`,e]),o=f_();return{content_id:r,content_type:o}}async function yp(t){try{let e={context:{page:{referrer:document.referrer,url:O()},pixel:{code:t},userAgent:Ee()}},r={},o=await I("_ttp");o&&(r.anonymous_id=o);let n=await _c(),i=await ni(n),c={...r,...i};return e.context.user=c,e}catch(e){a.error(e);return}}function wc(t,e,r,o){return yp(t).then(n=>(n.event=e,n.properties=Mi(o,r),n))}function vp(t){return yp(t).then(e=>(e.event="EnrichAM",e))}var yn="tiktok",p_="https://analytics.tiktok.com/api/v2/pixel";function l_(t){let e=window.ttq;return e&&e.instances()&&Array.isArray(e.instances())?!!e.instances().find(r=>t===r.pixelCode&&r.loaded):!1}function Ec(){return M("tiktokAccounts")||[]}function m_(t,e){v()||Ec().forEach(o=>{let n=o.pixelId;n&&!l_(n)&&function(i,c,s){i.TiktokAnalyticsObject=s;var u=i[s]=i[s]||[];u.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],u.setAndDefer=function(h,S){h[S]=function(){h.push([S].concat(Array.prototype.slice.call(arguments,0)))}};for(var g=0;g<u.methods.length;g++)u.setAndDefer(u,u.methods[g]);u.instance=function(h){for(var S=u._i[h]||[],W=0;W<u.methods.length;W++)u.setAndDefer(S,u.methods[W]);return S},u.load=function(h,S){var W="https://analytics.tiktok.com/i18n/pixel/events.js";u._i=u._i||{},u._i[h]=[],u._i[h]._u=W,u._t=u._t||{},u._t[h]=+new Date,u._o=u._o||{},u._o[h]=S||{},S=document.createElement("script"),S.type="text/javascript",S.async=!0,S.src=W+"?sdkid="+h+"&lib="+s,h=document.getElementsByTagName("script")[0],h.parentNode.insertBefore(S,h)},u.load(n),u.page()}(window,document,"ttq")}),e()}function bc(){a.error(new Error(`${yn} api call failed`))}async function _p(t,e){try{let r=await de(),o=await Ft();if(r||o){let n=t.pixelId,i=E(window,"ttq.instance");typeof i=="function"&&typeof i(n).identify=="function"&&(i(n).identify({email:r,phone_number:o}),e&&typeof e=="function"&&e())}}catch(r){a.error(r)}}function Sc(t,e,r){Z(p_,{body:JSON.stringify(t),method:"POST"},e,r)}async function wp(t,e){try{let r=t.pixelId;if(r&&(await _c()).email){let n=await vp(r);Sc(n,e,bc)}}catch(r){a.error(r)}}function g_(t,e){let r=v();function o(i,c){return()=>{let u=(ot(`${t}.integrations`)||[]).find(g=>yn===g.platform);u&&u.scores&&u.scores.forEach(({score:g,integration_product:h})=>{r?wc(c,g,h,t).then(S=>{Sc(S,e,bc)}):i(c).track(g,Mi(t,h))}),r||e&&typeof e=="function"&&e()}}Ec().forEach(i=>{let c=i.pixelId,s=E(window,"ttq.instance"),u=o(s,c);r?wp(i,u):_p(i,u)})}function Ep(t,e){return function(){if(typeof t=="function"){let o=`${d}`,n=U([o,e.score]);t(yn,n)}}}function h_(t,e,r,o){let n=t.pixelId,i=E(window,"ttq.instance");if(n&&typeof i=="function")_p(t),e.score&&i(n).track(e.score,Mi(r,e.integration_product)),Ep(o,e)();else throw new Error(B)}function y_(t,e,r,o){let n=t.pixelId;if(n)wp(t).then(()=>{let i=e.score,c=e.integration_product;i&&(o=typeof o=="function"?Ep(o,e):void 0,wc(n,i,c,r).then(s=>{Sc(s,o,bc)}))});else throw new Error(B)}function v_(t,e,r){Ec().forEach(n=>{v()?y_(n,t,e,r):h_(n,t,e,r)})}var vn={name:yn,identify:g_,setup:m_,send:Q(yn,v_)};function Pc({src:t,alt:e}){let r=document.createElement("img");return r.width=1,r.height=1,r.alt=e||"",r.src=t,r}var Bi="tradedesk";function __(t,e,r){let n=J(e,Bi).pixel_id,i=H(t.score)-1,c=t.comparison_type,s=t.conversion_product,u=t.threshold_group_count;n&&!v()&&te(()=>{if(Pc({src:`https://insight.adsrvr.org/track/pxl/?${n}&fmt=3&td1=blackcrow&td2=comparison_type|${c}&td3=comparison_product|${s}&td4=threshold_group_count|${u}&td5=score|${i}`}),typeof r=="function"){let g=`${d}`,h=U([g,t.score]);r(Bi,h)}else throw new Error(B)})}var xc={name:Bi,send:Q(Bi,__)};var gr="target";var Ui={[Xs.name]:Xs,[or.name]:or,[tc.name]:tc,[rc.name]:rc,[nc.name]:nc,[ac.name]:ac,[sc.name]:sc,[uc.name]:uc,[fc.name]:fc,[lc.name]:lc,[hn.name]:hn,[vc.name]:vc,[vn.name]:vn,[xc.name]:xc};function w_(t,e,r="score_push"){Mt(gr,t,r),se(`${gr} ${r}: ${t}`,e)}function E_(t,e){e&&P(e,r=>{r.name&&Ui[t].send(r,gr,w_)})}function b_(){let t=ei(gr),e={};return t.forEach(r=>{let o=Ui[r];o!==void 0&&typeof o.setup=="function"?e[r]=new Promise(n=>o.setup(gr,n)).catch(n=>{a.error(n)}):e[r]=Promise.resolve()}),e}function S_(t){let e=ot(`${gr}.integrations`),r=[];return P(e,o=>{let n=o.platform,i=o.scores,c=Ui[n];t[n]&&r.push(t[n].then(()=>{c!==void 0&&typeof c.send=="function"&&E_(n,i)}))}),Promise.all(r)}var bp={appName:gr,init:b_,platforms:Ui,sendAppScores:S_};var hr="identity";var P_=oe({name:"identity_kpi_sampling",allocations:[{percent:.1,value:!0}]});function Sp(t,e,r){P_&&he(`${t} platform request for ${e}`,{"platform.name":e,"event.name":r,appName:t})}function Tc(){return{fb:window?.trekkie?.config?.S2S?.facebookCapiEnabled}}var xo=/.*\/cart\/{1,2}add(\.js|\.json)?(\?.*)?$/gm;function x_(t,e){return new Promise((r,o)=>{Z(t,e,r,o)}).catch(r=>a.error(r))}var Pp=/.*(\/cart(\.json|\.js)|\/cart\/(change|update)(\.js|\.json)?)(\?.*)?$/gm,Wi="_bcai_cs",xp=!1;function Vi(t){try{Ue(Wi,t)}catch(e){a.error(e)}}async function Ip(){try{return await ye(Wi)}catch(t){a.error(t);return}}function T_(){return window?.Shopify?.routes?.root?x_(`${window.Shopify.routes.root}cart.js`):Promise.resolve()}function Tp(t){try{return JSON.parse(t)}catch(e){return a.error(new Ht(e?.message)),null}}async function Ap(t){try{let e=[t];t.items?.length&&(e=t.items);let r=e.reduce((c,s)=>{let u={...c};return s?.id!==void 0&&(u[s.id]=s),u},{}),o=await Ip();if(!o||!t||Object.keys(r).length===0)return;let n=(o.items??[]).map(c=>{let s={...c},u=r[s?.id];return s.quantityAdded=0,u&&(s.quantityAdded=u.quantity-s.quantity,s.quantity=u.quantity,delete r[s.id]),s});Object.keys(r).forEach(c=>{let s=r[c];n.push({...s,quantityAdded:s.quantity})});let i={...o,item_count:n.reduce((c,s)=>c+(s.quantity??0),0),total_price:(o.total_price??0)+n.reduce((c,s)=>c+s.quantityAdded*(s.price??0),0)};i.items=n.map(c=>(delete c.quantityAdded,c)),Vi(i)}catch(e){a.error(e)}}function A_(){v()||xp||(xp=!0,sn(Pp,t=>{try{t=Tp(t),t&&Vi(t)}catch(e){a.error(e)}}),cn(Pp,t=>{t.json().then(e=>Vi(e),e=>{a.error(new Ht(e?.message))}).catch(e=>a.error(e))}),sn(xo,t=>{try{return t=Tp(t),t?Ap(t):void 0}catch(e){a.error(e);return}}),cn(xo,t=>t.json().then(Ap).catch(e=>a.error(e))))}function I_(){return v()?Promise.resolve():Ip().then(t=>t||T_().then(e=>(e&&Vi(e),e)))}var _n={setup:A_,getData:I_};async function To(t,e,r,o){try{let n=await ee(e),i={site_name:f,metadata:Xn(),device_info:Ee(),page_url:O(),page_referrer_url:Oe(),page_title:Xr(),platform_name:t,platform_event_name:r,ids:n,user_data:{fbc:await I(Yt),fbp:await I(_t),bcvid:(await tt())?.id,sh:{ct:await I("cart")||(await ye(Wi))?.token,ch:Pd()}},resolved_score:await z($o),capi:Tc()},c={fb_test_event_code:await I("fb_test_event_code")};Wd(b(i,o,c)),Sp(hr,t,r)}catch(n){a.error(n)}}var kp="klaviyo",qi;function k_(t){return t==="track"}function O_(t){return t.overrideSampling=!0,t.message=`identity: ${t.message}`,t}function C_(t){return e=>{e.message===`identity: ${B}`?a.error(new T(t)):a.error(e)}}function Ac(t,e){k_(e[0])&&To(kp,t,e[1],{data:e[2]})}function N_(t){Array.isArray(window._learnq)&&window._learnq.forEach(e=>{Ac(t,e)})}function R_(t){if(typeof window._learnq.push=="function"){let e=window._learnq.push;window._learnq.push=function(...r){let o=e.apply(this,r);try{let n=r[0];return Ac(t,n),o}catch(n){return a.error(n),o}}}}function L_(t){function e(){let r=qi.apply(this,arguments);try{let o=arguments?Array.prototype.slice.call(arguments[0]):[];return Ac(t,o),r}catch(o){return a.error(o),r}}window._learnq.push&&typeof qi!="function"&&(qi||(qi=window._learnq.push),window._learnq.push=e)}function D_(t,e){window._learnq=window._learnq||[],!v()&&(window._learnq?._loaded||(N_(e),R_(e)),D(()=>{if(window._learnq?._loaded){L_(e);return}throw O_(new Error(B))},C_("Klaviyo platform load not detected."),500,10))}var Ic={name:kp,setup:D_};var Op="google_ads";async function F_(t,e){try{await Ii(t,Op,e,!1)}catch(r){a.error(r)}}var kc={name:Op,setup:F_};var Cp="google_analytics";async function $_(t,e){try{await Ii(t,Cp,e,!0)}catch(r){a.error(r)}}var Oc={name:Cp,setup:$_};var En="facebook_ads";function M_(t){return t==="track"}function Np(t,e,r,o,n){M_(e)&&To(En,t,r,{data:o,platform_event_id:n?.eventID})}var wn=[];function B_(t=[]){wn=wn.concat(t.filter(e=>!wn.includes(e)))}function U_(){return wn}function V_(){wn=[]}function W_(t,e){if(!window.fbq?.alreadyIntercepted)if(typeof window.fbq?.getState=="function"){let r=window.fbq;window.fbq=(...o)=>{Np(e,...o),r(...o)},Object.keys(r).forEach(o=>{Object.defineProperty(window.fbq,o,{set:n=>{r[o]=n},get:()=>r[o]})}),window.fbq.alreadyIntercepted=!0,U_()?.forEach(([...o])=>{Np(e,...o)}),V_()}else throw new Error(`${En} pixel not yet loaded for ${t}.`)}async function q_(t,e){try{let r=[];if(e?.length){let o=await Zo(t);e.forEach(n=>{let i=n?.loadPixel===!0,c=n?.pixelId,s=r.includes(c);i&&c&&!s&&o&&(r.push(c),si(c,o))})}}catch(r){a.error(r)}}async function G_(t,e){try{if(v())return;let r=Ir(t).platforms?.filter(o=>o.platform?.toLowerCase()===En);await q_(e,r),await new Promise((o,n)=>{D(()=>{B_(window.fbq?.queue),W_(t,e),o()},()=>{a.error(new T(`${En} pixel not present for ${t}.`)),n()},300)})}catch(r){a.error(r)}}var Cc={name:En,setup:G_};function j_(){return new Promise((t,e)=>D(()=>{if(window.Shopify.checkout)return t(window.Shopify.checkout);throw new T("Shopify checkout object missing")},r=>{a.error(r),e(r)},100))}function H_(){if(!window.Shopify)throw new T("Shopify global missing")}function z_(t){D(()=>{H_(),t()},r=>a.error(r),300,300)}var Jr={setup:z_,getShopifyCheckout:j_};var Nc="AddPaymentInfo";function J_(t,e){return t.target.matches(`${["#continue_button",...e].filter(r=>!!r).join(",")}`)}function Rp(){return $e()?.replace(/\/$/,"").split("/").pop()}function Z_(t,e){Ma()&&t(Nc,{data:Hn(),platform_event_id:Rp()}),Jr.setup(()=>{jn()==="payment"&&_.addListener(document,"click",r=>{J_(r,e?.additionalSelectors??[])&&_n.getData().then(o=>{o=o||{};let n=JSON.parse(JSON.stringify(o)),i=Gn();i&&(n.total_price=i),t(Nc,{data:o,platform_event_id:Rp()})})},!0)})}var Lp={eventName:Nc,setup:Z_};async function K_(){let t=await fetch(`${Uo()}cart.js`);if(!t.ok)throw new Error(`Failed to fetch cart: ${t.statusText}`);return await t.json()}var Rc=class extends Error{constructor(){super("Root route not available"),this.status="warn"}},bn=class{static async fromAPI(){try{await bt(()=>{if(!Uo())throw new Rc});let e=await bt(K_,2);return new bn(e)}catch(e){throw e.status="warn",e}}constructor(e){this.cart=e}getEventDataForItem(e){let r=this.cart?.items?.find(o=>o?.id===e);return r&&(r={...r},delete r.sections,r.currency=eo(),r.total_item_count=this.cart?.item_count,r.total_price=this.cart?.total_price),r}},Gi=bn;var Ao="AddToCart";function Y_(t){return typeof t=="number"&&t>=0}var Lc=class{constructor(e){this.sendEvent=e}async sendAddToCartEvents(e){try{let r=e?.items||[e];r=r.filter(n=>n?.id&&Y_(n?.quantity)?!0:(a.error(new Ht(`SHOPIFY ${Ao} addToCart request did not return valid item: ${JSON.stringify(n)}`)),!1));let o=await Gi.fromAPI();r.forEach(n=>{let i=o.getEventDataForItem(n.id);if(!i){a.error(new Ht("SHOPIFY updated cart did not contain the item that was added to the cart"));return}this.sendEvent(Ao,{data:i})})}catch(r){a.error(r)}}interceptXhr(){sn(xo,e=>{let r=JSON.parse(e);this.sendAddToCartEvents(r)})}interceptFetch(){cn(xo,e=>{e.json().then(r=>{this.sendAddToCartEvents(r)})})}},Dp=Lc;var Dc=class{constructor(e){this.sendEvent=e}async logATCOnCartPage(){if(Ju())try{let e=await Gi.fromAPI();if(!e?.cart?.items?.length)return;let r=e.cart.items[0],o=e.getEventDataForItem(r.id);this.sendEvent(Ao,{data:o})}catch(e){a.error(e)}}},Fp=Dc;var X_={eventName:Ao,setup(t,e={}){v()||(this._interceptor||(this._interceptor=new Dp(t),this._interceptor.interceptXhr(),this._interceptor.interceptFetch()),e.logATCOnCartPage&&!this.cartPageLogger&&(this.cartPageLogger=new Fp(t),this.cartPageLogger.logATCOnCartPage()))},cleanup(){delete this._interceptor,delete this.cartPageLogger}},$p=X_;var Mp="CompleteRegistration";function Q_(t){try{return t.target.matches('form:has(input[type="email"])')}catch(e){if(e?.message.includes("is not a valid selector"))return new RegExp(/<input.*type="email".*>/).test(t.target.innerHTML)}return!1}function ew(t){v()||_.addListener(document,"submit",e=>{Q_(e)&&t(Mp)},!0)}var Bp={eventName:Mp,setup:ew};var tw=["button#checkout[type=submit]","button#checkout[type=submit] *","button[name=checkout]","button[name=checkout] *","input[id*=checkout][type=submit]","input[id*=checkout][type=submit] *",'[href*="/checkout"]','[href*="/checkout"] *',"button.rebuy-cart__checkout-button","button.rebuy-cart__checkout-button *","i.rebuy-button-icon","i.rebuy-button-icon *",'form[action="/cart"] [name="checkout"]','form[action="/cart"] [name="checkout"] *','form[action="/cart"] button[type="submit"]','form[action="/cart"] button[type="submit"] *','form[action="/checkout"] button','form[action="/checkout"] button *',"button.rebuy-cart__flyout-checkout-button","button.rebuy-cart__flyout-checkout-button *",".cart-drawer__action button",".cart-drawer__action button *",'button[class*="checkout"]','button[class*="checkout"] *','button[id*="checkout"]','button[id*="checkout"] *','a[class*="checkout"]','a[class*="checkout"] *','a[id*="checkout"]','a[id*="checkout"] *','a[name="checkout"]','a[name="checkout"] *',".checkout-btn",".checkout-btn *","button#simpl_buynow-button","button#simpl_buynow-button *",".c-button.rebuy-button",".c-button.rebuy-button *"],rw=["#dynamic-checkout-cart button","#dynamic-checkout-cart button *","#dynamic-checkout-cart [role=button]","#dynamic-checkout-cart [role=button] *",".additional-checkout-buttons button",".additional-checkout-buttons button *",".additional-checkout-buttons [role=button]",".additional-checkout-buttons [role=button] *"];function ow(t,e){return t.target.matches(`${[...tw,...rw,...e].filter(r=>!!r).join(",")}`)}function nw(t,e,r){if(ow(t,e?.additionalSelectors??[])&&t.isTrusted){let o=t.target.parentNode?.form;(!o||o.checkValidity())&&r()}}function iw(t,e){return new Promise(r=>{te(()=>{["click",...e?.additionalListeners?.length?e.additionalListeners:[]].forEach(o=>_.addListener(document,o,n=>nw(n,e,t),!0)),r()})}).catch(r=>a.error(r))}var Up={setup:iw};function Fc(t){let e=new Error(t);return e.name="BadRenderError",e.status="warn",e.stack=ie(e.stack,1),e}var aw=new Promise(t=>{te(t)}),sw="div.paypal-checkout-sandbox";function cw(t){return new MutationObserver(e=>{e.forEach(r=>{r.addedNodes.forEach(o=>{o instanceof Element&&o.matches(sw)&&t()})})})}async function uw(t){try{if(v())return;await aw;let e=cw(t);D(()=>{if(!(document.body instanceof Node))throw new Error;e.observe(document.body,{childList:!0})},()=>{a.error(new Fc(`document.body did not render in time and had value: ${document.body}`))})}catch(e){a.error(e)}}var Vp={setup:uw};async function dw(t){try{let e=t.filter(o=>o.status==="fulfilled").map(o=>o.value.json());return(await Po(e)).filter(o=>o.status==="fulfilled"&&o.value.product).map(o=>o.value)}catch(e){let r=new Error(`Error occurred while parsing json from promise results. Error: ${e.message}`);return r.status="warn",a.error(r),Promise.resolve([])}}async function fw({items:t}){try{let e=t.filter(o=>o.url).map(o=>{let n=new URL(`https://${Lo()}${o.url}`);return n.pathname+=".json",gi(n.href)}),r=await Po(e);return await dw(r)}catch(e){let r=new Error(`Error occurred while fetching product info with tags. Error: ${e.message}`);return r.status="warn",a.error(r),Promise.resolve([])}}function pw(t,e){let r={...t},{items:o}=r;return e.forEach(n=>{let i=o.find(c=>c.product_id&&n.product?.id&&c.product_id===n.product.id);i&&n.product.tags&&(i.tags=n.product.tags)}),r}async function Wp(t){try{if(t?.items?.length>0){let e=await fw(t);return pw(t,e)}}catch(e){let r=new Error(`Error occurred while including product tags. Sending event without tags. Error: ${e.message}`);r.status="warn",a.error(r)}return t}var qp="InitiateCheckout";function lw(t,e){if(Zu())return Promise.resolve();_n.setup();let r=async()=>{try{let o=await _n.getData(),n=o;e?.loadProductTags===!0&&(n=await Wp(o)),t(qp,{data:n})}catch(o){a.error(o)}};return Promise.all([Up.setup(r,e),Vp.setup(r)])}var Gp={eventName:qp,setup:lw};var jp="PageView";function mw(t){(!v()||Ku())&&t(jp)}var Hp={eventName:jp,setup:mw};var Jp="Purchase";function zp(t){return["order_id","line_items","total_price_set.shop_money.currency_code","total_price_set.shop_money.amount"].every(e=>E(t,e)!==void 0)}function gw(t){if(window.cart_json){let{line_items:e,currency:r,total_price:o}=window.cart_json;return b({},t,{line_items:e,total_price_set:{shop_money:{currency_code:r,amount:o}}})}return t}function hw(t){function e(r){t(Jp,{data:{...r},platform_event_id:r.order_id||r?.order?.id})}$a()?e(Hn()):q("platform",y.VIEW_RESPONSE,()=>{Jr.setup(()=>{M("page.log_purchase")&&Jr.getShopifyCheckout().then(r=>{if(zp(r))return e(r);let o=gw(r);if(zp(o))return e(o);throw new T("Shopify checkout required fields are missing")}).catch(r=>a.error(r))})})}var Zp={eventName:Jp,setup:hw};function Kp(t,e){return b({},{content_ids:e?.map(r=>r?.product_id).filter(r=>r),currency:t?.currency,content_type:"product_group",num_items:e?.reduce((r,o)=>r+(o?.quantity?o.quantity:0),0)})}function Yp(t){let e=t?.lineItems||[];return{content_ids:e?.map(r=>r?.variant?.product?.id).filter(r=>r),content_type:"product_group",num_items:e?.reduce((r,o)=>r+(o?.quantity?o.quantity:0),0),order_id:t?.order?.id,currency:t?.totalPrice?.currencyCode,value:t?.totalPrice?.amount,contents:e?.map(r=>({id:r?.variant?.product?.id,quantity:r?.quantity,item_price:r?.variant?.price?.amount,title:r?.title}))}}function yw(t){if(v())return Yp(t);let e=t?.line_items??[];return b(Kp(t,e),{order_id:t?.order_id,currency:t?.total_price_set?.shop_money?.currency_code,value:t?.total_price_set?.shop_money?.amount,contents:e?.map(r=>({id:r?.product_id,quantity:r?.quantity,item_price:r?.price,title:r?.title}))})}function Xp(t){function e(o){return b({},{id:o?.product_id,quantity:o.quantity,item_price:tr(o.price),title:o.product_title,description:o.product_description,category:o.product_type})}let r=t?.items??[];return b(Kp(t,r),{value:Gn()||tr(t?.total_price),contents:r?.map(o=>e(o))})}function vw(t){let e={};return t?.items?.length?e=JSON.parse(JSON.stringify(t?.items[0])):t&&(e=JSON.parse(JSON.stringify(t))),{content_category:e.product_type,content_ids:e.product_id?[e.product_id]:[],content_name:e.title,content_type:"product_group",currency:e.currency||eo(),num_items:e.quantity||1,value:e.price?tr(e.price):void 0}}function _w(t){return{search_string:t?.search_string}}function ww(t){let e=v()?{...Yp(t)}:{...Xp(t)};return delete e?.num_items,e}function Ew(t){return b({},{content_category:t?.type,content_ids:t?.id&&[t?.id],content_name:t?.title,content_type:"product_group",currency:t?.currency,value:tr(t?.price)})}var bw={addtocart:{eventName:"AddToCart",convert:vw},purchase:{eventName:"Purchase",convert:yw,isValid:t=>t?.total_price_set?.shop_money?.currency_code&&t?.total_price_set?.shop_money?.amount||t?.totalPrice?.currencyCode&&t?.totalPrice?.amount},addpaymentinfo:{eventName:"AddPaymentInfo",convert:ww},viewedproduct:{eventName:"ViewContent",convert:Ew},pageview:{eventName:"PageView"},initiatecheckout:{eventName:"InitiateCheckout",convert:Xp},search:{eventName:"Search",convert:_w},completeregistration:{eventName:"CompleteRegistration"}};function Qp(t,{data:e}={}){let r=bw[t?.toLowerCase()];if(!r||r.isValid&&!r.isValid(e))return;let o=r.convert&&r.convert(e);return{eventName:r.eventName,data:o}}function $c(t,e){return t.filter(r=>r.eventSource==="shopify"&&r.originalEventName===e)}var Bc="facebook_ads",el=[],Sn,Pn,Mc;function Sw(t,e,r){if(Mc=r.includes("facebook_ads"),v()){Sn=!1;return}async function o(){try{let n=Xo(e,Bc);Pn=await Zo(t),n.forEach(i=>{let c=i?.loadPixel===!0,s=i?.pixelId,u=el.includes(s);c&&s&&!u&&Pn&&(el.push(s),si(s,Pn))})}catch(n){a.error(n)}}Mc?D(()=>{let n=window?.trekkie?.config?.S2S?.facebookCapiEnabled;if(typeof n=="boolean")n?Sn=!1:(Sn=!0,o());else throw new Error("Trekkie facebookCapiEnabled not loaded.")},()=>a.error(new T("Trekkie not loaded")),100):(Sn=!0,o())}async function Pw(t){try{if(v()){if(Pn=await Zo(t),!Mc)return!0;let e=await z(Bn);if(typeof e=="boolean"&&!e)return!0}}catch(e){a.error(e)}return!1}async function xw(t,e,r,o="identity"){let n=await Pw(r);if(Sn||n){let i=Qp(t,e),c=Pn?.external_id;Xo(o,Bc).forEach(s=>{let u=$c(s?.eventTrackers||[],t);function g(h,S){return h&&S&&i&&s.pixelId}u.forEach(h=>{let S=h?.overrideEventName||h?.originalEventName;g(h,S)&&(v()?ii(s.pixelId,e?.platform_event_id,c,S,i?.data):D(()=>{if(typeof window.fbq=="function")window.fbq("trackSingle",s.pixelId,S,i?.data,{eventID:e?.platform_event_id});else throw new Error("FBQ not loaded")},()=>a.error(new T("FBQ not loaded")),100))})})}}var Uc={name:Bc,setup:Sw,sendEvent:xw};var tl={[Uc.name]:Uc},rl,ol,ji,Vc;function Tw(t,e,r,{browserEventPlatforms:o,validatePlatforms:n}={}){rl=t,ol=e,ji=r,Vc=o??[],n=n??[],Vc.forEach(i=>{tl[i]?.setup(ji,e,n)})}function Aw(t,e={},{browserEventPlatforms:r}={}){let o=r??Vc;e.platform_event_id||(e.platform_event_id=zo()),To(rl,ji,t,e),o.forEach(n=>{tl[n]?.sendEvent(t,e,ji,ol)})}var ct={setup:Tw,sendEvent:Aw};function nl(){let t=be(window.location.search).variant,e=t?t.split("?")[0]:null;if(e)return parseInt(e,10);let r=[...document.querySelectorAll('input[name="id"]')];if(r.length===1)return parseInt(r,10);let o=window.ShopifyAnalytics?.meta;if(o?.product?.id){let n=[...document.querySelectorAll(`input[name="id"][data-productid="${o?.product?.id}"]`)];if(n.length===1&&n[0]?.value)return parseInt(n[0].value,10)}if(o?.product?.variants&&o?.selectedVariantId){let n=parseInt(o?.selectedVariantId,10),i=o?.product?.variants.filter(s=>s.id===n);if(window.ReCharge&&window.ga&&document.querySelector('[name="properties[shipping_interval_frequency]"]')?.value){let s=window.ReCharge.products.filter(u=>typeof u.variant_to_duplicate[`${n}`]=="string");if(s.length===1)return s[0].variant_to_duplicate[`${n}`]}if(i.length)return n}return null}var il="ViewedProduct";function al(t,e){let r=JSON.parse(JSON.stringify(t));if(r.variants&&r.variants.length){let n=r?.variant_id??nl()??r.variants[0].id,i=r.variants.find(c=>c.id===n)??r.variants[0];i.name&&(r.title=i.name),r.variants=[i]}r.featured_image?.startsWith("//")&&(r.featured_image=`https:${r.featured_image}`),delete r.description,delete r.media;let o=eo();o&&(r.currency=o),e(il,{data:r})}function Iw(t){Jr.setup(()=>{if(La()){let e=`${$e()}.js${window.location.search}`;Ge(e,{},r=>al(r,t))}})}var sl={eventName:il,setup:Iw,sendProductDataToPlatform:al};async function kw(t,e){try{if(await z(va))return;(e?.validatePlatforms||[]).includes("facebook_ads")&&D(()=>{let n=window?.trekkie?.config?.S2S?.facebookCapiEnabled;if(typeof n=="boolean")t(n?"FB_CAPI_ENABLED":"FB_CAPI_DISABLED"),pe(va,!0),pe(Bn,n);else throw new Error("Trekkie facebookCapiEnabled not loaded.")},()=>a.error(new T("Trekkie not loaded")),100)}catch(r){a.error(r)}}var cl={setup:kw};var ul="Search";function Ow(t){if(zu()){let e=O(),r={search_string:be(e)?.q};t(ul,{data:r})}}var dl={eventName:ul,setup:Ow};var fl="ActiveOnSite";async function Cw(t){try{if(await z(_a))return;t(fl),pe(_a,!0)}catch(e){a.error(e)}}var pl={eventName:fl,setup:Cw};var Wc="shopify";function Nw(t){let e=Ir(t),[r]=e?.platforms?.filter(o=>o?.platform===Wc.toUpperCase());return r}function Rw(t,e){let r=Nw(t),o=r?.eventTriggerSettings;ct.setup(Wc,t,e,r),cl.setup(ct.sendEvent,r),Lp.setup(ct.sendEvent,o?.AddPaymentInfo),Bp.setup(ct.sendEvent,o?.CompleteRegistration),$p.setup(ct.sendEvent,o?.AddToCart),Gp.setup(ct.sendEvent,o?.InitiateCheckout),Hp.setup(ct.sendEvent,o?.PageView),dl.setup(ct.sendEvent,o?.Search),Zp.setup(ct.sendEvent,o?.Purchase),sl.setup(ct.sendEvent,o?.ViewedProduct),pl.setup(ct.sendEvent,o?.ActiveOnSite)}var qc={name:Wc,setup:Rw};var Lw="shopify_webhook";async function Dw(t,e){try{if(v())return;let r={method:"POST",body:JSON.stringify({attributes:{_bcai:btoa(JSON.stringify({site_name:f,ids:await ee(e),user_data:{fbp:await I(_t),fbc:await I(Yt),bcvid:(await tt())?.id}})),_bcai_aid:await I("_shopify_y")}}),mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}};D(()=>{let o=Uo();if(!o)throw Error("Shopify Root Route Not Found");Ge(`${o}cart/update.js`,r)},()=>a.error(new Be("Cart update failed","ShopifyCart",!1,"warn")))}catch(r){a.error(r)}}var Gc={name:Lw,setup:Dw};function Fw(){let t="https://api.blackcrow.ai/user/?";return Lt(f)&&(t="https://api.sandbox.blackcrow.ai/user/?"),t}function $w(t={}){return{site_name:f,ids:t}}function jc(t){Ae(hr,y.IDENTIFY,b({},t),{})}function Mw(t){pe(Yr,t),jc(t)}function Ve(t=[]){let e=$w(t),o={servlet:"user",method:"POST",cache:"no-cache",body:JSON.stringify(e)};Ge(Fw(),o,Mw,n=>{a.error(n)})}function Bw(t){async function e(r){try{let o=await ee(t),n=rt("e",Pr(r));o.length&&n.length&&Ve(o.concat(n))}catch(o){a.error(o)}}md(e)}var Hc={name:"email",setup:Bw};function Uw(t){async function e(r){try{let o=await ee(t),n=rt("p",Tr(r));o.length&&n.length&&Ve(o.concat(n))}catch(o){a.error(o)}}Md(e)}var zc={name:"phone",setup:Uw};async function xn(t,e){try{return await z(t)===e?!0:(pe(t,e),!1)}catch(r){return a.error(r),!1}}var Vw="_kx";async function Ww(t){try{let o=function(c){let s=rt("klx",c);r.length&&s.length&&Ve(r.concat(s))};var e=o;let r=await ee(t),n=await to();o(ce(Vw)),await xn("_bcai_s_keid",n)||o(n)}catch(r){a.error(r)}}var Jc={name:"klaviyo",setup:Ww};async function qw(t){try{let i=function(){let S=ce(Cu);return S?.trim().length>0?`fb.1.${Date.now()}.${S}`:n},s=function(S){let W=Object.entries(S).reduce((ge,[Jt,Zt])=>ge.concat(rt(Jt,Zt)),[]);c.length&&W.length&&Ve(c.concat(W))};var e=i,r=s;let o=await I(_t),n=await I(Yt),c=await ee(t),u=i(),[g,h]=[await xn("_bcai_s_fbc",u),await xn("_bcai_s_fbp",o)];s({...!g&&{fbc:u},...!h&&{fbp:o}})}catch(o){a.error(o)}}var Zc={name:"facebook_ads",setup:qw};async function Gw(t){try{let e=await ee(t),r=uf();r&&e.length&&r.forEach(o=>{let n=[];n=n.concat(rt("fn",oi(o.fn))),n=n.concat(rt("ln",oi(o.ln))),n=n.concat(rt("fln",oi(o.fln))),n.length&&Ve(e.concat(n))},[])}catch(e){a.error(e)}}var Kc={name:"name",setup:Gw};async function jw(t){try{let e=await Re(()=>[...document.querySelectorAll("iframe[srcdoc]")].find(u=>u.srcdoc?.includes("sendlane.com")),12e4);if(!e)return;let o=(await new Promise(s=>e.contentDocument?.addEventListener("submit",s,{once:!0,capture:!0}))).target;if(!o||o.constructor.name!=="HTMLFormElement")throw new Error("Sendlane form is not an HTMLFormElement");let n=await ee(t),i=o.querySelector('input[type="email"]');i&&(n=n.concat([{name:"e",value:Pr(i.value)}]));let c=o.querySelector('input[type="tel"]');c&&(n=n.concat([{name:"p",value:Tr(c.value)}])),Ve(n)}catch(e){a.error(e)}}var Yc={name:"sendlane",setup:jw};async function ll(t=[]){try{let e=await z(Yr);if(e)jc(e);else{let r=await ee(t);r.length&&Ve(r)}}catch(e){a.error(e)}}var Hw={[Ic.name]:Ic,[Cc.name]:Cc,[qc.name]:qc,[Gc.name]:Gc,[kc.name]:kc,[Oc.name]:Oc},zw={[Hc.name]:Hc,[zc.name]:zc,[Jc.name]:Jc,[Zc.name]:Zc,[Kc.name]:Kc,[Yc.name]:Yc};function Jw(t,e){e.forEach(r=>{let o=zw[r];o&&typeof o.setup=="function"&&o.setup(t)})}function Xc(t,e){t.length!==0&&e&&e.forEach(r=>{let o=Hw[r];o&&typeof o.setup=="function"&&o.setup(hr,t)})}function Zw(t){return t.filter(e=>e.source==="cookie"&&e.cookieLoadUrl)}async function Kw(t){try{for(let e=0;e<t.length;e+=1)await I(t[e].value)||await on(Ge,t[e].cookieLoadUrl,{mode:"no-cors",credentials:"include"})}catch(e){a.error(e)}}async function Yw(){try{let c=function(s){q("platform",y.VIEW_RESPONSE,()=>{let u=ho(e?.scoreName);pe($o,u),s&&s(o,i)})};var t=c;let e=Ir(hr),r=e.userAttributes||[],o=e.userIdentifiers||[],n=Zw(o),i=new Set((e.platforms||[]).map(s=>s?.platform?.toLowerCase()).filter(s=>s));n.length&&await Kw(n),te(()=>{Jw(o,r)}),ll(o),e?.scoreName?await z($o)?(Xc(o,i),c()):c(Xc):Xc(o,i)}catch(e){a.error(e)}}function Xw(){return Yw(),{}}var ml={appName:hr,init:Xw};var Qw=C.object({name:C.string().optional(),percent:C.number().min(0).max(1).default(1),enabled:C.boolean().default(!0),platforms:C.object({googleAnalytics:C.object({variantName:C.string().regex(/^\S+-\S+-\S+$/)}).optional()}).optional()}),eE=C.object({experimentBuckets:C.array(Qw)}),Io=class{constructor(e){this.config=e}static fromAppSettings(){let e=dt("site_speed")?.appSetting?.siteSpeed||{},r=eE.parse(e);return new Io(r)}get settingsBucket(){let e=this.config.experimentBuckets.map(r=>({name:r.name,percent:r.percent,value:r}));return oe({name:"site_speed_enabled",allocations:e})}get enabled(){return this.settingsBucket.enabled}get googleAnalyticsVariantName(){return this.settingsBucket.platforms?.googleAnalytics?.variantName}get bucketName(){return this.settingsBucket.name}};var Hi="bcai-speed-override";function gl(){localStorage.setItem(Hi,"force_disabled")}function hl(){localStorage.setItem(Hi,"force_enabled")}function yl(){localStorage.removeItem(Hi)}function Qc(){return localStorage.getItem(Hi)}async function eu(){try{let t=await navigator?.serviceWorker?.getRegistration();t&&(t.active&&t.active.postMessage({message:"clear cache"}),await t.unregister())}catch(t){a.error(t)}}var yr,An,Sl,zi;var Pl=-1,ru=function(t){addEventListener("pageshow",function(e){e.persisted&&(Pl=e.timeStamp,t(e))},!0)},xl=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Tl=function(){var t=xl();return t&&t.activationStart||0},Ji=function(t,e){var r=xl(),o="navigate";return Pl>=0?o="back-forward-cache":r&&(document.prerendering||Tl()>0?o="prerender":document.wasDiscarded?o="restore":r.type&&(o=r.type.replace(/_/g,"-"))),{name:t,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:o}},Al=function(t,e,r){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var o=new PerformanceObserver(function(n){Promise.resolve().then(function(){e(n.getEntries())})});return o.observe(Object.assign({type:t,buffered:!0},r||{})),o}}catch{}},Zi=function(t,e,r,o){var n,i;return function(c){e.value>=0&&(c||o)&&((i=e.value-(n||0))||n===void 0)&&(n=e.value,e.delta=i,e.rating=function(s,u){return s>u[1]?"poor":s>u[0]?"needs-improvement":"good"}(e.value,r),t(e))}},tE=function(t){requestAnimationFrame(function(){return requestAnimationFrame(function(){return t()})})},Il=function(t){var e=function(r){r.type!=="pagehide"&&document.visibilityState!=="hidden"||t(r)};addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0)},kl=function(t){var e=!1;return function(r){e||(t(r),e=!0)}},ko=-1,vl=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},Ki=function(t){document.visibilityState==="hidden"&&ko>-1&&(ko=t.type==="visibilitychange"?t.timeStamp:0,rE())},_l=function(){addEventListener("visibilitychange",Ki,!0),addEventListener("prerenderingchange",Ki,!0)},rE=function(){removeEventListener("visibilitychange",Ki,!0),removeEventListener("prerenderingchange",Ki,!0)},Ol=function(){return ko<0&&(ko=vl(),_l(),ru(function(){setTimeout(function(){ko=vl(),_l()},0)})),{get firstHiddenTime(){return ko}}},Cl=function(t){document.prerendering?addEventListener("prerenderingchange",function(){return t()},!0):t()};var Tn={passive:!0,capture:!0},oE=new Date,wl=function(t,e){yr||(yr=e,An=t,Sl=new Date,Rl(removeEventListener),Nl())},Nl=function(){if(An>=0&&An<Sl-oE){var t={entryType:"first-input",name:yr.type,target:yr.target,cancelable:yr.cancelable,startTime:yr.timeStamp,processingStart:yr.timeStamp+An};zi.forEach(function(e){e(t)}),zi=[]}},nE=function(t){if(t.cancelable){var e=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;t.type=="pointerdown"?function(r,o){var n=function(){wl(r,o),c()},i=function(){c()},c=function(){removeEventListener("pointerup",n,Tn),removeEventListener("pointercancel",i,Tn)};addEventListener("pointerup",n,Tn),addEventListener("pointercancel",i,Tn)}(e,t):wl(e,t)}},Rl=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach(function(e){return t(e,nE,Tn)})},El=[100,300],Ll=function(t,e){e=e||{},Cl(function(){var r,o=Ol(),n=Ji("FID"),i=function(u){u.startTime<o.firstHiddenTime&&(n.value=u.processingStart-u.startTime,n.entries.push(u),r(!0))},c=function(u){u.forEach(i)},s=Al("first-input",c);r=Zi(t,n,El,e.reportAllChanges),s&&Il(kl(function(){c(s.takeRecords()),s.disconnect()})),s&&ru(function(){var u;n=Ji("FID"),r=Zi(t,n,El,e.reportAllChanges),zi=[],An=-1,yr=null,Rl(addEventListener),u=i,zi.push(u),Nl()})})};var X5=1/0;var bl=[2500,4e3],tu={},Dl=function(t,e){e=e||{},Cl(function(){var r,o=Ol(),n=Ji("LCP"),i=function(u){var g=u[u.length-1];g&&g.startTime<o.firstHiddenTime&&(n.value=Math.max(g.startTime-Tl(),0),n.entries=[g],r())},c=Al("largest-contentful-paint",i);if(c){r=Zi(t,n,bl,e.reportAllChanges);var s=kl(function(){tu[n.id]||(i(c.takeRecords()),c.disconnect(),tu[n.id]=!0,r(!0))});["keydown","click"].forEach(function(u){addEventListener(u,function(){return setTimeout(s,0)},!0)}),Il(s),ru(function(u){n=Ji("LCP"),r=Zi(t,n,bl,e.reportAllChanges),tE(function(){n.value=performance.now()-u.timeStamp,tu[n.id]=!0,r(!0)})})}})};var iE="site_speed";function aE(){return!!window?.navigator?.serviceWorker}async function sE(){try{let o=function(){let n=Qc();return n==="force_enabled"?!0:n==="force_disabled"?!1:e.enabled};var t=o;if(v()||!aE())return;let e=Io.fromAppSettings();ne(j.SITE_SPEED_BUCKETING,{bucketing:{bucket_name:e.bucketName}});let r=ae("web_vitals_metrics");if(r.get("FID")||(Ll(({name:n,navigationType:i,value:c,delta:s,rating:u})=>{ne(j.SITE_SPEED_FID_METRIC,{web_vitals:{name:n,navigation_type:i,value:c,delta:s,rating:u},bucketing:{bucket_name:e.bucketName}})}),r.set("FID",!0)),r.get("LCP")||(Dl(({name:n,navigationType:i,value:c,delta:s,rating:u})=>{ne(j.SITE_SPEED_LCP_METRIC,{web_vitals:{name:n,navigation_type:i,value:c,delta:s,rating:u},bucketing:{bucket_name:e.bucketName}})}),r.set("LCP",!0)),window.blackcrowSpeed={async forceEnable(){hl(),location.reload()},async forceDisable(){gl(),await eu(),location.reload()},async reset(){yl(),location.reload()},get appStatus(){let n=e.enabled?"enabled":"disabled";return Qc()??n}},e.googleAnalyticsVariantName&&Rt("event","experience_impression",{exp_variant_string:e.googleAnalyticsVariantName,event_label:e.googleAnalyticsVariantName}),o()){let n=await navigator.serviceWorker.register("/sw.js",{scope:"/"}),i=n.installing??n.waiting??n.active;if(i){let{id:c}=await tt(),s=oe({name:"error_sampling",allocations:[{percent:.1,value:!0}]});i.postMessage({message:"config",data:{SITE_NAME:f,VISITOR_ID:c,SAMPLE_ERRORS:!!s}})}}else await eu()}catch(e){a.error(e)}}var Fl={appName:iE,init:sE};var Yi={audience:nf,measure:bf,pwo:np,target:bp,identity:ml,site_speed:Fl};var In={};function cE(t){let e=dt(t.appName);if(typeof t.init=="function"&&e.active)return t.init();let r=ei(t.appName),o={};return r.forEach(n=>{o[n]=Promise.resolve()}),o}function uE(t,e){let r=dt(t.appName);return typeof t.sendAppScores=="function"&&r.active?t.sendAppScores(e):Promise.resolve()}function $l(){P(Yi,(t,e)=>{dt(e).active&&(In[t.appName]=t)})}function Ml(){let t={};return P(In,e=>{t[e.appName]=cE(e)}),t}function ou(t){if(Lt(f))return Promise.resolve();let e=[];return P(In,r=>{e.push(uE(r,t[r.appName]))}),Promise.all(e)}function Bl(){P(In,t=>{typeof t.cleanup=="function"&&t.cleanup()}),In={}}function Xi(t){q("platform",y.VIEW_RESPONSE,e=>t(e))}function Ul(t,e){return Bo(t),ou(e)}function Qi(t,e){Bo(t),vd(t.history_id),Gd(),bs(),kd(),ou(e),Ae("platform",y.VIEW_RESPONSE,t)}var ea=`${d}_overrides`,Vl=!1,ta=null;function dE(){ta=null,pe(ea,{})}async function Wl(t){try{let e=b({},ta||await z(ea),t);ta=e,pe(ea,e),Vl&&console.log(`Your <${d}> settings will apply on the next page load. Please refresh the page.`)}catch(e){a.error(e)}}function fE(){P(Yi,(t,e)=>{q("platform",`force_${e}`,()=>{Wl({apps:{[e]:{active:!0}}})})})}function ql(){q("platform",y.OVERRIDES,Wl),q("platform",y.CLEAR_OVERRIDES,dE),fE()}async function Gl(){try{return Vl=!0,ta||await z(ea)}catch(t){return a.error(t),{}}}function jl(){return $l(),Ml()}var Xe={platforms:{attentive:{submitEvents:["EMAIL_LEAD"]},bounceExchange:{submitEvents:["input_submission","campaign_submit"]},justUno:{},klaviyo:{submitEvents:["submit"]},sleekNote:{submitEvents:["submit"]},wisePops:{submitEvents:["after-form-submit"]},generic:{}},platformIdentifiers:["kl-","klaviyo","attn","fieldcaptureform","sleeknote","justuno","bx","bounceexchange","wisepops"],platformIdentifierExceptions:["kmail"],metadataViolators:["phone","email","sentIdentifiers"],page_id:"EmailSubmit"};var{platformIdentifiers:pE,platformIdentifierExceptions:lE,metadataViolators:mE}=Xe,zl=(t,{qualified:e,resolveTarget:r})=>t?e(t)?r?t:!0:t.parentElement?zl(t.parentElement,{qualified:e,resolveTarget:r}):!1:!1,gE=t=>t.style.position==="fixed"||t.style.top==="0"||t.style.top==="0px",hE=t=>t.nodeName.toLowerCase()==="iframe",yE={form:{qualified:t=>t.nodeName.toLowerCase()==="form",resolveTarget:!0},footer:{qualified:t=>t.nodeName.toLowerCase()==="footer",resolveTarget:!1},overlay:{qualified:t=>gE(t)||hE(t),resolveTarget:!1}},nu=(t,e)=>zl(t,yE[e]),Jl=t=>nu(t,"form"),vE=t=>nu(t,"footer"),_E=t=>nu(t,"overlay"),wE=t=>{if(!t)return"unknown";try{if(_E(t))return"overlay";if(vE(t))return"footer";if(xr()==="checkout")return"checkout"}catch{a.error(new T("email location failed"))}return"unknown"},Zl=()=>{let t=xr()==="checkout",e=document.querySelector('input[type="checkbox"]');return t&&e&&!e.checked},EE=(t,e)=>t.some(r=>typeof r=="string"&&r.toLowerCase().includes(e)),Hl=(t,e)=>e.some(EE.bind(null,t)),Kl=t=>{let e=[...Array.from(t.classList),t.action,t.id];return Hl(e,pE)&&!Hl(e,lE)},bE=t=>{window._learnq=window._learnq||[],window._learnq.push(["identify",{$email:t}])},SE=(t,e)=>{let r={...t};return P(Object.keys(r),o=>{P(e,n=>{o.includes(n)&&(r[o]="redacted")})}),r},PE=t=>{a.push({trigger:y.VIEW,data:{page_id:Xe.page_id,custom_dimensions:t}})},We=(t,e)=>{let r=t.email||t.$email,o=Ka(r);Ya(o)&&(K(o),bE(o),PE({...SE(t,mE),location:wE(e)}),ke.setPIISubmitCookie())};var Yl=["checkout","account","login"],xE=xr(),TE=$e(),Xl=t=>{if(Yl.includes(xE)||Yl.some(r=>TE.includes(r))||Zl())return;let e=t.value;e&&We({email:e},document.activeElement)},AE=()=>{let t;P(Xa(),e=>{if(t=Jl(e),t){if(Kl(t))return;_.addListener(t,"submit",()=>{Xl(e)})}else _.addListener(e,"focusout",()=>{Xl(e)})})};function iu(){te(()=>{_.setTimeout(AE,5e3)})}var{submitEvents:IE}=Xe.platforms.attentive;function au(){_.addListener(window,"message",t=>{let{origin:e,data:r,target:o}=t;if(e.includes(".attn.tv")){let{__attentive:n}=r;IE.includes(n?.action)&&We(n,o.document.activeElement)}})}var kE=(t,e)=>{if(e.isWrapped)return e;function r(){try{t.apply(this,arguments)}catch{}return e.apply(this,arguments)}return r.isWrapped=!0,r},ra=(t,e)=>kE(t,typeof e=="function"?e:()=>{});var{submitEvents:OE}=Xe.platforms.bounceExchange;function su(){_.setTimeout(()=>{window.bouncex=window.bouncex||{},window.bouncex&&typeof window.bouncex.push=="function"&&(window.bouncex.push=ra((...t)=>{let{email:e,source:r}=t[0][1];OE.includes(r)&&We({email:e})},window.bouncex.push))},8e3)}function cu(){_.setTimeout(()=>{window.ju_callback=ra((t,e)=>{We({email:e})},window.ju_callback)},5e3)}var{submitEvents:CE}=Xe.platforms.klaviyo;function uu(){_.addListener(window,"klaviyoForms",t=>{let{detail:e,target:r}=t,{type:o,metaData:n}=e;CE.includes(o)&&We(n,r.document.activeElement)})}var{submitEvents:NE}=Xe.platforms.sleekNote;function du(){_.addListener(window,"sleekNote",t=>{let{data:e,target:r}=t;NE.includes(e.type)&&We(e.data,r.activeElement)})}var{submitEvents:RE}=Xe.platforms.wisePops;function fu(){_.setTimeout(()=>{RE.forEach(t=>{window[window.WisePopsObject]&&typeof window[window.WisePopsObject]=="function"&&window[window.WisePopsObject]("listen",t,e=>{let{target:r}=e,o=r.querySelector('input[type="email"]')?.value;We({email:o},r)})})},5e3)}var LE={attentive:au,bounce_exchange:su,just_uno:cu,klaviyo:uu,sleek_note:du,wise_pops:fu};function pu(){let t=M("config.emailFormTracking"),e=t?.active||!1,r=t?.platforms||[];e&&e===!0&&(iu(),r.map(o=>o.name).forEach(o=>{let n=LE[o];n&&n()}))}var Ql=!1;function DE(t){let e="cart/add",r=y.ADD_TO_CART;Ei(e,()=>{a.push({trigger:r})}),pr(e,()=>{a.push({trigger:r})},t)}function FE(t){_.addListener(window,"click",e=>{let r=E(e,"target.className");(e.target.getAttribute("name")==="checkout"||t&&typeof r=="string"&&r.match(t))&&a.push({trigger:"initiate_checkout"})})}function $E(t){let e=[];return t.items.forEach(r=>{e.push({sku:r.sku,id:r.id,quantity:r.quantity})}),t.items=e,t}function ME(t){return t.items&&(t=$E(t)),{cart_json:t}}function BE(t,e,r){Ge("/cart.json",{servletName:"ShopifyCart"},o=>{let n={custom_dimensions:ME(o)};r?e(r,b({},t,n)):e(b({},t,n))})}function lu(t){Ql===!1&&(D(()=>{if(Me()&&M("config.shopify.add_to_cart.active"))return DE(!0);throw new Error("Shopify globals not found")}),M("config.shopify.checkout.active")&&FE(M("config.shopify.checkout.class_name")),Ql=!0),Xi(()=>{Me()&&M("config.shopify.add_to_cart.active")&&q("platform",y.ADD_TO_CART,e=>{BE(b({},e,{page_id:"AddToCart"}),t,void 0)}),q("platform",y.INITIATE_CHECKOUT,e=>t(b({},e,{page_id:"checkout"})))})}var em=[pu,lu];var oa="target",UE=[or,hn,vn];function mu(){function t(r){let o="advanced_matching";Mt(oa,r,o),se(`${oa} ${o}: ${r}`,"update")}function e(r){let o=J(oa,r.name);!o||Object.keys(o).length===0||typeof r.identify=="function"&&r.identify(oa,()=>t(r.name))}UE.forEach(r=>e(r))}function gu(){function t(){gd(mu),Bd(mu),af()}(M("config.visitor.set_info")||ai())&&te(t)}var tm=!0;function VE(t){Bl(),_s(),xa(),ms(),Bo({}),Ia({}),t&&Object.keys(t).length>0&&Wn(t)}async function hu(t={}){try{async function e(n){try{let u=function(g={}){ms(),ne(j.VIEW,g,h=>{Ul(h,s)})};var i=u;ql();let c=b(n,await Gl());if(Ia(c),Ae("platform",y.START,{build:"15641"}),q("platform",y.REFRESH,r),E(c,"page.ignored"))return;await Jf();let s=jl();Xi(()=>{q("platform",y.VIEW,g=>u(g))}),em.forEach(g=>g(u)),await ne(j.VIEW,{},g=>{Qi(g,s)},()=>{Qi({},s)})}catch(c){a.error(c)}}async function r(n={}){try{let i=t.pages||[],c=O(),s=Ed(i,c);if(se(`page: ${s.id} ${s.isNewPage?"\u2714":"\xD7"}`,s),s.isNewPage){let u=b(t,s.config);tm?(xa(),tm=!1):VE(n),await e(u)}gu()}catch(i){a.error(i)}}async function o(n=0){try{await Xt(t)?await r():n<5?_.setTimeout(()=>{o(n+1)},400):(await r(),a.error(new T("vendor id not found (google id)")))}catch(i){a.error(i)}}E(t,"config.visitor.id_source")==="google"?await o():await r()}catch(e){a.error(e)}}var WE=oe({name:"log_spa_refresh_sampling",allocations:[{percent:.1,value:!0}]});function rm(t,e){WE&&he(t,{url:e})}var om={SPA_REFRESH_ENABLED:"config.spa.refresh.enabled",SPA_REFRESH_DELAY:"config.spa.refresh.delay"};function yu(){if(!v()&&M(om.SPA_REFRESH_ENABLED)){let t=M(om.SPA_REFRESH_DELAY)||1e3;(e=>{if(e===void 0){a.error("Unable to setup SPA refresh: window.history is undefined");return}function r(i){rm("history_intercepted_initial",i),_.setTimeout(()=>{rm("history_intercepted_timeout",i),a.push({trigger:y.REFRESH})},t)}let o=e.pushState;e.pushState=function(){try{let c=arguments.length>=3?arguments[2]:"not passed";r(c)}catch(c){a.error(c)}return o.apply(e,arguments)};let n=e.replaceState;e.replaceState=function(){try{let c=arguments.length>=3?arguments[2]:"not passed";r(c)}catch(c){a.error(c)}return n.apply(e,arguments)}})(window.history)}}async function nm(){let t=await Re(()=>window?.Shopify,12e4);if(t)return t.customerPrivacy||await new Promise(e=>{t.loadFeatures?t.loadFeatures([{name:"consent-tracking-api",version:"0.1"}],e):e(void 0)}),window?.Shopify?.customerPrivacy}async function qE(){let t=await I("_cmp_a");if(!t)return!1;let e=JSON.parse(decodeURIComponent(t));return!!(e?.purposes?.a&&e?.purposes?.m)}function GE(t){return new Promise(e=>qE().then(r=>{r&&(t(),e(!0))})).catch(e=>{})}function jE(t){window?.Shopify?.customerPrivacy?.userCanBeTracked?.()?t():_.addListener(document,"visitorConsentCollected",()=>{window?.Shopify?.customerPrivacy?.userCanBeTracked?.()&&t()})}function HE(t){return new Promise(e=>nm().then(r=>{r&&(jE(t),e(!0))})).catch(e=>{})}async function im(t){if(v())return t(),Promise.resolve(!0);let r=(o=>{let n=!1;return()=>{n||(n=!0,o())}})(t);return Promise.race([GE(r),HE(r),new Promise(o=>ue(1e4).then(()=>{window?.Shopify?.customerPrivacy||(r(),o(!0))}))])}function am(){let t=M("config.events");return t&&t.purchase&&t.purchase.fbEventsToIntercept&&t.purchase.fbEventsToIntercept.length>0?t.purchase.fbEventsToIntercept:null}function sm(){let t=M("config.events");return t&&t.view&&t.view.fbEventsToIntercept&&t.view.fbEventsToIntercept.length>0?t.view.fbEventsToIntercept:null}var zE=["load","error"],JE=oe({name:"log_intercepted_fb_event",allocations:[{percent:.1,value:!0}]});function cm(t,e){let r="Interepted FB event - ".concat(t.event,". Event fired - ",e.type);JE&&he(r)}function um(t,e){return t.find(r=>{let o=r.event,i=(r.filters||[]).map(s=>`.*${s}`).join(),c=`facebook.com/tr/\\?id=.*&ev=${o}${i}`;return e.src.match(c)})}function ZE(t,e,r){let o=um(e,r);o&&(cm(o,t),a.push({trigger:y.PURCHASE}))}function KE(t,e,r){let o=um(e,r);o&&(cm(o,t),!Me()&&o.event==="AddToCart"&&a.push({trigger:y.ADD_TO_CART}),a.push({trigger:y.VIEW,data:{page_id:o.page_id}}))}var YE=(t,e,r,o)=>{r&&ZE(e,r,t),o&&KE(e,o,t)};function vu(){if(!v()){let t=am(),e=sm();if(t||e){let r=Image;Image=function(...n){let i=new r(...n);return zE.forEach(c=>_.addListener(i,c,s=>{YE(i,s,t,e)})),i}}}}async function na(t,e){try{if(await z(t)===!1)return!1;await Rf(e,!1)}catch(r){a.error(r)}return!0}async function dm(){try{if(!v())return Fa()?Promise.resolve(await na("loadBundleOnThankYouPage","loadWebPixelOnThankYouPage")):Da()?Promise.resolve(await na("loadBundleOnCheckoutPage","loadWebPixelOnCheckoutPage")):Promise.resolve(!0);let t=E(window,"shopifyEvent.name")==="checkout_completed";return Fa()||t?Promise.resolve(await na("loadWebPixelOnThankYouPage","loadBundleOnThankYouPage")):Da()?Promise.resolve(await na("loadWebPixelOnCheckoutPage","loadBundleOnCheckoutPage")):Promise.resolve(!1)}catch(t){return a.error(t),Promise.resolve(!0)}}var _u=class extends Error{constructor(){super(`Failed to fetch config from CDN - ${Ba()}`),this.status="warn"}},XE=8,QE=10;async function eb(){try{return await bt(Yu,XE,QE,!0)}catch{throw new _u}}async function tb(t=()=>{},e=()=>{}){try{if(Hu(),ju()||!await dm())return;let o=await eb();if(await t(o),o?.config?.consentManager==="shopify"&&await new Promise(n=>{im(n)}),a.SITE_NAME=f,Gu(),ys(),a.coreStarted){a.push({trigger:y.REFRESH});return}a.coreStarted=!0,vs(),bd(o.param_transforms),jd(),await hu(o),yu(),vu(),Id(),e()}catch(r){a.error(r)}}var fm=tb;fm();})();
}catch(e){try{e.message=e.name+':'+e.message;e.name='ParseError';if(blackcrow&&blackcrow.BUILD_NUMBER==='DEV')(blackcrow.error||console.error||console.log)(e);else(blackcrow&&blackcrow.error&&blackcrow.error(e));}catch(_){}}})();
